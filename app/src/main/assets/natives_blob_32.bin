mirrors‰
(function(a,b){
"use strict";
var c;
var d;
var e=a.Array;
var f=a.isNaN;
var g=a.JSON.stringify;
var h;
var i;
var j;
var k=a.Math.min;
var l=b.ImportNow("promise_status_symbol");
var m=b.ImportNow("promise_value_symbol");
var n;
var o;
var p;
b.Import(function(q){
c=q.ErrorToString;
d=q.FunctionSourceString;
h=q.MakeError;
i=q.MapEntries;
j=q.MapIteratorNext;
n=q.SetIteratorNext;
o=q.SetValues;
p=q.SymbolToString;
});
var r={
UNDEFINED_TYPE:'undefined',
NULL_TYPE:'null',
BOOLEAN_TYPE:'boolean',
NUMBER_TYPE:'number',
STRING_TYPE:'string',
SYMBOL_TYPE:'symbol',
OBJECT_TYPE:'object',
FUNCTION_TYPE:'function',
REGEXP_TYPE:'regexp',
ERROR_TYPE:'error',
PROPERTY_TYPE:'property',
INTERNAL_PROPERTY_TYPE:'internalProperty',
FRAME_TYPE:'frame',
SCRIPT_TYPE:'script',
CONTEXT_TYPE:'context',
SCOPE_TYPE:'scope',
PROMISE_TYPE:'promise',
MAP_TYPE:'map',
SET_TYPE:'set',
ITERATOR_TYPE:'iterator',
GENERATOR_TYPE:'generator',
}
var s=0;
var t=-1;
var u=[];
var v=true;
function MirrorCacheIsEmpty(){
return s==0&&u.length==0;
}
function ToggleMirrorCache(w){
v=w;
ClearMirrorCache();
}
function ClearMirrorCache(w){
s=0;
u=[];
}
function ObjectIsPromise(w){
return(%_IsSpecObject(w))&&
!(%DebugGetProperty(w,l)===(void 0));
}
function MakeMirror(w,x){
var y;
if(!x&&v){
for(var z in u){
y=u[z];
if(y.value()===w){
return y;
}
if(y.isNumber()&&f(y.value())&&
typeof w=='number'&&f(w)){
return y;
}
}
}
if((w===(void 0))){
y=new UndefinedMirror();
}else if((w===null)){
y=new NullMirror();
}else if((typeof(w)==='boolean')){
y=new BooleanMirror(w);
}else if((typeof(w)==='number')){
y=new NumberMirror(w);
}else if((typeof(w)==='string')){
y=new StringMirror(w);
}else if((typeof(w)==='symbol')){
y=new SymbolMirror(w);
}else if((%_IsArray(w))){
y=new ArrayMirror(w);
}else if((%_IsDate(w))){
y=new DateMirror(w);
}else if((%_IsFunction(w))){
y=new FunctionMirror(w);
}else if((%_IsRegExp(w))){
y=new RegExpMirror(w);
}else if((%_ClassOf(w)==='Error')){
y=new ErrorMirror(w);
}else if((%_ClassOf(w)==='Script')){
y=new ScriptMirror(w);
}else if((%_ClassOf(w)==='Map')||(%_ClassOf(w)==='WeakMap')){
y=new MapMirror(w);
}else if((%_ClassOf(w)==='Set')||(%_ClassOf(w)==='WeakSet')){
y=new SetMirror(w);
}else if((%_ClassOf(w)==='Map Iterator')||(%_ClassOf(w)==='Set Iterator')){
y=new IteratorMirror(w);
}else if(ObjectIsPromise(w)){
y=new PromiseMirror(w);
}else if((%_ClassOf(w)==='Generator')){
y=new GeneratorMirror(w);
}else{
y=new ObjectMirror(w,r.OBJECT_TYPE,x);
}
if(v)u[y.handle()]=y;
return y;
}
function LookupMirror(A){
if(!v){
throw h(2,"Mirror cache is disabled");
}
return u[A];
}
function GetUndefinedMirror(){
return MakeMirror((void 0));
}
function inherits(B,C){
var D=function(){};
D.prototype=C.prototype;
B.super_=C.prototype;
B.prototype=new D();
B.prototype.constructor=B;
}
var E=80;
var F={};
F.Named=1;
F.Indexed=2;
var G={};
G.Data=0;
G.DataConstant=2;
G.AccessorConstant=3;
var H={};
H.None=0;
H.ReadOnly=1;
H.DontEnum=2;
H.DontDelete=4;
var I={Global:0,
Local:1,
With:2,
Closure:3,
Catch:4,
Block:5,
Script:6};
function Mirror(J){
this.type_=J;
}
Mirror.prototype.type=function(){
return this.type_;
};
Mirror.prototype.isValue=function(){
return this instanceof ValueMirror;
};
Mirror.prototype.isUndefined=function(){
return this instanceof UndefinedMirror;
};
Mirror.prototype.isNull=function(){
return this instanceof NullMirror;
};
Mirror.prototype.isBoolean=function(){
return this instanceof BooleanMirror;
};
Mirror.prototype.isNumber=function(){
return this instanceof NumberMirror;
};
Mirror.prototype.isString=function(){
return this instanceof StringMirror;
};
Mirror.prototype.isSymbol=function(){
return this instanceof SymbolMirror;
};
Mirror.prototype.isObject=function(){
return this instanceof ObjectMirror;
};
Mirror.prototype.isFunction=function(){
return this instanceof FunctionMirror;
};
Mirror.prototype.isUnresolvedFunction=function(){
return this instanceof UnresolvedFunctionMirror;
};
Mirror.prototype.isArray=function(){
return this instanceof ArrayMirror;
};
Mirror.prototype.isDate=function(){
return this instanceof DateMirror;
};
Mirror.prototype.isRegExp=function(){
return this instanceof RegExpMirror;
};
Mirror.prototype.isError=function(){
return this instanceof ErrorMirror;
};
Mirror.prototype.isPromise=function(){
return this instanceof PromiseMirror;
};
Mirror.prototype.isGenerator=function(){
return this instanceof GeneratorMirror;
};
Mirror.prototype.isProperty=function(){
return this instanceof PropertyMirror;
};
Mirror.prototype.isInternalProperty=function(){
return this instanceof InternalPropertyMirror;
};
Mirror.prototype.isFrame=function(){
return this instanceof FrameMirror;
};
Mirror.prototype.isScript=function(){
return this instanceof ScriptMirror;
};
Mirror.prototype.isContext=function(){
return this instanceof ContextMirror;
};
Mirror.prototype.isScope=function(){
return this instanceof ScopeMirror;
};
Mirror.prototype.isMap=function(){
return this instanceof MapMirror;
};
Mirror.prototype.isSet=function(){
return this instanceof SetMirror;
};
Mirror.prototype.isIterator=function(){
return this instanceof IteratorMirror;
};
Mirror.prototype.allocateHandle_=function(){
if(v)this.handle_=s++;
};
Mirror.prototype.allocateTransientHandle_=function(){
this.handle_=t--;
};
Mirror.prototype.toText=function(){
return"#<"+this.constructor.name+">";
};
function ValueMirror(J,w,K){
%_CallFunction(this,J,Mirror);
this.value_=w;
if(!K){
this.allocateHandle_();
}else{
this.allocateTransientHandle_();
}
}
inherits(ValueMirror,Mirror);
Mirror.prototype.handle=function(){
return this.handle_;
};
ValueMirror.prototype.isPrimitive=function(){
var J=this.type();
return J==='undefined'||
J==='null'||
J==='boolean'||
J==='number'||
J==='string'||
J==='symbol';
};
ValueMirror.prototype.value=function(){
return this.value_;
};
function UndefinedMirror(){
%_CallFunction(this,r.UNDEFINED_TYPE,(void 0),ValueMirror);
}
inherits(UndefinedMirror,ValueMirror);
UndefinedMirror.prototype.toText=function(){
return'undefined';
};
function NullMirror(){
%_CallFunction(this,r.NULL_TYPE,null,ValueMirror);
}
inherits(NullMirror,ValueMirror);
NullMirror.prototype.toText=function(){
return'null';
};
function BooleanMirror(w){
%_CallFunction(this,r.BOOLEAN_TYPE,w,ValueMirror);
}
inherits(BooleanMirror,ValueMirror);
BooleanMirror.prototype.toText=function(){
return this.value_?'true':'false';
};
function NumberMirror(w){
%_CallFunction(this,r.NUMBER_TYPE,w,ValueMirror);
}
inherits(NumberMirror,ValueMirror);
NumberMirror.prototype.toText=function(){
return %_NumberToString(this.value_);
};
function StringMirror(w){
%_CallFunction(this,r.STRING_TYPE,w,ValueMirror);
}
inherits(StringMirror,ValueMirror);
StringMirror.prototype.length=function(){
return this.value_.length;
};
StringMirror.prototype.getTruncatedValue=function(L){
if(L!=-1&&this.length()>L){
return this.value_.substring(0,L)+
'... (length: '+this.length()+')';
}
return this.value_;
};
StringMirror.prototype.toText=function(){
return this.getTruncatedValue(E);
};
function SymbolMirror(w){
%_CallFunction(this,r.SYMBOL_TYPE,w,ValueMirror);
}
inherits(SymbolMirror,ValueMirror);
SymbolMirror.prototype.description=function(){
return %SymbolDescription(%_ValueOf(this.value_));
}
SymbolMirror.prototype.toText=function(){
return %_CallFunction(this.value_,p);
}
function ObjectMirror(w,J,K){
J=J||r.OBJECT_TYPE;
%_CallFunction(this,J,w,K,ValueMirror);
}
inherits(ObjectMirror,ValueMirror);
ObjectMirror.prototype.className=function(){
return %_ClassOf(this.value_);
};
ObjectMirror.prototype.constructorFunction=function(){
return MakeMirror(%DebugGetProperty(this.value_,'constructor'));
};
ObjectMirror.prototype.prototypeObject=function(){
return MakeMirror(%DebugGetProperty(this.value_,'prototype'));
};
ObjectMirror.prototype.protoObject=function(){
return MakeMirror(%DebugGetPrototype(this.value_));
};
ObjectMirror.prototype.hasNamedInterceptor=function(){
var M=%GetInterceptorInfo(this.value_);
return(M&2)!=0;
};
ObjectMirror.prototype.hasIndexedInterceptor=function(){
var M=%GetInterceptorInfo(this.value_);
return(M&1)!=0;
};
function TryGetPropertyNames(N){
try{
return %GetOwnPropertyNames(N,32);
}catch(e){
return[];
}
}
ObjectMirror.prototype.propertyNames=function(O,P){
O=O||F.Named|F.Indexed;
var Q;
var R;
var S=0;
if(O&F.Named){
Q=TryGetPropertyNames(this.value_);
S+=Q.length;
if(this.hasNamedInterceptor()&&(O&F.Named)){
var T=
%GetNamedInterceptorPropertyNames(this.value_);
if(T){
Q=Q.concat(T);
S+=T.length;
}
}
}
if(O&F.Indexed){
R=%GetOwnElementNames(this.value_);
S+=R.length;
if(this.hasIndexedInterceptor()&&(O&F.Indexed)){
var U=
%GetIndexedInterceptorElementNames(this.value_);
if(U){
R=R.concat(U);
S+=U.length;
}
}
}
P=k(P||S,S);
var V=new e(P);
var W=0;
if(O&F.Named){
for(var X=0;W<P&&X<Q.length;X++){
V[W++]=Q[X];
}
}
if(O&F.Indexed){
for(var X=0;W<P&&X<R.length;X++){
V[W++]=R[X];
}
}
return V;
};
ObjectMirror.prototype.properties=function(O,P){
var V=this.propertyNames(O,P);
var Y=new e(V.length);
for(var X=0;X<V.length;X++){
Y[X]=this.property(V[X]);
}
return Y;
};
ObjectMirror.prototype.internalProperties=function(){
return ObjectMirror.GetInternalProperties(this.value_);
}
ObjectMirror.prototype.property=function(Z){
var aa=%DebugGetPropertyDetails(this.value_,(%_ToName(Z)));
if(aa){
return new PropertyMirror(this,Z,aa);
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.lookupProperty=function(w){
var Y=this.properties();
for(var X=0;X<Y.length;X++){
var ab=Y[X];
if(ab.propertyType()!=G.AccessorConstant){
if(%_ObjectEquals(ab.value_,w.value_)){
return ab;
}
}
}
return GetUndefinedMirror();
};
ObjectMirror.prototype.referencedBy=function(ac){
var ad=%DebugReferencedBy(this.value_,
Mirror.prototype,ac||0);
for(var X=0;X<ad.length;X++){
ad[X]=MakeMirror(ad[X]);
}
return ad;
};
ObjectMirror.prototype.toText=function(){
var Z;
var B=this.constructorFunction();
if(!B.isFunction()){
Z=this.className();
}else{
Z=B.name();
if(!Z){
Z=this.className();
}
}
return'#<'+Z+'>';
};
ObjectMirror.GetInternalProperties=function(w){
var Y=%DebugGetInternalProperties(w);
var ad=[];
for(var X=0;X<Y.length;X+=2){
ad.push(new InternalPropertyMirror(Y[X],Y[X+1]));
}
return ad;
}
function FunctionMirror(w){
%_CallFunction(this,w,r.FUNCTION_TYPE,ObjectMirror);
this.resolved_=true;
}
inherits(FunctionMirror,ObjectMirror);
FunctionMirror.prototype.resolved=function(){
return this.resolved_;
};
FunctionMirror.prototype.name=function(){
return %FunctionGetName(this.value_);
};
FunctionMirror.prototype.inferredName=function(){
return %FunctionGetInferredName(this.value_);
};
FunctionMirror.prototype.source=function(){
if(this.resolved()){
return d(this.value_);
}
};
FunctionMirror.prototype.script=function(){
if(this.resolved()){
if(this.script_){
return this.script_;
}
var ae=%FunctionGetScript(this.value_);
if(ae){
return this.script_=MakeMirror(ae);
}
}
};
FunctionMirror.prototype.sourcePosition_=function(){
if(this.resolved()){
return %FunctionGetScriptSourcePosition(this.value_);
}
};
FunctionMirror.prototype.sourceLocation=function(){
if(this.resolved()){
var ae=this.script();
if(ae){
return ae.locationFromPosition(this.sourcePosition_(),true);
}
}
};
FunctionMirror.prototype.constructedBy=function(af){
if(this.resolved()){
var ad=%DebugConstructedBy(this.value_,af||0);
for(var X=0;X<ad.length;X++){
ad[X]=MakeMirror(ad[X]);
}
return ad;
}else{
return[];
}
};
FunctionMirror.prototype.scopeCount=function(){
if(this.resolved()){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetFunctionScopeCount(this.value());
}
return this.scopeCount_;
}else{
return 0;
}
};
FunctionMirror.prototype.scope=function(W){
if(this.resolved()){
return new ScopeMirror((void 0),this,W);
}
};
FunctionMirror.prototype.toText=function(){
return this.source();
};
function UnresolvedFunctionMirror(w){
%_CallFunction(this,r.FUNCTION_TYPE,w,ValueMirror);
this.propertyCount_=0;
this.elementCount_=0;
this.resolved_=false;
}
inherits(UnresolvedFunctionMirror,FunctionMirror);
UnresolvedFunctionMirror.prototype.className=function(){
return'Function';
};
UnresolvedFunctionMirror.prototype.constructorFunction=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.prototypeObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.protoObject=function(){
return GetUndefinedMirror();
};
UnresolvedFunctionMirror.prototype.name=function(){
return this.value_;
};
UnresolvedFunctionMirror.prototype.inferredName=function(){
return(void 0);
};
UnresolvedFunctionMirror.prototype.propertyNames=function(O,P){
return[];
};
function ArrayMirror(w){
%_CallFunction(this,w,ObjectMirror);
}
inherits(ArrayMirror,ObjectMirror);
ArrayMirror.prototype.length=function(){
return this.value_.length;
};
ArrayMirror.prototype.indexedPropertiesFromRange=function(opt_from_index,
opt_to_index){
var ag=opt_from_index||0;
var ah=opt_to_index||this.length()-1;
if(ag>ah)return new e();
var ai=new e(ah-ag+1);
for(var X=ag;X<=ah;X++){
var aa=%DebugGetPropertyDetails(this.value_,(%_ToString(X)));
var w;
if(aa){
w=new PropertyMirror(this,X,aa);
}else{
w=GetUndefinedMirror();
}
ai[X-ag]=w;
}
return ai;
};
function DateMirror(w){
%_CallFunction(this,w,ObjectMirror);
}
inherits(DateMirror,ObjectMirror);
DateMirror.prototype.toText=function(){
var aj=g(this.value_);
return aj.substring(1,aj.length-1);
};
function RegExpMirror(w){
%_CallFunction(this,w,r.REGEXP_TYPE,ObjectMirror);
}
inherits(RegExpMirror,ObjectMirror);
RegExpMirror.prototype.source=function(){
return this.value_.source;
};
RegExpMirror.prototype.global=function(){
return this.value_.global;
};
RegExpMirror.prototype.ignoreCase=function(){
return this.value_.ignoreCase;
};
RegExpMirror.prototype.multiline=function(){
return this.value_.multiline;
};
RegExpMirror.prototype.sticky=function(){
return this.value_.sticky;
};
RegExpMirror.prototype.unicode=function(){
return this.value_.unicode;
};
RegExpMirror.prototype.toText=function(){
return"/"+this.source()+"/";
};
function ErrorMirror(w){
%_CallFunction(this,w,r.ERROR_TYPE,ObjectMirror);
}
inherits(ErrorMirror,ObjectMirror);
ErrorMirror.prototype.message=function(){
return this.value_.message;
};
ErrorMirror.prototype.toText=function(){
var ak;
try{
ak=%_CallFunction(this.value_,c);
}catch(e){
ak='#<Error>';
}
return ak;
};
function PromiseMirror(w){
%_CallFunction(this,w,r.PROMISE_TYPE,ObjectMirror);
}
inherits(PromiseMirror,ObjectMirror);
function PromiseGetStatus_(w){
var al=%DebugGetProperty(w,l);
if(al==0)return"pending";
if(al==1)return"resolved";
return"rejected";
}
function PromiseGetValue_(w){
return %DebugGetProperty(w,m);
}
PromiseMirror.prototype.status=function(){
return PromiseGetStatus_(this.value_);
};
PromiseMirror.prototype.promiseValue=function(){
return MakeMirror(PromiseGetValue_(this.value_));
};
function MapMirror(w){
%_CallFunction(this,w,r.MAP_TYPE,ObjectMirror);
}
inherits(MapMirror,ObjectMirror);
MapMirror.prototype.entries=function(am){
var ad=[];
if((%_ClassOf(this.value_)==='WeakMap')){
var an=%GetWeakMapEntries(this.value_,am||0);
for(var X=0;X<an.length;X+=2){
ad.push({
key:an[X],
value:an[X+1]
});
}
return ad;
}
var ao=%_CallFunction(this.value_,i);
var ap;
while((!am||ad.length<am)&&
!(ap=ao.next()).done){
ad.push({
key:ap.value[0],
value:ap.value[1]
});
}
return ad;
};
function SetMirror(w){
%_CallFunction(this,w,r.SET_TYPE,ObjectMirror);
}
inherits(SetMirror,ObjectMirror);
function IteratorGetValues_(ao,aq,am){
var ad=[];
var ap;
while((!am||ad.length<am)&&
!(ap=%_CallFunction(ao,aq)).done){
ad.push(ap.value);
}
return ad;
}
SetMirror.prototype.values=function(am){
if((%_ClassOf(this.value_)==='WeakSet')){
return %GetWeakSetValues(this.value_,am||0);
}
var ao=%_CallFunction(this.value_,o);
return IteratorGetValues_(ao,n,am);
};
function IteratorMirror(w){
%_CallFunction(this,w,r.ITERATOR_TYPE,ObjectMirror);
}
inherits(IteratorMirror,ObjectMirror);
IteratorMirror.prototype.preview=function(am){
if((%_ClassOf(this.value_)==='Map Iterator')){
return IteratorGetValues_(%MapIteratorClone(this.value_),
j,
am);
}else if((%_ClassOf(this.value_)==='Set Iterator')){
return IteratorGetValues_(%SetIteratorClone(this.value_),
n,
am);
}
};
function GeneratorMirror(w){
%_CallFunction(this,w,r.GENERATOR_TYPE,ObjectMirror);
}
inherits(GeneratorMirror,ObjectMirror);
function GeneratorGetStatus_(w){
var ar=%GeneratorGetContinuation(w);
if(ar<0)return"running";
if(ar==0)return"closed";
return"suspended";
}
GeneratorMirror.prototype.status=function(){
return GeneratorGetStatus_(this.value_);
};
GeneratorMirror.prototype.sourcePosition_=function(){
return %GeneratorGetSourcePosition(this.value_);
};
GeneratorMirror.prototype.sourceLocation=function(){
var as=this.sourcePosition_();
if(!(as===(void 0))){
var ae=this.func().script();
if(ae){
return ae.locationFromPosition(as,true);
}
}
};
GeneratorMirror.prototype.func=function(){
if(!this.func_){
this.func_=MakeMirror(%GeneratorGetFunction(this.value_));
}
return this.func_;
};
GeneratorMirror.prototype.context=function(){
if(!this.context_){
this.context_=new ContextMirror(%GeneratorGetContext(this.value_));
}
return this.context_;
};
GeneratorMirror.prototype.receiver=function(){
if(!this.receiver_){
this.receiver_=MakeMirror(%GeneratorGetReceiver(this.value_));
}
return this.receiver_;
};
function PropertyMirror(y,Z,aa){
%_CallFunction(this,r.PROPERTY_TYPE,Mirror);
this.mirror_=y;
this.name_=Z;
this.value_=aa[0];
this.details_=aa[1];
this.is_interceptor_=aa[2];
if(aa.length>3){
this.exception_=aa[3];
this.getter_=aa[4];
this.setter_=aa[5];
}
}
inherits(PropertyMirror,Mirror);
PropertyMirror.prototype.isReadOnly=function(){
return(this.attributes()&H.ReadOnly)!=0;
};
PropertyMirror.prototype.isEnum=function(){
return(this.attributes()&H.DontEnum)==0;
};
PropertyMirror.prototype.canDelete=function(){
return(this.attributes()&H.DontDelete)==0;
};
PropertyMirror.prototype.name=function(){
return this.name_;
};
PropertyMirror.prototype.isIndexed=function(){
for(var X=0;X<this.name_.length;X++){
if(this.name_[X]<'0'||'9'<this.name_[X]){
return false;
}
}
return true;
};
PropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
PropertyMirror.prototype.isException=function(){
return this.exception_?true:false;
};
PropertyMirror.prototype.attributes=function(){
return %DebugPropertyAttributesFromDetails(this.details_);
};
PropertyMirror.prototype.propertyType=function(){
return %DebugPropertyTypeFromDetails(this.details_);
};
PropertyMirror.prototype.insertionIndex=function(){
return %DebugPropertyIndexFromDetails(this.details_);
};
PropertyMirror.prototype.hasGetter=function(){
return this.getter_?true:false;
};
PropertyMirror.prototype.hasSetter=function(){
return this.setter_?true:false;
};
PropertyMirror.prototype.getter=function(){
if(this.hasGetter()){
return MakeMirror(this.getter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.setter=function(){
if(this.hasSetter()){
return MakeMirror(this.setter_);
}else{
return GetUndefinedMirror();
}
};
PropertyMirror.prototype.isNative=function(){
return this.is_interceptor_||
((this.propertyType()==G.AccessorConstant)&&
!this.hasGetter()&&!this.hasSetter());
};
function InternalPropertyMirror(Z,w){
%_CallFunction(this,r.INTERNAL_PROPERTY_TYPE,Mirror);
this.name_=Z;
this.value_=w;
}
inherits(InternalPropertyMirror,Mirror);
InternalPropertyMirror.prototype.name=function(){
return this.name_;
};
InternalPropertyMirror.prototype.value=function(){
return MakeMirror(this.value_,false);
};
var at=0;
var au=1;
var av=2;
var aw=3;
var ax=4;
var ay=5;
var az=6;
var aA=7;
var aB=8;
var aC=9;
var aD=0;
var aE=1;
var aF=2;
var aG=1<<0;
var aH=1<<1;
var aI=7<<2;
function FrameDetails(aJ,W){
this.break_id_=aJ;
this.details_=%GetFrameDetails(aJ,W);
}
FrameDetails.prototype.frameId=function(){
%CheckExecutionState(this.break_id_);
return this.details_[at];
};
FrameDetails.prototype.receiver=function(){
%CheckExecutionState(this.break_id_);
return this.details_[au];
};
FrameDetails.prototype.func=function(){
%CheckExecutionState(this.break_id_);
return this.details_[av];
};
FrameDetails.prototype.isConstructCall=function(){
%CheckExecutionState(this.break_id_);
return this.details_[az];
};
FrameDetails.prototype.isAtReturn=function(){
%CheckExecutionState(this.break_id_);
return this.details_[aA];
};
FrameDetails.prototype.isDebuggerFrame=function(){
%CheckExecutionState(this.break_id_);
var aK=aG;
return(this.details_[aB]&aK)==aK;
};
FrameDetails.prototype.isOptimizedFrame=function(){
%CheckExecutionState(this.break_id_);
var aK=aH;
return(this.details_[aB]&aK)==aK;
};
FrameDetails.prototype.isInlinedFrame=function(){
return this.inlinedFrameIndex()>0;
};
FrameDetails.prototype.inlinedFrameIndex=function(){
%CheckExecutionState(this.break_id_);
var aK=aI;
return(this.details_[aB]&aK)>>2;
};
FrameDetails.prototype.argumentCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[aw];
};
FrameDetails.prototype.argumentName=function(W){
%CheckExecutionState(this.break_id_);
if(W>=0&&W<this.argumentCount()){
return this.details_[aC+
W*aF+
aD];
}
};
FrameDetails.prototype.argumentValue=function(W){
%CheckExecutionState(this.break_id_);
if(W>=0&&W<this.argumentCount()){
return this.details_[aC+
W*aF+
aE];
}
};
FrameDetails.prototype.localCount=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ax];
};
FrameDetails.prototype.sourcePosition=function(){
%CheckExecutionState(this.break_id_);
return this.details_[ay];
};
FrameDetails.prototype.localName=function(W){
%CheckExecutionState(this.break_id_);
if(W>=0&&W<this.localCount()){
var aL=aC+
this.argumentCount()*aF;
return this.details_[aL+
W*aF+
aD];
}
};
FrameDetails.prototype.localValue=function(W){
%CheckExecutionState(this.break_id_);
if(W>=0&&W<this.localCount()){
var aL=aC+
this.argumentCount()*aF;
return this.details_[aL+
W*aF+
aE];
}
};
FrameDetails.prototype.returnValue=function(){
%CheckExecutionState(this.break_id_);
var aM=
aC+
(this.argumentCount()+this.localCount())*aF;
if(this.details_[aA]){
return this.details_[aM];
}
};
FrameDetails.prototype.scopeCount=function(){
if((this.scopeCount_===(void 0))){
this.scopeCount_=%GetScopeCount(this.break_id_,this.frameId());
}
return this.scopeCount_;
};
FrameDetails.prototype.stepInPositionsImpl=function(){
return %GetStepInPositions(this.break_id_,this.frameId());
};
function FrameMirror(aJ,W){
%_CallFunction(this,r.FRAME_TYPE,Mirror);
this.break_id_=aJ;
this.index_=W;
this.details_=new FrameDetails(aJ,W);
}
inherits(FrameMirror,Mirror);
FrameMirror.prototype.details=function(){
return this.details_;
};
FrameMirror.prototype.index=function(){
return this.index_;
};
FrameMirror.prototype.func=function(){
if(this.func_){
return this.func_;
}
var aK=this.details_.func();
if((%_IsFunction(aK))){
return this.func_=MakeMirror(aK);
}else{
return new UnresolvedFunctionMirror(aK);
}
};
FrameMirror.prototype.receiver=function(){
return MakeMirror(this.details_.receiver());
};
FrameMirror.prototype.isConstructCall=function(){
return this.details_.isConstructCall();
};
FrameMirror.prototype.isAtReturn=function(){
return this.details_.isAtReturn();
};
FrameMirror.prototype.isDebuggerFrame=function(){
return this.details_.isDebuggerFrame();
};
FrameMirror.prototype.isOptimizedFrame=function(){
return this.details_.isOptimizedFrame();
};
FrameMirror.prototype.isInlinedFrame=function(){
return this.details_.isInlinedFrame();
};
FrameMirror.prototype.inlinedFrameIndex=function(){
return this.details_.inlinedFrameIndex();
};
FrameMirror.prototype.argumentCount=function(){
return this.details_.argumentCount();
};
FrameMirror.prototype.argumentName=function(W){
return this.details_.argumentName(W);
};
FrameMirror.prototype.argumentValue=function(W){
return MakeMirror(this.details_.argumentValue(W));
};
FrameMirror.prototype.localCount=function(){
return this.details_.localCount();
};
FrameMirror.prototype.localName=function(W){
return this.details_.localName(W);
};
FrameMirror.prototype.localValue=function(W){
return MakeMirror(this.details_.localValue(W));
};
FrameMirror.prototype.returnValue=function(){
return MakeMirror(this.details_.returnValue());
};
FrameMirror.prototype.sourcePosition=function(){
return this.details_.sourcePosition();
};
FrameMirror.prototype.sourceLocation=function(){
var aN=this.func();
if(aN.resolved()){
var ae=aN.script();
if(ae){
return ae.locationFromPosition(this.sourcePosition(),true);
}
}
};
FrameMirror.prototype.sourceLine=function(){
var aO=this.sourceLocation();
if(aO){
return aO.line;
}
};
FrameMirror.prototype.sourceColumn=function(){
var aO=this.sourceLocation();
if(aO){
return aO.column;
}
};
FrameMirror.prototype.sourceLineText=function(){
var aO=this.sourceLocation();
if(aO){
return aO.sourceText();
}
};
FrameMirror.prototype.scopeCount=function(){
return this.details_.scopeCount();
};
FrameMirror.prototype.scope=function(W){
return new ScopeMirror(this,(void 0),W);
};
FrameMirror.prototype.allScopes=function(aP){
var aQ=%GetAllScopesDetails(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
!!aP);
var ad=[];
for(var X=0;X<aQ.length;++X){
ad.push(new ScopeMirror(this,(void 0),X,aQ[X]));
}
return ad;
};
FrameMirror.prototype.stepInPositions=function(){
var ae=this.func().script();
var aR=this.func().sourcePosition_();
var aS=this.details_.stepInPositionsImpl();
var ad=[];
if(aS){
for(var X=0;X<aS.length;X++){
var aT={};
var aU=ae.locationFromPosition(aR+aS[X],
true);
serializeLocationFields(aU,aT);
var aV={
position:aT
};
ad.push(aV);
}
}
return ad;
};
FrameMirror.prototype.evaluate=function(source,disable_break,
opt_context_object){
return MakeMirror(%DebugEvaluate(this.break_id_,
this.details_.frameId(),
this.details_.inlinedFrameIndex(),
source,
(!!(disable_break)),
opt_context_object));
};
FrameMirror.prototype.invocationText=function(){
var ad='';
var aN=this.func();
var aW=this.receiver();
if(this.isConstructCall()){
ad+='new ';
ad+=aN.name()?aN.name():'[anonymous]';
}else if(this.isDebuggerFrame()){
ad+='[debugger]';
}else{
var aX=
!aW.className||(aW.className()!='global');
if(aX){
ad+=aW.toText();
}
var ab=GetUndefinedMirror();
if(aW.isObject()){
for(var aY=aW;
!aY.isNull()&&ab.isUndefined();
aY=aY.protoObject()){
ab=aY.lookupProperty(aN);
}
}
if(!ab.isUndefined()){
if(!ab.isIndexed()){
if(aX){
ad+='.';
}
ad+=ab.name();
}else{
ad+='[';
ad+=ab.name();
ad+=']';
}
if(aN.name()&&aN.name()!=ab.name()){
ad+='(aka '+aN.name()+')';
}
}else{
if(aX){
ad+='.';
}
ad+=aN.name()?aN.name():'[anonymous]';
}
}
if(!this.isDebuggerFrame()){
ad+='(';
for(var X=0;X<this.argumentCount();X++){
if(X!=0)ad+=', ';
if(this.argumentName(X)){
ad+=this.argumentName(X);
ad+='=';
}
ad+=this.argumentValue(X).toText();
}
ad+=')';
}
if(this.isAtReturn()){
ad+=' returning ';
ad+=this.returnValue().toText();
}
return ad;
};
FrameMirror.prototype.sourceAndPositionText=function(){
var ad='';
var aN=this.func();
if(aN.resolved()){
var ae=aN.script();
if(ae){
if(ae.name()){
ad+=ae.name();
}else{
ad+='[unnamed]';
}
if(!this.isDebuggerFrame()){
var aO=this.sourceLocation();
ad+=' line ';
ad+=!(aO===(void 0))?(aO.line+1):'?';
ad+=' column ';
ad+=!(aO===(void 0))?(aO.column+1):'?';
if(!(this.sourcePosition()===(void 0))){
ad+=' (position '+(this.sourcePosition()+1)+')';
}
}
}else{
ad+='[no source]';
}
}else{
ad+='[unresolved]';
}
return ad;
};
FrameMirror.prototype.localsText=function(){
var ad='';
var aZ=this.localCount();
if(aZ>0){
for(var X=0;X<aZ;++X){
ad+='      var ';
ad+=this.localName(X);
ad+=' = ';
ad+=this.localValue(X).toText();
if(X<aZ-1)ad+='\n';
}
}
return ad;
};
FrameMirror.prototype.restart=function(){
var ad=%LiveEditRestartFrame(this.break_id_,this.index_);
if((ad===(void 0))){
ad="Failed to find requested frame";
}
return ad;
};
FrameMirror.prototype.toText=function(ba){
var ad='';
ad+='#'+(this.index()<=9?'0':'')+this.index();
ad+=' ';
ad+=this.invocationText();
ad+=' ';
ad+=this.sourceAndPositionText();
if(ba){
ad+='\n';
ad+=this.localsText();
}
return ad;
};
var bb=0;
var bc=1;
var bd=2;
function ScopeDetails(be,bf,W,bg){
if(be){
this.break_id_=be.break_id_;
this.details_=bg||
%GetScopeDetails(be.break_id_,
be.details_.frameId(),
be.details_.inlinedFrameIndex(),
W);
this.frame_id_=be.details_.frameId();
this.inlined_frame_id_=be.details_.inlinedFrameIndex();
}else{
this.details_=bg||%GetFunctionScopeDetails(bf.value(),W);
this.fun_value_=bf.value();
this.break_id_=(void 0);
}
this.index_=W;
}
ScopeDetails.prototype.type=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[bb];
};
ScopeDetails.prototype.object=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[bc];
};
ScopeDetails.prototype.name=function(){
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
}
return this.details_[bd];
};
ScopeDetails.prototype.setVariableValueImpl=function(Z,bh){
var bi;
if(!(this.break_id_===(void 0))){
%CheckExecutionState(this.break_id_);
bi=%SetScopeVariableValue(this.break_id_,this.frame_id_,
this.inlined_frame_id_,this.index_,Z,bh);
}else{
bi=%SetScopeVariableValue(this.fun_value_,null,null,this.index_,
Z,bh);
}
if(!bi)throw h(2,"Failed to set variable value");
};
function ScopeMirror(be,bf,W,bg){
%_CallFunction(this,r.SCOPE_TYPE,Mirror);
if(be){
this.frame_index_=be.index_;
}else{
this.frame_index_=(void 0);
}
this.scope_index_=W;
this.details_=new ScopeDetails(be,bf,W,bg);
}
inherits(ScopeMirror,Mirror);
ScopeMirror.prototype.details=function(){
return this.details_;
};
ScopeMirror.prototype.frameIndex=function(){
return this.frame_index_;
};
ScopeMirror.prototype.scopeIndex=function(){
return this.scope_index_;
};
ScopeMirror.prototype.scopeType=function(){
return this.details_.type();
};
ScopeMirror.prototype.scopeObject=function(){
var K=this.scopeType()==I.Local||
this.scopeType()==I.Closure||
this.scopeType()==I.Script;
return MakeMirror(this.details_.object(),K);
};
ScopeMirror.prototype.setVariableValue=function(Z,bh){
this.details_.setVariableValueImpl(Z,bh);
};
function ScriptMirror(ae){
%_CallFunction(this,r.SCRIPT_TYPE,Mirror);
this.script_=ae;
this.context_=new ContextMirror(ae.context_data);
this.allocateHandle_();
}
inherits(ScriptMirror,Mirror);
ScriptMirror.prototype.value=function(){
return this.script_;
};
ScriptMirror.prototype.name=function(){
return this.script_.name||this.script_.nameOrSourceURL();
};
ScriptMirror.prototype.id=function(){
return this.script_.id;
};
ScriptMirror.prototype.source=function(){
return this.script_.source;
};
ScriptMirror.prototype.setSource=function(bj){
%DebugSetScriptSource(this.script_,bj);
};
ScriptMirror.prototype.lineOffset=function(){
return this.script_.line_offset;
};
ScriptMirror.prototype.columnOffset=function(){
return this.script_.column_offset;
};
ScriptMirror.prototype.data=function(){
return this.script_.data;
};
ScriptMirror.prototype.scriptType=function(){
return this.script_.type;
};
ScriptMirror.prototype.compilationType=function(){
return this.script_.compilation_type;
};
ScriptMirror.prototype.lineCount=function(){
return this.script_.lineCount();
};
ScriptMirror.prototype.locationFromPosition=function(
position,include_resource_offset){
return this.script_.locationFromPosition(position,include_resource_offset);
};
ScriptMirror.prototype.sourceSlice=function(bk,bl){
return this.script_.sourceSlice(bk,bl);
};
ScriptMirror.prototype.context=function(){
return this.context_;
};
ScriptMirror.prototype.evalFromScript=function(){
return MakeMirror(this.script_.eval_from_script);
};
ScriptMirror.prototype.evalFromFunctionName=function(){
return MakeMirror(this.script_.eval_from_function_name);
};
ScriptMirror.prototype.evalFromLocation=function(){
var bm=this.evalFromScript();
if(!bm.isUndefined()){
var bn=this.script_.eval_from_script_position;
return bm.locationFromPosition(bn,true);
}
};
ScriptMirror.prototype.toText=function(){
var ad='';
ad+=this.name();
ad+=' (lines: ';
if(this.lineOffset()>0){
ad+=this.lineOffset();
ad+='-';
ad+=this.lineOffset()+this.lineCount()-1;
}else{
ad+=this.lineCount();
}
ad+=')';
return ad;
};
function ContextMirror(bo){
%_CallFunction(this,r.CONTEXT_TYPE,Mirror);
this.data_=bo;
this.allocateHandle_();
}
inherits(ContextMirror,Mirror);
ContextMirror.prototype.data=function(){
return this.data_;
};
function MakeMirrorSerializer(aa,bp){
return new JSONProtocolSerializer(aa,bp);
}
function JSONProtocolSerializer(aa,bp){
this.details_=aa;
this.options_=bp;
this.mirrors_=[];
}
JSONProtocolSerializer.prototype.serializeReference=function(y){
return this.serialize_(y,true,true);
};
JSONProtocolSerializer.prototype.serializeValue=function(y){
var bq=this.serialize_(y,false,true);
return bq;
};
JSONProtocolSerializer.prototype.serializeReferencedObjects=function(){
var br=[];
var bs=this.mirrors_.length;
for(var X=0;X<bs;X++){
br.push(this.serialize_(this.mirrors_[X],false,false));
}
return br;
};
JSONProtocolSerializer.prototype.includeSource_=function(){
return this.options_&&this.options_.includeSource;
};
JSONProtocolSerializer.prototype.inlineRefs_=function(){
return this.options_&&this.options_.inlineRefs;
};
JSONProtocolSerializer.prototype.maxStringLength_=function(){
if((this.options_===(void 0))||
(this.options_.maxStringLength===(void 0))){
return E;
}
return this.options_.maxStringLength;
};
JSONProtocolSerializer.prototype.add_=function(y){
for(var X=0;X<this.mirrors_.length;X++){
if(this.mirrors_[X]===y){
return;
}
}
this.mirrors_.push(y);
};
JSONProtocolSerializer.prototype.serializeReferenceWithDisplayData_=
function(y){
var bt={};
bt.ref=y.handle();
bt.type=y.type();
switch(y.type()){
case r.UNDEFINED_TYPE:
case r.NULL_TYPE:
case r.BOOLEAN_TYPE:
case r.NUMBER_TYPE:
bt.value=y.value();
break;
case r.STRING_TYPE:
bt.value=y.getTruncatedValue(this.maxStringLength_());
break;
case r.SYMBOL_TYPE:
bt.description=y.description();
break;
case r.FUNCTION_TYPE:
bt.name=y.name();
bt.inferredName=y.inferredName();
if(y.script()){
bt.scriptId=y.script().id();
}
break;
case r.ERROR_TYPE:
case r.REGEXP_TYPE:
bt.value=y.toText();
break;
case r.OBJECT_TYPE:
bt.className=y.className();
break;
}
return bt;
};
JSONProtocolSerializer.prototype.serialize_=function(y,reference,
aa){
if(reference&&
(y.isValue()||y.isScript()||y.isContext())){
if(this.inlineRefs_()&&y.isValue()){
return this.serializeReferenceWithDisplayData_(y);
}else{
this.add_(y);
return{'ref':y.handle()};
}
}
var br={};
if(y.isValue()||y.isScript()||y.isContext()){
br.handle=y.handle();
}
br.type=y.type();
switch(y.type()){
case r.UNDEFINED_TYPE:
case r.NULL_TYPE:
break;
case r.BOOLEAN_TYPE:
br.value=y.value();
break;
case r.NUMBER_TYPE:
br.value=NumberToJSON_(y.value());
break;
case r.STRING_TYPE:
if(this.maxStringLength_()!=-1&&
y.length()>this.maxStringLength_()){
var bu=y.getTruncatedValue(this.maxStringLength_());
br.value=bu;
br.fromIndex=0;
br.toIndex=this.maxStringLength_();
}else{
br.value=y.value();
}
br.length=y.length();
break;
case r.SYMBOL_TYPE:
br.description=y.description();
break;
case r.OBJECT_TYPE:
case r.FUNCTION_TYPE:
case r.ERROR_TYPE:
case r.REGEXP_TYPE:
case r.PROMISE_TYPE:
case r.GENERATOR_TYPE:
this.serializeObject_(y,br,aa);
break;
case r.PROPERTY_TYPE:
case r.INTERNAL_PROPERTY_TYPE:
throw h(2,
'PropertyMirror cannot be serialized independently');
break;
case r.FRAME_TYPE:
this.serializeFrame_(y,br);
break;
case r.SCOPE_TYPE:
this.serializeScope_(y,br);
break;
case r.SCRIPT_TYPE:
if(y.name()){
br.name=y.name();
}
br.id=y.id();
br.lineOffset=y.lineOffset();
br.columnOffset=y.columnOffset();
br.lineCount=y.lineCount();
if(y.data()){
br.data=y.data();
}
if(this.includeSource_()){
br.source=y.source();
}else{
var bv=y.source().substring(0,80);
br.sourceStart=bv;
}
br.sourceLength=y.source().length;
br.scriptType=y.scriptType();
br.compilationType=y.compilationType();
if(y.compilationType()==1&&
y.evalFromScript()){
br.evalFromScript=
this.serializeReference(y.evalFromScript());
var bw=y.evalFromLocation();
if(bw){
br.evalFromLocation={line:bw.line,
column:bw.column};
}
if(y.evalFromFunctionName()){
br.evalFromFunctionName=y.evalFromFunctionName();
}
}
if(y.context()){
br.context=this.serializeReference(y.context());
}
break;
case r.CONTEXT_TYPE:
br.data=y.data();
break;
}
br.text=y.toText();
return br;
};
JSONProtocolSerializer.prototype.serializeObject_=function(y,br,
aa){
br.className=y.className();
br.constructorFunction=
this.serializeReference(y.constructorFunction());
br.protoObject=this.serializeReference(y.protoObject());
br.prototypeObject=this.serializeReference(y.prototypeObject());
if(y.hasNamedInterceptor()){
br.namedInterceptor=true;
}
if(y.hasIndexedInterceptor()){
br.indexedInterceptor=true;
}
if(y.isFunction()){
br.name=y.name();
if(!(y.inferredName()===(void 0))){
br.inferredName=y.inferredName();
}
br.resolved=y.resolved();
if(y.resolved()){
br.source=y.source();
}
if(y.script()){
br.script=this.serializeReference(y.script());
br.scriptId=y.script().id();
serializeLocationFields(y.sourceLocation(),br);
}
br.scopes=[];
for(var X=0;X<y.scopeCount();X++){
var bx=y.scope(X);
br.scopes.push({
type:bx.scopeType(),
index:X
});
}
}
if(y.isGenerator()){
br.status=y.status();
br.func=this.serializeReference(y.func())
br.receiver=this.serializeReference(y.receiver())
serializeLocationFields(y.sourceLocation(),br);
}
if(y.isDate()){
br.value=y.value();
}
if(y.isPromise()){
br.status=y.status();
br.promiseValue=this.serializeReference(y.promiseValue());
}
var Q=y.propertyNames(F.Named);
var by=y.propertyNames(F.Indexed);
var bz=new e(Q.length+by.length);
for(var X=0;X<Q.length;X++){
var bA=y.property(Q[X]);
bz[X]=this.serializeProperty_(bA);
if(aa){
this.add_(bA.value());
}
}
for(var X=0;X<by.length;X++){
var bA=y.property(by[X]);
bz[Q.length+X]=this.serializeProperty_(bA);
if(aa){
this.add_(bA.value());
}
}
br.properties=bz;
var bB=y.internalProperties();
if(bB.length>0){
var bC=[];
for(var X=0;X<bB.length;X++){
bC.push(this.serializeInternalProperty_(bB[X]));
}
br.internalProperties=bC;
}
};
function serializeLocationFields(aO,br){
if(!aO){
return;
}
br.position=aO.position;
var bD=aO.line;
if(!(bD===(void 0))){
br.line=bD;
}
var bE=aO.column;
if(!(bE===(void 0))){
br.column=bE;
}
}
JSONProtocolSerializer.prototype.serializeProperty_=function(bA){
var ad={};
ad.name=bA.name();
var bF=bA.value();
if(this.inlineRefs_()&&bF.isValue()){
ad.value=this.serializeReferenceWithDisplayData_(bF);
}else{
if(bA.attributes()!=H.None){
ad.attributes=bA.attributes();
}
ad.propertyType=bA.propertyType();
ad.ref=bF.handle();
}
return ad;
};
JSONProtocolSerializer.prototype.serializeInternalProperty_=
function(bA){
var ad={};
ad.name=bA.name();
var bF=bA.value();
if(this.inlineRefs_()&&bF.isValue()){
ad.value=this.serializeReferenceWithDisplayData_(bF);
}else{
ad.ref=bF.handle();
}
return ad;
};
JSONProtocolSerializer.prototype.serializeFrame_=function(y,br){
br.index=y.index();
br.receiver=this.serializeReference(y.receiver());
var aN=y.func();
br.func=this.serializeReference(aN);
var ae=aN.script();
if(ae){
br.script=this.serializeReference(ae);
}
br.constructCall=y.isConstructCall();
br.atReturn=y.isAtReturn();
if(y.isAtReturn()){
br.returnValue=this.serializeReference(y.returnValue());
}
br.debuggerFrame=y.isDebuggerFrame();
var M=new e(y.argumentCount());
for(var X=0;X<y.argumentCount();X++){
var bG={};
var bH=y.argumentName(X);
if(bH){
bG.name=bH;
}
bG.value=this.serializeReference(y.argumentValue(X));
M[X]=bG;
}
br.arguments=M;
var M=new e(y.localCount());
for(var X=0;X<y.localCount();X++){
var bI={};
bI.name=y.localName(X);
bI.value=this.serializeReference(y.localValue(X));
M[X]=bI;
}
br.locals=M;
serializeLocationFields(y.sourceLocation(),br);
var bJ=y.sourceLineText();
if(!(bJ===(void 0))){
br.sourceLineText=bJ;
}
br.scopes=[];
for(var X=0;X<y.scopeCount();X++){
var bx=y.scope(X);
br.scopes.push({
type:bx.scopeType(),
index:X
});
}
};
JSONProtocolSerializer.prototype.serializeScope_=function(y,br){
br.index=y.scopeIndex();
br.frameIndex=y.frameIndex();
br.type=y.scopeType();
br.object=this.inlineRefs_()?
this.serializeValue(y.scopeObject()):
this.serializeReference(y.scopeObject());
};
function NumberToJSON_(w){
if(f(w)){
return'NaN';
}
if(!(%_IsSmi(%IS_VAR(w))||((w==w)&&(w!=1/0)&&(w!=-1/0)))){
if(w>0){
return'Infinity';
}else{
return'-Infinity';
}
}
return w;
}
b.InstallFunctions(a,2,[
"MakeMirror",MakeMirror,
"MakeMirrorSerializer",MakeMirrorSerializer,
"LookupMirror",LookupMirror,
"ToggleMirrorCache",ToggleMirrorCache,
"MirrorCacheIsEmpty",MirrorCacheIsEmpty,
]);
b.InstallConstants(a,[
"ScopeType",I,
"PropertyKind",F,
"PropertyType",G,
"PropertyAttribute",H,
"Mirror",Mirror,
"ValueMirror",ValueMirror,
"UndefinedMirror",UndefinedMirror,
"NullMirror",NullMirror,
"BooleanMirror",BooleanMirror,
"NumberMirror",NumberMirror,
"StringMirror",StringMirror,
"SymbolMirror",SymbolMirror,
"ObjectMirror",ObjectMirror,
"FunctionMirror",FunctionMirror,
"UnresolvedFunctionMirror",UnresolvedFunctionMirror,
"ArrayMirror",ArrayMirror,
"DateMirror",DateMirror,
"RegExpMirror",RegExpMirror,
"ErrorMirror",ErrorMirror,
"PromiseMirror",PromiseMirror,
"MapMirror",MapMirror,
"SetMirror",SetMirror,
"IteratorMirror",IteratorMirror,
"GeneratorMirror",GeneratorMirror,
"PropertyMirror",PropertyMirror,
"InternalPropertyMirror",InternalPropertyMirror,
"FrameMirror",FrameMirror,
"ScriptMirror",ScriptMirror,
"ScopeMirror",ScopeMirror,
"FrameDetails",FrameDetails,
]);
b.InstallFunctions(b,2,[
"ClearMirrorCache",ClearMirrorCache
]);
b.Export(function(bK){
bK.MirrorType=r;
});
})

debugN‡
(function(a,b){
"use strict";
var c=a.FrameMirror;
var d=a.Array;
var e=a.RegExp;
var f=a.isNaN;
var g=a.JSON.parse;
var h=a.JSON.stringify;
var i=a.LookupMirror;
var j;
var k;
var l=a.MakeMirror;
var m=a.MakeMirrorSerializer;
var n=a.Math.min;
var o=a.Mirror;
var p;
var q=a.parseInt;
var r=a.ValueMirror;
b.Import(function(s){
j=s.MakeError;
k=s.MakeTypeError;
p=s.MirrorType;
});
var t=10;
var u={};
var v=/^(?:\s*(?:\/\*.*?\*\/)*)*/;
u.DebugEvent={Break:1,
Exception:2,
NewFunction:3,
BeforeCompile:4,
AfterCompile:5,
CompileError:6,
PromiseEvent:7,
AsyncTaskEvent:8};
u.ExceptionBreak={Caught:0,
Uncaught:1};
u.StepAction={StepOut:0,
StepNext:1,
StepIn:2,
StepMin:3,
StepInMin:4,
StepFrame:5};
u.ScriptType={Native:0,
Extension:1,
Normal:2};
u.ScriptCompilationType={Host:0,
Eval:1,
JSON:2};
u.ScriptBreakPointType={ScriptId:0,
ScriptName:1,
ScriptRegExp:2};
u.BreakPositionAlignment={
Statement:0,
BreakPosition:1
};
function ScriptTypeFlag(w){
return(1<<w);
}
var x=0;
var y=1;
var z=[];
var A=[];
var B={
breakPointsActive:{
value:true,
getValue:function(){return this.value;},
setValue:function(C){
this.value=!!C;
%SetBreakPointsActive(this.value);
}
},
breakOnCaughtException:{
getValue:function(){return u.isBreakOnException();},
setValue:function(C){
if(C){
u.setBreakOnException();
}else{
u.clearBreakOnException();
}
}
},
breakOnUncaughtException:{
getValue:function(){return u.isBreakOnUncaughtException();},
setValue:function(C){
if(C){
u.setBreakOnUncaughtException();
}else{
u.clearBreakOnUncaughtException();
}
}
},
};
function MakeBreakPoint(D,E){
var F=new BreakPoint(D,E);
z.push(F);
return F;
}
function BreakPoint(D,E){
this.source_position_=D;
if(E){
this.script_break_point_=E;
}else{
this.number_=y++;
}
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
}
BreakPoint.prototype.number=function(){
return this.number_;
};
BreakPoint.prototype.func=function(){
return this.func_;
};
BreakPoint.prototype.source_position=function(){
return this.source_position_;
};
BreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
BreakPoint.prototype.active=function(){
if(this.script_break_point()){
return this.script_break_point().active();
}
return this.active_;
};
BreakPoint.prototype.condition=function(){
if(this.script_break_point()&&this.script_break_point().condition()){
return this.script_break_point().condition();
}
return this.condition_;
};
BreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
BreakPoint.prototype.script_break_point=function(){
return this.script_break_point_;
};
BreakPoint.prototype.enable=function(){
this.active_=true;
};
BreakPoint.prototype.disable=function(){
this.active_=false;
};
BreakPoint.prototype.setCondition=function(G){
this.condition_=G;
};
BreakPoint.prototype.setIgnoreCount=function(H){
this.ignoreCount_=H;
};
BreakPoint.prototype.isTriggered=function(I){
if(!this.active())return false;
if(this.condition()){
try{
var J=I.frame(0).evaluate(this.condition());
if(!(J instanceof r)||!J.value_){
return false;
}
}catch(e){
return false;
}
}
this.hit_count_++;
if(this.script_break_point_){
this.script_break_point_.hit_count_++;
}
if(this.ignoreCount_>0){
this.ignoreCount_--;
return false;
}
return true;
};
function IsBreakPointTriggered(K,F){
return F.isTriggered(MakeExecutionState(K));
}
function ScriptBreakPoint(w,script_id_or_name,opt_line,opt_column,
opt_groupId,opt_position_alignment){
this.type_=w;
if(w==u.ScriptBreakPointType.ScriptId){
this.script_id_=script_id_or_name;
}else if(w==u.ScriptBreakPointType.ScriptName){
this.script_name_=script_id_or_name;
}else if(w==u.ScriptBreakPointType.ScriptRegExp){
this.script_regexp_object_=new e(script_id_or_name);
}else{
throw j(2,"Unexpected breakpoint type "+w);
}
this.line_=opt_line||0;
this.column_=opt_column;
this.groupId_=opt_groupId;
this.position_alignment_=(opt_position_alignment===(void 0))
?u.BreakPositionAlignment.Statement:opt_position_alignment;
this.hit_count_=0;
this.active_=true;
this.condition_=null;
this.ignoreCount_=0;
this.break_points_=[];
}
ScriptBreakPoint.prototype.cloneForOtherScript=function(L){
var M=new ScriptBreakPoint(u.ScriptBreakPointType.ScriptId,
L.id,this.line_,this.column_,this.groupId_,
this.position_alignment_);
M.number_=y++;
A.push(M);
M.hit_count_=this.hit_count_;
M.active_=this.active_;
M.condition_=this.condition_;
M.ignoreCount_=this.ignoreCount_;
return M;
};
ScriptBreakPoint.prototype.number=function(){
return this.number_;
};
ScriptBreakPoint.prototype.groupId=function(){
return this.groupId_;
};
ScriptBreakPoint.prototype.type=function(){
return this.type_;
};
ScriptBreakPoint.prototype.script_id=function(){
return this.script_id_;
};
ScriptBreakPoint.prototype.script_name=function(){
return this.script_name_;
};
ScriptBreakPoint.prototype.script_regexp_object=function(){
return this.script_regexp_object_;
};
ScriptBreakPoint.prototype.line=function(){
return this.line_;
};
ScriptBreakPoint.prototype.column=function(){
return this.column_;
};
ScriptBreakPoint.prototype.actual_locations=function(){
var N=[];
for(var O=0;O<this.break_points_.length;O++){
N.push(this.break_points_[O].actual_location);
}
return N;
};
ScriptBreakPoint.prototype.update_positions=function(P,Q){
this.line_=P;
this.column_=Q;
};
ScriptBreakPoint.prototype.hit_count=function(){
return this.hit_count_;
};
ScriptBreakPoint.prototype.active=function(){
return this.active_;
};
ScriptBreakPoint.prototype.condition=function(){
return this.condition_;
};
ScriptBreakPoint.prototype.ignoreCount=function(){
return this.ignoreCount_;
};
ScriptBreakPoint.prototype.enable=function(){
this.active_=true;
};
ScriptBreakPoint.prototype.disable=function(){
this.active_=false;
};
ScriptBreakPoint.prototype.setCondition=function(G){
this.condition_=G;
};
ScriptBreakPoint.prototype.setIgnoreCount=function(H){
this.ignoreCount_=H;
for(var O=0;O<this.break_points_.length;O++){
this.break_points_[O].setIgnoreCount(H);
}
};
ScriptBreakPoint.prototype.matchesScript=function(R){
if(this.type_==u.ScriptBreakPointType.ScriptId){
return this.script_id_==R.id;
}else{
if(!(R.line_offset<=this.line_&&
this.line_<R.line_offset+R.lineCount())){
return false;
}
if(this.type_==u.ScriptBreakPointType.ScriptName){
return this.script_name_==R.nameOrSourceURL();
}else if(this.type_==u.ScriptBreakPointType.ScriptRegExp){
return this.script_regexp_object_.test(R.nameOrSourceURL());
}else{
throw j(2,"Unexpected breakpoint type "+this.type_);
}
}
};
ScriptBreakPoint.prototype.set=function(R){
var Q=this.column();
var P=this.line();
if((Q===(void 0))){
var S=R.sourceLine(this.line());
if(!R.sourceColumnStart_){
R.sourceColumnStart_=new d(R.lineCount());
}
if((R.sourceColumnStart_[P]===(void 0))){
R.sourceColumnStart_[P]=
S.match(v)[0].length;
}
Q=R.sourceColumnStart_[P];
}
var T=u.findScriptSourcePosition(R,this.line(),Q);
if((T===null))return;
var F=MakeBreakPoint(T,this);
F.setIgnoreCount(this.ignoreCount());
var U=%SetScriptBreakPoint(R,T,
this.position_alignment_,
F);
if((U===(void 0))){
U=T;
}
var V=R.locationFromPosition(U,true);
F.actual_location={line:V.line,
column:V.column,
script_id:R.id};
this.break_points_.push(F);
return F;
};
ScriptBreakPoint.prototype.clear=function(){
var W=[];
for(var O=0;O<z.length;O++){
if(z[O].script_break_point()&&
z[O].script_break_point()===this){
%ClearBreakPoint(z[O]);
}else{
W.push(z[O]);
}
}
z=W;
this.break_points_=[];
};
function UpdateScriptBreakPoints(R){
for(var O=0;O<A.length;O++){
var F=A[O];
if((F.type()==u.ScriptBreakPointType.ScriptName||
F.type()==u.ScriptBreakPointType.ScriptRegExp)&&
F.matchesScript(R)){
F.set(R);
}
}
}
function GetScriptBreakPoints(R){
var X=[];
for(var O=0;O<A.length;O++){
if(A[O].matchesScript(R)){
X.push(A[O]);
}
}
return X;
}
u.setListener=function(Y,Z){
if(!(%_IsFunction(Y))&&!(Y===(void 0))&&!(Y===null)){
throw k(27);
}
%SetDebugEventListener(Y,Z);
};
u.breakLocations=function(aa,ab){
if(!(%_IsFunction(aa)))throw k(27);
var ac=(ab===(void 0))
?u.BreakPositionAlignment.Statement:ab;
return %GetBreakLocations(aa,ac);
};
u.findScript=function(ad){
if((%_IsFunction(ad))){
return %FunctionGetScript(ad);
}else if((%_IsRegExp(ad))){
var ae=u.scripts();
var af=null;
var ag=0;
for(var O in ae){
var R=ae[O];
if(ad.test(R.name)){
af=R;
ag++;
}
}
if(ag==1){
return af;
}else{
return(void 0);
}
}else{
return %GetScript(ad);
}
};
u.scriptSource=function(ad){
return this.findScript(ad).source;
};
u.source=function(aa){
if(!(%_IsFunction(aa)))throw k(27);
return %FunctionGetSourceCode(aa);
};
u.sourcePosition=function(aa){
if(!(%_IsFunction(aa)))throw k(27);
return %FunctionGetScriptSourcePosition(aa);
};
u.findFunctionSourceLocation=function(ah,ai,aj){
var R=%FunctionGetScript(ah);
var ak=%FunctionGetScriptSourcePosition(ah);
return R.locationFromLine(ai,aj,ak);
};
u.findScriptSourcePosition=function(R,ai,aj){
var al=R.locationFromLine(ai,aj);
return al?al.position:null;
};
u.findBreakPoint=function(am,an){
var F;
for(var O=0;O<z.length;O++){
if(z[O].number()==am){
F=z[O];
if(an){
z.splice(O,1);
}
break;
}
}
if(F){
return F;
}else{
return this.findScriptBreakPoint(am,an);
}
};
u.findBreakPointActualLocations=function(am){
for(var O=0;O<A.length;O++){
if(A[O].number()==am){
return A[O].actual_locations();
}
}
for(var O=0;O<z.length;O++){
if(z[O].number()==am){
return[z[O].actual_location];
}
}
return[];
};
u.setBreakPoint=function(ah,ai,aj,ao){
if(!(%_IsFunction(ah)))throw k(27);
if(%FunctionIsAPIFunction(ah)){
throw j(2,'Cannot set break point in native code.');
}
var ap=
this.findFunctionSourceLocation(ah,ai,aj).position;
var D=ap-this.sourcePosition(ah);
var R=%FunctionGetScript(ah);
if(R.type==u.ScriptType.Native){
throw j(2,'Cannot set break point in native code.');
}
if(R&&R.id){
D+=%FunctionGetScriptSourcePosition(ah);
var al=R.locationFromPosition(D,false);
return this.setScriptBreakPointById(R.id,
al.line,al.column,
ao);
}else{
var F=MakeBreakPoint(D);
var U=
%SetFunctionBreakPoint(ah,D,F);
U+=this.sourcePosition(ah);
var V=R.locationFromPosition(U,true);
F.actual_location={line:V.line,
column:V.column,
script_id:R.id};
F.setCondition(ao);
return F.number();
}
};
u.setBreakPointByScriptIdAndPosition=function(script_id,T,
G,enabled,
opt_position_alignment)
{
var F=MakeBreakPoint(T);
F.setCondition(G);
if(!enabled){
F.disable();
}
var ae=this.scripts();
var aq=(opt_position_alignment===(void 0))
?u.BreakPositionAlignment.Statement:opt_position_alignment;
for(var O=0;O<ae.length;O++){
if(script_id==ae[O].id){
F.actual_position=%SetScriptBreakPoint(ae[O],T,
aq,F);
break;
}
}
return F;
};
u.enableBreakPoint=function(am){
var F=this.findBreakPoint(am,false);
if(F){
F.enable();
}
};
u.disableBreakPoint=function(am){
var F=this.findBreakPoint(am,false);
if(F){
F.disable();
}
};
u.changeBreakPointCondition=function(am,G){
var F=this.findBreakPoint(am,false);
F.setCondition(G);
};
u.changeBreakPointIgnoreCount=function(am,H){
if(H<0)throw j(2,'Invalid argument');
var F=this.findBreakPoint(am,false);
F.setIgnoreCount(H);
};
u.clearBreakPoint=function(am){
var F=this.findBreakPoint(am,true);
if(F){
return %ClearBreakPoint(F);
}else{
F=this.findScriptBreakPoint(am,true);
if(!F)throw j(2,'Invalid breakpoint');
}
};
u.clearAllBreakPoints=function(){
for(var O=0;O<z.length;O++){
var F=z[O];
%ClearBreakPoint(F);
}
z=[];
};
u.disableAllBreakPoints=function(){
for(var O=1;O<y;O++){
u.disableBreakPoint(O);
}
%ChangeBreakOnException(u.ExceptionBreak.Caught,false);
%ChangeBreakOnException(u.ExceptionBreak.Uncaught,false);
};
u.findScriptBreakPoint=function(am,an){
var ar;
for(var O=0;O<A.length;O++){
if(A[O].number()==am){
ar=A[O];
if(an){
ar.clear();
A.splice(O,1);
}
break;
}
}
return ar;
};
u.setScriptBreakPoint=function(w,script_id_or_name,
ai,aj,ao,
opt_groupId,opt_position_alignment){
var ar=
new ScriptBreakPoint(w,script_id_or_name,ai,aj,
opt_groupId,opt_position_alignment);
ar.number_=y++;
ar.setCondition(ao);
A.push(ar);
var ae=this.scripts();
for(var O=0;O<ae.length;O++){
if(ar.matchesScript(ae[O])){
ar.set(ae[O]);
}
}
return ar.number();
};
u.setScriptBreakPointById=function(script_id,
ai,aj,
ao,opt_groupId,
opt_position_alignment){
return this.setScriptBreakPoint(u.ScriptBreakPointType.ScriptId,
script_id,ai,aj,
ao,opt_groupId,
opt_position_alignment);
};
u.setScriptBreakPointByName=function(script_name,
ai,aj,
ao,opt_groupId){
return this.setScriptBreakPoint(u.ScriptBreakPointType.ScriptName,
script_name,ai,aj,
ao,opt_groupId);
};
u.setScriptBreakPointByRegExp=function(script_regexp,
ai,aj,
ao,opt_groupId){
return this.setScriptBreakPoint(u.ScriptBreakPointType.ScriptRegExp,
script_regexp,ai,aj,
ao,opt_groupId);
};
u.enableScriptBreakPoint=function(am){
var ar=this.findScriptBreakPoint(am,false);
ar.enable();
};
u.disableScriptBreakPoint=function(am){
var ar=this.findScriptBreakPoint(am,false);
ar.disable();
};
u.changeScriptBreakPointCondition=function(
am,G){
var ar=this.findScriptBreakPoint(am,false);
ar.setCondition(G);
};
u.changeScriptBreakPointIgnoreCount=function(
am,H){
if(H<0)throw j(2,'Invalid argument');
var ar=this.findScriptBreakPoint(am,false);
ar.setIgnoreCount(H);
};
u.scriptBreakPoints=function(){
return A;
};
u.clearStepping=function(){
%ClearStepping();
};
u.setBreakOnException=function(){
return %ChangeBreakOnException(u.ExceptionBreak.Caught,true);
};
u.clearBreakOnException=function(){
return %ChangeBreakOnException(u.ExceptionBreak.Caught,false);
};
u.isBreakOnException=function(){
return!!%IsBreakOnException(u.ExceptionBreak.Caught);
};
u.setBreakOnUncaughtException=function(){
return %ChangeBreakOnException(u.ExceptionBreak.Uncaught,true);
};
u.clearBreakOnUncaughtException=function(){
return %ChangeBreakOnException(u.ExceptionBreak.Uncaught,false);
};
u.isBreakOnUncaughtException=function(){
return!!%IsBreakOnException(u.ExceptionBreak.Uncaught);
};
u.showBreakPoints=function(aa,as,at){
if(!(%_IsFunction(aa)))throw j(27);
var au=as?this.scriptSource(aa):this.source(aa);
var av=as?this.sourcePosition(aa):0;
var N=this.breakLocations(aa,at);
if(!N)return au;
N.sort(function(aw,ax){return aw-ax;});
var X="";
var ay=0;
var az;
for(var O=0;O<N.length;O++){
az=N[O]-av;
X+=au.slice(ay,az);
X+="[B"+O+"]";
ay=az;
}
az=au.length;
X+=au.substring(ay,az);
return X;
};
u.scripts=function(){
return %DebugGetLoadedScripts();
};
u.debuggerFlags=function(){
return B;
};
u.MakeMirror=l;
function MakeExecutionState(K){
return new ExecutionState(K);
}
function ExecutionState(K){
this.break_id=K;
this.selected_frame=0;
}
ExecutionState.prototype.prepareStep=function(opt_action,opt_count,
opt_callframe){
var aA=u.StepAction.StepIn;
if(!(opt_action===(void 0)))aA=(%_ToNumber(opt_action));
var aB=opt_count?(%_ToNumber(opt_count)):1;
var aC=0;
if(!(opt_callframe===(void 0))){
aC=opt_callframe.details_.frameId();
}
return %PrepareStep(this.break_id,aA,aB,aC);
};
ExecutionState.prototype.evaluateGlobal=function(au,disable_break,
opt_additional_context){
return l(%DebugEvaluateGlobal(this.break_id,au,
(!!(disable_break)),
opt_additional_context));
};
ExecutionState.prototype.frameCount=function(){
return %GetFrameCount(this.break_id);
};
ExecutionState.prototype.threadCount=function(){
return %GetThreadCount(this.break_id);
};
ExecutionState.prototype.frame=function(aD){
if(aD==null)aD=this.selected_frame;
if(aD<0||aD>=this.frameCount()){
throw k(26);
}
return new c(this.break_id,aD);
};
ExecutionState.prototype.setSelectedFrame=function(aE){
var O=(%_ToNumber(aE));
if(O<0||O>=this.frameCount()){
throw k(26);
}
this.selected_frame=O;
};
ExecutionState.prototype.selectedFrame=function(){
return this.selected_frame;
};
ExecutionState.prototype.debugCommandProcessor=function(aF){
return new DebugCommandProcessor(this,aF);
};
function MakeBreakEvent(K,aG){
return new BreakEvent(K,aG);
}
function BreakEvent(K,aG){
this.frame_=new c(K,0);
this.break_points_hit_=aG;
}
BreakEvent.prototype.eventType=function(){
return u.DebugEvent.Break;
};
BreakEvent.prototype.func=function(){
return this.frame_.func();
};
BreakEvent.prototype.sourceLine=function(){
return this.frame_.sourceLine();
};
BreakEvent.prototype.sourceColumn=function(){
return this.frame_.sourceColumn();
};
BreakEvent.prototype.sourceLineText=function(){
return this.frame_.sourceLineText();
};
BreakEvent.prototype.breakPointsHit=function(){
return this.break_points_hit_;
};
BreakEvent.prototype.toJSONProtocol=function(){
var aH={seq:x++,
type:"event",
event:"break",
body:{invocationText:this.frame_.invocationText()}
};
var R=this.func().script();
if(R){
aH.body.sourceLine=this.sourceLine(),
aH.body.sourceColumn=this.sourceColumn(),
aH.body.sourceLineText=this.sourceLineText(),
aH.body.script=MakeScriptObject_(R,false);
}
if(this.breakPointsHit()){
aH.body.breakpoints=[];
for(var O=0;O<this.breakPointsHit().length;O++){
var aI=this.breakPointsHit()[O];
var ar=aI.script_break_point();
var aJ;
if(ar){
aJ=ar.number();
}else{
aJ=aI.number();
}
aH.body.breakpoints.push(aJ);
}
}
return h(ObjectToProtocolObject_(aH));
};
function MakeExceptionEvent(K,aK,aL,aM){
return new ExceptionEvent(K,aK,aL,aM);
}
function ExceptionEvent(K,aK,aL,aM){
this.exec_state_=new ExecutionState(K);
this.exception_=aK;
this.uncaught_=aL;
this.promise_=aM;
}
ExceptionEvent.prototype.eventType=function(){
return u.DebugEvent.Exception;
};
ExceptionEvent.prototype.exception=function(){
return this.exception_;
};
ExceptionEvent.prototype.uncaught=function(){
return this.uncaught_;
};
ExceptionEvent.prototype.promise=function(){
return this.promise_;
};
ExceptionEvent.prototype.func=function(){
return this.exec_state_.frame(0).func();
};
ExceptionEvent.prototype.sourceLine=function(){
return this.exec_state_.frame(0).sourceLine();
};
ExceptionEvent.prototype.sourceColumn=function(){
return this.exec_state_.frame(0).sourceColumn();
};
ExceptionEvent.prototype.sourceLineText=function(){
return this.exec_state_.frame(0).sourceLineText();
};
ExceptionEvent.prototype.toJSONProtocol=function(){
var aH=new ProtocolMessage();
aH.event="exception";
aH.body={uncaught:this.uncaught_,
exception:l(this.exception_)
};
if(this.exec_state_.frameCount()>0){
aH.body.sourceLine=this.sourceLine();
aH.body.sourceColumn=this.sourceColumn();
aH.body.sourceLineText=this.sourceLineText();
var R=this.func().script();
if(R){
aH.body.script=MakeScriptObject_(R,false);
}
}else{
aH.body.sourceLine=-1;
}
return aH.toJSONProtocol();
};
function MakeCompileEvent(R,w){
return new CompileEvent(R,w);
}
function CompileEvent(R,w){
this.script_=l(R);
this.type_=w;
}
CompileEvent.prototype.eventType=function(){
return this.type_;
};
CompileEvent.prototype.script=function(){
return this.script_;
};
CompileEvent.prototype.toJSONProtocol=function(){
var aH=new ProtocolMessage();
aH.running=true;
switch(this.type_){
case u.DebugEvent.BeforeCompile:
aH.event="beforeCompile";
break;
case u.DebugEvent.AfterCompile:
aH.event="afterCompile";
break;
case u.DebugEvent.CompileError:
aH.event="compileError";
break;
}
aH.body={};
aH.body.script=this.script_;
return aH.toJSONProtocol();
};
function MakeScriptObject_(R,aN){
var aH={id:R.id(),
name:R.name(),
lineOffset:R.lineOffset(),
columnOffset:R.columnOffset(),
lineCount:R.lineCount(),
};
if(!(R.data()===(void 0))){
aH.data=R.data();
}
if(aN){
aH.source=R.source();
}
return aH;
}
function MakePromiseEvent(aO){
return new PromiseEvent(aO);
}
function PromiseEvent(aO){
this.promise_=aO.promise;
this.parentPromise_=aO.parentPromise;
this.status_=aO.status;
this.value_=aO.value;
}
PromiseEvent.prototype.promise=function(){
return l(this.promise_);
}
PromiseEvent.prototype.parentPromise=function(){
return l(this.parentPromise_);
}
PromiseEvent.prototype.status=function(){
return this.status_;
}
PromiseEvent.prototype.value=function(){
return l(this.value_);
}
function MakeAsyncTaskEvent(aO){
return new AsyncTaskEvent(aO);
}
function AsyncTaskEvent(aO){
this.type_=aO.type;
this.name_=aO.name;
this.id_=aO.id;
}
AsyncTaskEvent.prototype.type=function(){
return this.type_;
}
AsyncTaskEvent.prototype.name=function(){
return this.name_;
}
AsyncTaskEvent.prototype.id=function(){
return this.id_;
}
function DebugCommandProcessor(I,aF){
this.exec_state_=I;
this.running_=aF||false;
}
DebugCommandProcessor.prototype.processDebugRequest=function(aP){
return this.processDebugJSONRequest(aP);
};
function ProtocolMessage(aP){
this.seq=x++;
if(aP){
this.type='response';
this.request_seq=aP.seq;
this.command=aP.command;
}else{
this.type='event';
}
this.success=true;
this.running=(void 0);
}
ProtocolMessage.prototype.setOption=function(aQ,C){
if(!this.options_){
this.options_={};
}
this.options_[aQ]=C;
};
ProtocolMessage.prototype.failed=function(aR,aS){
this.success=false;
this.message=aR;
if((typeof(aS)==='object')){
this.error_details=aS;
}
};
ProtocolMessage.prototype.toJSONProtocol=function(){
var aT={};
aT.seq=this.seq;
if(this.request_seq){
aT.request_seq=this.request_seq;
}
aT.type=this.type;
if(this.event){
aT.event=this.event;
}
if(this.command){
aT.command=this.command;
}
if(this.success){
aT.success=this.success;
}else{
aT.success=false;
}
if(this.body){
var aU;
var aV=m(true,this.options_);
if(this.body instanceof o){
aU=aV.serializeValue(this.body);
}else if(this.body instanceof d){
aU=[];
for(var O=0;O<this.body.length;O++){
if(this.body[O]instanceof o){
aU.push(aV.serializeValue(this.body[O]));
}else{
aU.push(ObjectToProtocolObject_(this.body[O],aV));
}
}
}else{
aU=ObjectToProtocolObject_(this.body,aV);
}
aT.body=aU;
aT.refs=aV.serializeReferencedObjects();
}
if(this.message){
aT.message=this.message;
}
if(this.error_details){
aT.error_details=this.error_details;
}
aT.running=this.running;
return h(aT);
};
DebugCommandProcessor.prototype.createResponse=function(aP){
return new ProtocolMessage(aP);
};
DebugCommandProcessor.prototype.processDebugJSONRequest=function(
json_request){
var aP;
var aW;
try{
try{
aP=g(json_request);
aW=this.createResponse(aP);
if(!aP.type){
throw j(2,'Type not specified');
}
if(aP.type!='request'){
throw j(2,
"Illegal type '"+aP.type+"' in request");
}
if(!aP.command){
throw j(2,'Command not specified');
}
if(aP.arguments){
var aX=aP.arguments;
if(aX.inlineRefs||aX.compactFormat){
aW.setOption('inlineRefs',true);
}
if(!(aX.maxStringLength===(void 0))){
aW.setOption('maxStringLength',aX.maxStringLength);
}
}
var aY=aP.command.toLowerCase();
var aZ=DebugCommandProcessor.prototype.dispatch_[aY];
if((%_IsFunction(aZ))){
%_CallFunction(this,aP,aW,aZ);
}else{
throw j(2,
'Unknown command "'+aP.command+'" in request');
}
}catch(e){
if(!aW){
aW=this.createResponse();
}
aW.success=false;
aW.message=(%_ToString(e));
}
try{
if(!(aW.running===(void 0))){
this.running_=aW.running;
}
aW.running=this.running_;
return aW.toJSONProtocol();
}catch(e){
return'{"seq":'+aW.seq+','+
'"request_seq":'+aP.seq+','+
'"type":"response",'+
'"success":false,'+
'"message":"Internal error: '+(%_ToString(e))+'"}';
}
}catch(e){
return'{"seq":0,"type":"response","success":false,"message":"Internal error"}';
}
};
DebugCommandProcessor.prototype.continueRequest_=function(aP,aW){
if(aP.arguments){
var aB=1;
var aA=u.StepAction.StepIn;
var ba=aP.arguments.stepaction;
var bb=aP.arguments.stepcount;
if(bb){
aB=(%_ToNumber(bb));
if(aB<0){
throw j(2,
'Invalid stepcount argument "'+bb+'".');
}
}
if(ba){
if(ba=='in'){
aA=u.StepAction.StepIn;
}else if(ba=='min'){
aA=u.StepAction.StepMin;
}else if(ba=='next'){
aA=u.StepAction.StepNext;
}else if(ba=='out'){
aA=u.StepAction.StepOut;
}else{
throw j(2,
'Invalid stepaction argument "'+ba+'".');
}
}
this.exec_state_.prepareStep(aA,aB);
}
aW.running=true;
};
DebugCommandProcessor.prototype.breakRequest_=function(aP,aW){
};
DebugCommandProcessor.prototype.setBreakPointRequest_=
function(aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var w=aP.arguments.type;
var bc=aP.arguments.target;
var P=aP.arguments.line;
var Q=aP.arguments.column;
var bd=(aP.arguments.enabled===(void 0))?
true:aP.arguments.enabled;
var G=aP.arguments.condition;
var H=aP.arguments.ignoreCount;
var be=aP.arguments.groupId;
if(!w||(bc===(void 0))){
aW.failed('Missing argument "type" or "target"');
return;
}
var am;
if(w=='function'){
if(!(typeof(bc)==='string')){
aW.failed('Argument "target" is not a string value');
return;
}
var aa;
try{
aa=this.exec_state_.evaluateGlobal(bc).value();
}catch(e){
aW.failed('Error: "'+(%_ToString(e))+
'" evaluating "'+bc+'"');
return;
}
if(!(%_IsFunction(aa))){
aW.failed('"'+bc+'" does not evaluate to a function');
return;
}
am=u.setBreakPoint(aa,P,Q,G);
}else if(w=='handle'){
var bf=q(bc,10);
var J=i(bf);
if(!J){
return aW.failed('Object #'+bf+'# not found');
}
if(!J.isFunction()){
return aW.failed('Object #'+bf+'# is not a function');
}
am=u.setBreakPoint(J.value(),
P,Q,G);
}else if(w=='script'){
am=
u.setScriptBreakPointByName(bc,P,Q,G,
be);
}else if(w=='scriptId'){
am=
u.setScriptBreakPointById(bc,P,Q,G,be);
}else if(w=='scriptRegExp'){
am=
u.setScriptBreakPointByRegExp(bc,P,Q,G,
be);
}else{
aW.failed('Illegal type "'+w+'"');
return;
}
var F=u.findBreakPoint(am);
if(H){
u.changeBreakPointIgnoreCount(am,H);
}
if(!bd){
u.disableBreakPoint(am);
}
aW.body={type:w,
breakpoint:am};
if(F instanceof ScriptBreakPoint){
if(F.type()==u.ScriptBreakPointType.ScriptId){
aW.body.type='scriptId';
aW.body.script_id=F.script_id();
}else if(F.type()==u.ScriptBreakPointType.ScriptName){
aW.body.type='scriptName';
aW.body.script_name=F.script_name();
}else if(F.type()==u.ScriptBreakPointType.ScriptRegExp){
aW.body.type='scriptRegExp';
aW.body.script_regexp=F.script_regexp_object().source;
}else{
throw j(2,
"Unexpected breakpoint type: "+F.type());
}
aW.body.line=F.line();
aW.body.column=F.column();
aW.body.actual_locations=F.actual_locations();
}else{
aW.body.type='function';
aW.body.actual_locations=[F.actual_location];
}
};
DebugCommandProcessor.prototype.changeBreakPointRequest_=function(
aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var F=(%_ToNumber(aP.arguments.breakpoint));
var bd=aP.arguments.enabled;
var G=aP.arguments.condition;
var H=aP.arguments.ignoreCount;
if(!F){
aW.failed('Missing argument "breakpoint"');
return;
}
if(!(bd===(void 0))){
if(bd){
u.enableBreakPoint(F);
}else{
u.disableBreakPoint(F);
}
}
if(!(G===(void 0))){
u.changeBreakPointCondition(F,G);
}
if(!(H===(void 0))){
u.changeBreakPointIgnoreCount(F,H);
}
};
DebugCommandProcessor.prototype.clearBreakPointGroupRequest_=function(
aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var bg=aP.arguments.groupId;
if(!bg){
aW.failed('Missing argument "groupId"');
return;
}
var bh=[];
var bi=[];
for(var O=0;O<A.length;O++){
var bj=A[O];
if(bj.groupId()==bg){
bh.push(bj.number());
bj.clear();
}else{
bi.push(bj);
}
}
A=bi;
aW.body={breakpoints:bh};
};
DebugCommandProcessor.prototype.clearBreakPointRequest_=function(
aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var F=(%_ToNumber(aP.arguments.breakpoint));
if(!F){
aW.failed('Missing argument "breakpoint"');
return;
}
u.clearBreakPoint(F);
aW.body={breakpoint:F};
};
DebugCommandProcessor.prototype.listBreakpointsRequest_=function(
aP,aW){
var bk=[];
for(var O=0;O<A.length;O++){
var F=A[O];
var bl={
number:F.number(),
line:F.line(),
column:F.column(),
groupId:F.groupId(),
hit_count:F.hit_count(),
active:F.active(),
condition:F.condition(),
ignoreCount:F.ignoreCount(),
actual_locations:F.actual_locations()
};
if(F.type()==u.ScriptBreakPointType.ScriptId){
bl.type='scriptId';
bl.script_id=F.script_id();
}else if(F.type()==u.ScriptBreakPointType.ScriptName){
bl.type='scriptName';
bl.script_name=F.script_name();
}else if(F.type()==u.ScriptBreakPointType.ScriptRegExp){
bl.type='scriptRegExp';
bl.script_regexp=F.script_regexp_object().source;
}else{
throw j(2,
"Unexpected breakpoint type: "+F.type());
}
bk.push(bl);
}
aW.body={
breakpoints:bk,
breakOnExceptions:u.isBreakOnException(),
breakOnUncaughtExceptions:u.isBreakOnUncaughtException()
};
};
DebugCommandProcessor.prototype.disconnectRequest_=
function(aP,aW){
u.disableAllBreakPoints();
this.continueRequest_(aP,aW);
};
DebugCommandProcessor.prototype.setExceptionBreakRequest_=
function(aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var w=aP.arguments.type;
if(!w){
aW.failed('Missing argument "type"');
return;
}
var bd;
if(w=='all'){
bd=!u.isBreakOnException();
}else if(w=='uncaught'){
bd=!u.isBreakOnUncaughtException();
}
if(!(aP.arguments.enabled===(void 0))){
bd=aP.arguments.enabled;
if((bd!=true)&&(bd!=false)){
aW.failed('Illegal value for "enabled":"'+bd+'"');
}
}
if(w=='all'){
%ChangeBreakOnException(u.ExceptionBreak.Caught,bd);
}else if(w=='uncaught'){
%ChangeBreakOnException(u.ExceptionBreak.Uncaught,bd);
}else{
aW.failed('Unknown "type":"'+w+'"');
}
aW.body={'type':w,'enabled':bd};
};
DebugCommandProcessor.prototype.backtraceRequest_=function(
aP,aW){
var bm=this.exec_state_.frameCount();
if(bm==0){
aW.body={
totalFrames:bm
};
return;
}
var bn=0;
var bo=t;
if(aP.arguments){
if(aP.arguments.fromFrame){
bn=aP.arguments.fromFrame;
}
if(aP.arguments.toFrame){
bo=aP.arguments.toFrame;
}
if(aP.arguments.bottom){
var bp=bm-bn;
bn=bm-bo;
bo=bp;
}
if(bn<0||bo<0){
return aW.failed('Invalid frame number');
}
}
bo=n(bm,bo);
if(bo<=bn){
var bq='Invalid frame range';
return aW.failed(bq);
}
var br=[];
for(var O=bn;O<bo;O++){
br.push(this.exec_state_.frame(O));
}
aW.body={
fromFrame:bn,
toFrame:bo,
totalFrames:bm,
frames:br
};
};
DebugCommandProcessor.prototype.frameRequest_=function(aP,aW){
if(this.exec_state_.frameCount()==0){
return aW.failed('No frames');
}
if(aP.arguments){
var aE=aP.arguments.number;
if(aE<0||this.exec_state_.frameCount()<=aE){
return aW.failed('Invalid frame number');
}
this.exec_state_.setSelectedFrame(aP.arguments.number);
}
aW.body=this.exec_state_.frame();
};
DebugCommandProcessor.prototype.resolveFrameFromScopeDescription_=
function(bs){
if(bs&&!(bs.frameNumber===(void 0))){
var bt=bs.frameNumber;
if(bt<0||this.exec_state_.frameCount()<=bt){
throw k(26);
}
return this.exec_state_.frame(bt);
}else{
return this.exec_state_.frame();
}
};
DebugCommandProcessor.prototype.resolveScopeHolder_=
function(bs){
if(bs&&"functionHandle"in bs){
if(!(typeof(bs.functionHandle)==='number')){
throw j(2,'Function handle must be a number');
}
var bu=i(bs.functionHandle);
if(!bu){
throw j(2,'Failed to find function object by handle');
}
if(!bu.isFunction()){
throw j(2,
'Value of non-function type is found by handle');
}
return bu;
}else{
if(this.exec_state_.frameCount()==0){
throw j(2,'No scopes');
}
var bv=this.resolveFrameFromScopeDescription_(bs);
return bv;
}
}
DebugCommandProcessor.prototype.scopesRequest_=function(aP,aW){
var bw=this.resolveScopeHolder_(aP.arguments);
var bx=bw.scopeCount();
var by=[];
for(var O=0;O<bx;O++){
by.push(bw.scope(O));
}
aW.body={
fromScope:0,
toScope:bx,
totalScopes:bx,
scopes:by
};
};
DebugCommandProcessor.prototype.scopeRequest_=function(aP,aW){
var bw=this.resolveScopeHolder_(aP.arguments);
var bz=0;
if(aP.arguments&&!(aP.arguments.number===(void 0))){
bz=(%_ToNumber(aP.arguments.number));
if(bz<0||bw.scopeCount()<=bz){
return aW.failed('Invalid scope number');
}
}
aW.body=bw.scope(bz);
};
DebugCommandProcessor.resolveValue_=function(bA){
if("handle"in bA){
var bB=i(bA.handle);
if(!bB){
throw j(2,"Failed to resolve value by handle, ' #"+
bA.handle+"# not found");
}
return bB.value();
}else if("stringDescription"in bA){
if(bA.type==p.BOOLEAN_TYPE){
return(!!(bA.stringDescription));
}else if(bA.type==p.NUMBER_TYPE){
return(%_ToNumber(bA.stringDescription));
}if(bA.type==p.STRING_TYPE){
return(%_ToString(bA.stringDescription));
}else{
throw j(2,"Unknown type");
}
}else if("value"in bA){
return bA.value;
}else if(bA.type==p.UNDEFINED_TYPE){
return(void 0);
}else if(bA.type==p.NULL_TYPE){
return null;
}else{
throw j(2,"Failed to parse value description");
}
};
DebugCommandProcessor.prototype.setVariableValueRequest_=
function(aP,aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
if((aP.arguments.name===(void 0))){
aW.failed('Missing variable name');
}
var bC=aP.arguments.name;
var bs=aP.arguments.scope;
var bw=this.resolveScopeHolder_(bs);
if((bs.number===(void 0))){
aW.failed('Missing scope number');
}
var bz=(%_ToNumber(bs.number));
var bD=bw.scope(bz);
var bE=
DebugCommandProcessor.resolveValue_(aP.arguments.newValue);
bD.setVariableValue(bC,bE);
var bF=l(bE);
aW.body={
newValue:bF
};
};
DebugCommandProcessor.prototype.evaluateRequest_=function(aP,aW){
if(!aP.arguments){
return aW.failed('Missing arguments');
}
var bG=aP.arguments.expression;
var bv=aP.arguments.frame;
var a=aP.arguments.global;
var bH=aP.arguments.disable_break;
var bI=aP.arguments.additional_context;
try{
bG=(%_ToString(bG));
}catch(e){
return aW.failed('Failed to convert expression argument to string');
}
if(!(bv===(void 0))&&a){
return aW.failed('Arguments "frame" and "global" are exclusive');
}
var bJ;
if(bI){
bJ={};
for(var O=0;O<bI.length;O++){
var bK=bI[O];
if(!(typeof(bK.name)==='string')){
return aW.failed("Context element #"+O+
" doesn't contain name:string property");
}
var bL=DebugCommandProcessor.resolveValue_(bK);
bJ[bK.name]=bL;
}
}
if(a){
aW.body=this.exec_state_.evaluateGlobal(
bG,(!!(bH)),bJ);
return;
}
if((bH===(void 0))){
bH=true;
}
if(this.exec_state_.frameCount()==0){
return aW.failed('No frames');
}
if(!(bv===(void 0))){
var bM=(%_ToNumber(bv));
if(bM<0||bM>=this.exec_state_.frameCount()){
return aW.failed('Invalid frame "'+bv+'"');
}
aW.body=this.exec_state_.frame(bM).evaluate(
bG,(!!(bH)),bJ);
return;
}else{
aW.body=this.exec_state_.frame().evaluate(
bG,(!!(bH)),bJ);
return;
}
};
DebugCommandProcessor.prototype.lookupRequest_=function(aP,aW){
if(!aP.arguments){
return aW.failed('Missing arguments');
}
var bN=aP.arguments.handles;
if((bN===(void 0))){
return aW.failed('Argument "handles" missing');
}
if(!(aP.arguments.includeSource===(void 0))){
var bO=(!!(aP.arguments.includeSource));
aW.setOption('includeSource',bO);
}
var bP={};
for(var O=0;O<bN.length;O++){
var bf=bN[O];
var J=i(bf);
if(!J){
return aW.failed('Object #'+bf+'# not found');
}
bP[bf]=J;
}
aW.body=bP;
};
DebugCommandProcessor.prototype.referencesRequest_=
function(aP,aW){
if(!aP.arguments){
return aW.failed('Missing arguments');
}
var w=aP.arguments.type;
var bf=aP.arguments.handle;
if((w===(void 0))){
return aW.failed('Argument "type" missing');
}
if((bf===(void 0))){
return aW.failed('Argument "handle" missing');
}
if(w!='referencedBy'&&w!='constructedBy'){
return aW.failed('Invalid type "'+w+'"');
}
var J=i(bf);
if(J){
if(w=='referencedBy'){
aW.body=J.referencedBy();
}else{
aW.body=J.constructedBy();
}
}else{
return aW.failed('Object #'+bf+'# not found');
}
};
DebugCommandProcessor.prototype.sourceRequest_=function(aP,aW){
if(this.exec_state_.frameCount()==0){
return aW.failed('No source');
}
var bQ;
var bR;
var bv=this.exec_state_.frame();
if(aP.arguments){
bQ=aP.arguments.fromLine;
bR=aP.arguments.toLine;
if(!(aP.arguments.frame===(void 0))){
var bM=(%_ToNumber(aP.arguments.frame));
if(bM<0||bM>=this.exec_state_.frameCount()){
return aW.failed('Invalid frame "'+bv+'"');
}
bv=this.exec_state_.frame(bM);
}
}
var R=bv.func().script();
if(!R){
return aW.failed('No source');
}
var bS=R.sourceSlice(bQ,bR);
if(!bS){
return aW.failed('Invalid line interval');
}
aW.body={};
aW.body.source=bS.sourceText();
aW.body.fromLine=bS.from_line;
aW.body.toLine=bS.to_line;
aW.body.fromPosition=bS.from_position;
aW.body.toPosition=bS.to_position;
aW.body.totalLines=R.lineCount();
};
DebugCommandProcessor.prototype.scriptsRequest_=function(aP,aW){
var bT=ScriptTypeFlag(u.ScriptType.Normal);
var bO=false;
var bU=null;
if(aP.arguments){
if(!(aP.arguments.types===(void 0))){
bT=(%_ToNumber(aP.arguments.types));
if(f(bT)||bT<0){
return aW.failed('Invalid types "'+
aP.arguments.types+'"');
}
}
if(!(aP.arguments.includeSource===(void 0))){
bO=(!!(aP.arguments.includeSource));
aW.setOption('includeSource',bO);
}
if((%_IsArray(aP.arguments.ids))){
bU={};
var bV=aP.arguments.ids;
for(var O=0;O<bV.length;O++){
bU[bV[O]]=true;
}
}
var bW=null;
var bX=null;
if(!(aP.arguments.filter===(void 0))){
var bY=(%_ToNumber(aP.arguments.filter));
if(!f(bY)){
bX=bY;
}
bW=aP.arguments.filter;
}
}
var ae=%DebugGetLoadedScripts();
aW.body=[];
for(var O=0;O<ae.length;O++){
if(bU&&!bU[ae[O].id]){
continue;
}
if(bW||bX){
var R=ae[O];
var bZ=false;
if(bX&&!bZ){
if(R.id&&R.id===bX){
bZ=true;
}
}
if(bW&&!bZ){
if(R.name&&R.name.indexOf(bW)>=0){
bZ=true;
}
}
if(!bZ)continue;
}
if(bT&ScriptTypeFlag(ae[O].type)){
aW.body.push(l(ae[O]));
}
}
};
DebugCommandProcessor.prototype.threadsRequest_=function(aP,aW){
var ca=this.exec_state_.threadCount();
var cb=[];
for(var O=0;O<ca;O++){
var cc=%GetThreadDetails(this.exec_state_.break_id,O);
var cd={current:cc[0],
id:cc[1]
};
cb.push(cd);
}
aW.body={
totalThreads:ca,
threads:cb
};
};
DebugCommandProcessor.prototype.suspendRequest_=function(aP,aW){
aW.running=false;
};
DebugCommandProcessor.prototype.versionRequest_=function(aP,aW){
aW.body={
V8Version:%GetV8Version()
};
};
DebugCommandProcessor.prototype.changeLiveRequest_=function(
aP,aW){
if(!aP.arguments){
return aW.failed('Missing arguments');
}
var ce=aP.arguments.script_id;
var cf=!!aP.arguments.preview_only;
var ae=%DebugGetLoadedScripts();
var cg=null;
for(var O=0;O<ae.length;O++){
if(ae[O].id==ce){
cg=ae[O];
}
}
if(!cg){
aW.failed('Script not found');
return;
}
var ch=new d();
if(!(typeof(aP.arguments.new_source)==='string')){
throw"new_source argument expected";
}
var ci=aP.arguments.new_source;
var cj;
try{
cj=u.LiveEdit.SetScriptSource(cg,
ci,cf,ch);
}catch(e){
if(e instanceof u.LiveEdit.Failure&&"details"in e){
aW.failed(e.message,e.details);
return;
}
throw e;
}
aW.body={change_log:ch,result:cj};
if(!cf&&!this.running_&&cj.stack_modified){
aW.body.stepin_recommended=true;
}
};
DebugCommandProcessor.prototype.restartFrameRequest_=function(
aP,aW){
if(!aP.arguments){
return aW.failed('Missing arguments');
}
var bv=aP.arguments.frame;
if(this.exec_state_.frameCount()==0){
return aW.failed('No frames');
}
var ck;
if(!(bv===(void 0))){
var bM=(%_ToNumber(bv));
if(bM<0||bM>=this.exec_state_.frameCount()){
return aW.failed('Invalid frame "'+bv+'"');
}
ck=this.exec_state_.frame(bM);
}else{
ck=this.exec_state_.frame();
}
var cj=u.LiveEdit.RestartFrame(ck);
aW.body={result:cj};
};
DebugCommandProcessor.prototype.debuggerFlagsRequest_=function(aP,
aW){
if(!aP.arguments){
aW.failed('Missing arguments');
return;
}
var cl=aP.arguments.flags;
aW.body={flags:[]};
if(!(cl===(void 0))){
for(var O=0;O<cl.length;O++){
var aQ=cl[O].name;
var cm=B[aQ];
if(!cm){
continue;
}
if('value'in cl[O]){
cm.setValue(cl[O].value);
}
aW.body.flags.push({name:aQ,value:cm.getValue()});
}
}else{
for(var aQ in B){
var C=B[aQ].getValue();
aW.body.flags.push({name:aQ,value:C});
}
}
};
DebugCommandProcessor.prototype.v8FlagsRequest_=function(aP,aW){
var cl=aP.arguments.flags;
if(!cl)cl='';
%SetFlags(cl);
};
DebugCommandProcessor.prototype.gcRequest_=function(aP,aW){
var w=aP.arguments.type;
if(!w)w='all';
var cn=%GetHeapUsage();
%CollectGarbage(w);
var co=%GetHeapUsage();
aW.body={"before":cn,"after":co};
};
DebugCommandProcessor.prototype.dispatch_=(function(){
var cp=DebugCommandProcessor.prototype;
return{
"continue":cp.continueRequest_,
"break":cp.breakRequest_,
"setbreakpoint":cp.setBreakPointRequest_,
"changebreakpoint":cp.changeBreakPointRequest_,
"clearbreakpoint":cp.clearBreakPointRequest_,
"clearbreakpointgroup":cp.clearBreakPointGroupRequest_,
"disconnect":cp.disconnectRequest_,
"setexceptionbreak":cp.setExceptionBreakRequest_,
"listbreakpoints":cp.listBreakpointsRequest_,
"backtrace":cp.backtraceRequest_,
"frame":cp.frameRequest_,
"scopes":cp.scopesRequest_,
"scope":cp.scopeRequest_,
"setvariablevalue":cp.setVariableValueRequest_,
"evaluate":cp.evaluateRequest_,
"lookup":cp.lookupRequest_,
"references":cp.referencesRequest_,
"source":cp.sourceRequest_,
"scripts":cp.scriptsRequest_,
"threads":cp.threadsRequest_,
"suspend":cp.suspendRequest_,
"version":cp.versionRequest_,
"changelive":cp.changeLiveRequest_,
"restartframe":cp.restartFrameRequest_,
"flags":cp.debuggerFlagsRequest_,
"v8flag":cp.v8FlagsRequest_,
"gc":cp.gcRequest_,
};
})();
DebugCommandProcessor.prototype.isRunning=function(){
return this.running_;
};
DebugCommandProcessor.prototype.systemBreak=function(cq,aX){
return %SystemBreak();
};
function ObjectToProtocolObject_(cr,cs){
var ct={};
for(var aY in cr){
if(typeof aY=='string'){
var cu=ValueToProtocolValue_(cr[aY],
cs);
if(!(cu===(void 0))){
ct[aY]=cu;
}
}
}
return ct;
}
function ArrayToProtocolArray_(bk,cs){
var aT=[];
for(var O=0;O<bk.length;O++){
aT.push(ValueToProtocolValue_(bk[O],cs));
}
return aT;
}
function ValueToProtocolValue_(C,cs){
var aT;
switch(typeof C){
case'object':
if(C instanceof o){
aT=cs.serializeValue(C);
}else if((%_IsArray(C))){
aT=ArrayToProtocolArray_(C,cs);
}else{
aT=ObjectToProtocolObject_(C,cs);
}
break;
case'boolean':
case'string':
case'number':
aT=C;
break;
default:
aT=null;
}
return aT;
}
b.InstallConstants(a,[
"Debug",u,
"DebugCommandProcessor",DebugCommandProcessor,
]);
b.InstallFunctions(b,2,[
"MakeExecutionState",MakeExecutionState,
"MakeExceptionEvent",MakeExceptionEvent,
"MakeBreakEvent",MakeBreakEvent,
"MakeCompileEvent",MakeCompileEvent,
"MakePromiseEvent",MakePromiseEvent,
"MakeAsyncTaskEvent",MakeAsyncTaskEvent,
"IsBreakPointTriggered",IsBreakPointTriggered,
"UpdateScriptBreakPoints",UpdateScriptBreakPoints,
]);
b.Export(function(cv){
cv.GetScriptBreakPoints=GetScriptBreakPoints;
});
})

 liveedit©õ
(function(a,b){
"use strict";
var c=a.Debug.findScriptSourcePosition;
var d;
var e=a.Array;
var f=a.Math.floor;
var g=a.SyntaxError;
b.Import(function(h){
d=h.GetScriptBreakPoints;
});
var i;
function ApplyPatchMultiChunk(script,diff_array,new_source,preview_only,
change_log){
var j=script.source;
var k=GatherCompileInfo(j,script);
var l=BuildCodeInfoTree(k);
var m=new PosTranslator(diff_array);
MarkChangedFunctions(l,m.GetChunks());
FindLiveSharedInfos(l,script);
var n;
try{
n=GatherCompileInfo(new_source,script);
}catch(e){
var o=
new Failure("Failed to compile new version of script: "+e);
if(e instanceof g){
var p={
type:"liveedit_compile_error",
syntaxErrorMessage:e.message
};
CopyErrorPositionToDetails(e,p);
o.details=p;
}
throw o;
}
var q=BuildCodeInfoTree(n);
FindCorrespondingFunctions(l,q);
var r=new e();
var s=new e();
var t=new e();
var u=new e();
function HarvestTodo(v){
function CollectDamaged(w){
s.push(w);
for(var x=0;x<w.children.length;x++){
CollectDamaged(w.children[x]);
}
}
function CollectNew(y){
for(var x=0;x<y.length;x++){
t.push(y[x]);
CollectNew(y[x].children);
}
}
if(v.status==i.DAMAGED){
CollectDamaged(v);
return;
}
if(v.status==i.UNCHANGED){
u.push(v);
}else if(v.status==i.SOURCE_CHANGED){
u.push(v);
}else if(v.status==i.CHANGED){
r.push(v);
CollectNew(v.unmatched_new_nodes);
}
for(var x=0;x<v.children.length;x++){
HarvestTodo(v.children[x]);
}
}
var z={
change_tree:DescribeChangeTree(l),
textual_diff:{
old_len:j.length,
new_len:new_source.length,
chunks:diff_array
},
updated:false
};
if(preview_only){
return z;
}
HarvestTodo(l);
var A=new e();
for(var x=0;x<r.length;x++){
var B=
r[x].live_shared_function_infos;
if(B){
for(var C=0;C<B.length;C++){
A.push(B[C]);
}
}
}
var D=
CheckStackActivations(A,change_log);
z.stack_modified=D!=0;
var E=TemporaryRemoveBreakPoints(script,change_log);
var F;
if(s.length==0){
%LiveEditReplaceScript(script,new_source,null);
F=(void 0);
}else{
var G=CreateNameForOldScript(script);
F=%LiveEditReplaceScript(script,new_source,
G);
var H=new e();
change_log.push({linked_to_old_script:H});
for(var x=0;x<s.length;x++){
LinkToOldScript(s[x],F,
H);
}
z.created_script_name=G;
}
for(var x=0;x<t.length;x++){
%LiveEditFunctionSetScript(
t[x].info.shared_function_info,script);
}
for(var x=0;x<r.length;x++){
PatchFunctionCode(r[x],change_log);
}
var I=new e();
change_log.push({position_patched:I});
for(var x=0;x<u.length;x++){
PatchPositions(u[x],diff_array,
I);
if(u[x].live_shared_function_infos){
u[x].live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSourceUpdated(J.raw_array);
});
}
}
E(m,F);
z.updated=true;
return z;
}
function GatherCompileInfo(K,L){
var M=%LiveEditGatherCompileInfo(L,K);
var N=new e();
var O=new e();
for(var x=0;x<M.length;x++){
var J=new FunctionCompileInfo(M[x]);
%LiveEditFunctionSetScript(J.shared_function_info,(void 0));
N.push(J);
O.push(x);
}
for(var x=0;x<N.length;x++){
var P=x;
for(var C=x+1;C<N.length;C++){
if(N[P].start_position>N[C].start_position){
P=C;
}
}
if(P!=x){
var Q=N[P];
var R=O[P];
N[P]=N[x];
O[P]=O[x];
N[x]=Q;
O[x]=R;
}
}
var S=0;
function ResetIndexes(T,U){
var V=-1;
while(S<N.length&&
N[S].outer_index==U){
var W=S;
N[W].outer_index=T;
if(V!=-1){
N[V].next_sibling_index=W;
}
V=W;
S++;
ResetIndexes(W,O[W]);
}
if(V!=-1){
N[V].next_sibling_index=-1;
}
}
ResetIndexes(-1,-1);
Assert(S==N.length);
return N;
}
function PatchFunctionCode(v,X){
var Y=v.corresponding_node.info;
if(v.live_shared_function_infos){
v.live_shared_function_infos.forEach(function(Z){
%LiveEditReplaceFunctionCode(Y.raw_array,
Z.raw_array);
for(var x=0;x<v.children.length;x++){
if(v.children[x].corresponding_node){
var aa=
v.children[x].corresponding_node.info.
shared_function_info;
if(v.children[x].live_shared_function_infos){
v.children[x].live_shared_function_infos.
forEach(function(ab){
%LiveEditReplaceRefToNestedFunction(
Z.info,
aa,
ab.info);
});
}
}
}
});
X.push({function_patched:Y.function_name});
}else{
X.push({function_patched:Y.function_name,
function_info_not_found:true});
}
}
function LinkToOldScript(ac,F,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.
forEach(function(J){
%LiveEditFunctionSetScript(J.info,F);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,not_found:true});
}
}
function TemporaryRemoveBreakPoints(ae,X){
var af=d(ae);
var ag=[];
X.push({break_points_update:ag});
var ah=[];
for(var x=0;x<af.length;x++){
var ai=af[x];
ai.clear();
var aj=c(ae,
ai.line(),ai.column());
var ak={
position:aj,
line:ai.line(),
column:ai.column()
};
ah.push(ak);
}
return function(m,al){
for(var x=0;x<af.length;x++){
var ai=af[x];
if(al){
var am=ai.cloneForOtherScript(al);
am.set(al);
ag.push({
type:"copied_to_old",
id:ai.number(),
new_id:am.number(),
positions:ah[x]
});
}
var an=m.Translate(
ah[x].position,
PosTranslator.ShiftWithTopInsideChunkHandler);
var ao=
ae.locationFromPosition(an,false);
ai.update_positions(ao.line,ao.column);
var ap={
position:an,
line:ao.line,
column:ao.column
};
ai.set(ae);
ag.push({type:"position_changed",
id:ai.number(),
old_positions:ah[x],
new_positions:ap
});
}
};
}
function Assert(aq,ar){
if(!aq){
if(ar){
throw"Assert "+ar;
}else{
throw"Assert";
}
}
}
function DiffChunk(as,at,au,av){
this.pos1=as;
this.pos2=at;
this.len1=au;
this.len2=av;
}
function PosTranslator(aw){
var ax=new e();
var ay=0;
for(var x=0;x<aw.length;x+=3){
var az=aw[x];
var aA=az+ay;
var aB=aw[x+1];
var aC=aw[x+2];
ax.push(new DiffChunk(az,aA,aB-az,
aC-aA));
ay=aC-aB;
}
this.chunks=ax;
}
PosTranslator.prototype.GetChunks=function(){
return this.chunks;
};
PosTranslator.prototype.Translate=function(aD,aE){
var aF=this.chunks;
if(aF.length==0||aD<aF[0].pos1){
return aD;
}
var aG=0;
var aH=aF.length-1;
while(aG<aH){
var aI=f((aG+aH)/2);
if(aD<aF[aI+1].pos1){
aH=aI;
}else{
aG=aI+1;
}
}
var aJ=aF[aG];
if(aD>=aJ.pos1+aJ.len1){
return aD+aJ.pos2+aJ.len2-aJ.pos1-aJ.len1;
}
if(!aE){
aE=PosTranslator.DefaultInsideChunkHandler;
}
return aE(aD,aJ);
};
PosTranslator.DefaultInsideChunkHandler=function(aD,aK){
Assert(false,"Cannot translate position in changed area");
};
PosTranslator.ShiftWithTopInsideChunkHandler=
function(aD,aK){
return aD-aK.pos1+aK.pos2;
};
var i={
UNCHANGED:"unchanged",
SOURCE_CHANGED:"source changed",
CHANGED:"changed",
DAMAGED:"damaged"
};
function CodeInfoTreeNode(aL,aM,aN){
this.info=aL;
this.children=aM;
this.array_index=aN;
this.parent=(void 0);
this.status=i.UNCHANGED;
this.status_explanation=(void 0);
this.new_start_pos=(void 0);
this.new_end_pos=(void 0);
this.corresponding_node=(void 0);
this.unmatched_new_nodes=(void 0);
this.textual_corresponding_node=(void 0);
this.textually_unmatched_new_nodes=(void 0);
this.live_shared_function_infos=(void 0);
}
function BuildCodeInfoTree(aO){
var aP=0;
function BuildNode(){
var aQ=aP;
aP++;
var aR=new e();
while(aP<aO.length&&
aO[aP].outer_index==aQ){
aR.push(BuildNode());
}
var w=new CodeInfoTreeNode(aO[aQ],aR,
aQ);
for(var x=0;x<aR.length;x++){
aR[x].parent=w;
}
return w;
}
var aS=BuildNode();
Assert(aP==aO.length);
return aS;
}
function MarkChangedFunctions(aT,ax){
var aU=new function(){
var aV=0;
var aW=0;
this.current=function(){return ax[aV];};
this.next=function(){
var aJ=ax[aV];
aW=aJ.pos2+aJ.len2-(aJ.pos1+aJ.len1);
aV++;
};
this.done=function(){return aV>=ax.length;};
this.TranslatePos=function(aD){return aD+aW;};
};
function ProcessInternals(aX){
aX.new_start_pos=aU.TranslatePos(
aX.info.start_position);
var aY=0;
var aZ=false;
var ba=false;
while(!aU.done()&&
aU.current().pos1<aX.info.end_position){
if(aY<aX.children.length){
var bb=aX.children[aY];
if(bb.info.end_position<=aU.current().pos1){
ProcessUnchangedChild(bb);
aY++;
continue;
}else if(bb.info.start_position>=
aU.current().pos1+aU.current().len1){
aZ=true;
aU.next();
continue;
}else if(bb.info.start_position<=aU.current().pos1&&
bb.info.end_position>=aU.current().pos1+
aU.current().len1){
ProcessInternals(bb);
ba=ba||
(bb.status!=i.UNCHANGED);
aZ=aZ||
(bb.status==i.DAMAGED);
aY++;
continue;
}else{
aZ=true;
bb.status=i.DAMAGED;
bb.status_explanation=
"Text diff overlaps with function boundary";
aY++;
continue;
}
}else{
if(aU.current().pos1+aU.current().len1<=
aX.info.end_position){
aX.status=i.CHANGED;
aU.next();
continue;
}else{
aX.status=i.DAMAGED;
aX.status_explanation=
"Text diff overlaps with function boundary";
return;
}
}
Assert("Unreachable",false);
}
while(aY<aX.children.length){
var bb=aX.children[aY];
ProcessUnchangedChild(bb);
aY++;
}
if(aZ){
aX.status=i.CHANGED;
}else if(ba){
aX.status=i.SOURCE_CHANGED;
}
aX.new_end_pos=
aU.TranslatePos(aX.info.end_position);
}
function ProcessUnchangedChild(w){
w.new_start_pos=aU.TranslatePos(w.info.start_position);
w.new_end_pos=aU.TranslatePos(w.info.end_position);
}
ProcessInternals(aT);
}
function FindCorrespondingFunctions(bc,bd){
function ProcessNode(v,be){
var bf=
IsFunctionContextLocalsChanged(v.info,be.info);
if(bf){
v.status=i.CHANGED;
}
var bg=v.children;
var bh=be.children;
var bi=[];
var bj=[];
var bk=0;
var bl=0;
while(bk<bg.length){
if(bg[bk].status==i.DAMAGED){
bk++;
}else if(bl<bh.length){
if(bh[bl].info.start_position<
bg[bk].new_start_pos){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}else if(bh[bl].info.start_position==
bg[bk].new_start_pos){
if(bh[bl].info.end_position==
bg[bk].new_end_pos){
bg[bk].corresponding_node=
bh[bl];
bg[bk].textual_corresponding_node=
bh[bl];
if(bf){
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"Enclosing function is now incompatible. "+
bf;
bg[bk].corresponding_node=(void 0);
}else if(bg[bk].status!=
i.UNCHANGED){
ProcessNode(bg[bk],
bh[bl]);
if(bg[bk].status==i.DAMAGED){
bi.push(
bg[bk].corresponding_node);
bg[bk].corresponding_node=(void 0);
v.status=i.CHANGED;
}
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bi.push(bh[bl]);
bj.push(bh[bl]);
}
bl++;
bk++;
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}else{
bg[bk].status=i.DAMAGED;
bg[bk].status_explanation=
"No corresponding function in new script found";
v.status=i.CHANGED;
bk++;
}
}
while(bl<bh.length){
bi.push(bh[bl]);
bj.push(bh[bl]);
bl++;
}
if(v.status==i.CHANGED){
if(v.info.param_num!=be.info.param_num){
v.status=i.DAMAGED;
v.status_explanation="Changed parameter number: "+
v.info.param_num+" and "+be.info.param_num;
}
}
v.unmatched_new_nodes=bi;
v.textually_unmatched_new_nodes=
bj;
}
ProcessNode(bc,bd);
bc.corresponding_node=bd;
bc.textual_corresponding_node=bd;
Assert(bc.status!=i.DAMAGED,
"Script became damaged");
}
function FindLiveSharedInfos(bc,L){
var bm=%LiveEditFindSharedFunctionInfosForScript(L);
var bn=new e();
for(var x=0;x<bm.length;x++){
bn.push(new SharedInfoWrapper(bm[x]));
}
function FindFunctionInfos(N){
var bo=[];
for(var x=0;x<bn.length;x++){
var bp=bn[x];
if(bp.start_position==N.start_position&&
bp.end_position==N.end_position){
bo.push(bp);
}
}
if(bo.length>0){
return bo;
}
}
function TraverseTree(w){
w.live_shared_function_infos=FindFunctionInfos(w.info);
for(var x=0;x<w.children.length;x++){
TraverseTree(w.children[x]);
}
}
TraverseTree(bc);
}
function FunctionCompileInfo(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.param_num=bq[3];
this.code=bq[4];
this.code_scope_info=bq[5];
this.scope_info=bq[6];
this.outer_index=bq[7];
this.shared_function_info=bq[8];
this.next_sibling_index=null;
this.raw_array=bq;
}
function SharedInfoWrapper(bq){
this.function_name=bq[0];
this.start_position=bq[1];
this.end_position=bq[2];
this.info=bq[3];
this.raw_array=bq;
}
function PatchPositions(ac,aw,ad){
if(ac.live_shared_function_infos){
ac.live_shared_function_infos.forEach(function(J){
%LiveEditPatchFunctionPositions(J.raw_array,
aw);
});
ad.push({name:ac.info.function_name});
}else{
ad.push(
{name:ac.info.function_name,info_not_found:true});
}
}
function CreateNameForOldScript(L){
return L.name+" (old)";
}
function IsFunctionContextLocalsChanged(br,bs){
var bt=br.scope_info;
var bu=bs.scope_info;
var bv;
var bw;
if(bt){
bv=bt.toString();
}else{
bv="";
}
if(bu){
bw=bu.toString();
}else{
bw="";
}
if(bv!=bw){
return"Variable map changed: ["+bv+
"] => ["+bw+"]";
}
return;
}
var bx;
function CheckStackActivations(by,X){
var bz=new e();
for(var x=0;x<by.length;x++){
bz[x]=by[x].info;
}
var bA=%LiveEditCheckAndDropActivations(bz,true);
if(bA[bz.length]){
throw new Failure(bA[bz.length]);
}
var bB=new e();
var bC=new e();
for(var x=0;x<bz.length;x++){
var bD=by[x];
if(bA[x]==bx.REPLACED_ON_ACTIVE_STACK){
bC.push({name:bD.function_name});
}else if(bA[x]!=bx.AVAILABLE_FOR_PATCH){
var bE={
name:bD.function_name,
start_pos:bD.start_position,
end_pos:bD.end_position,
replace_problem:
bx.SymbolName(bA[x])
};
bB.push(bE);
}
}
if(bC.length>0){
X.push({dropped_from_stack:bC});
}
if(bB.length>0){
X.push({functions_on_stack:bB});
throw new Failure("Blocked by functions on stack");
}
return bC.length;
}
var bx={
AVAILABLE_FOR_PATCH:1,
BLOCKED_ON_ACTIVE_STACK:2,
BLOCKED_ON_OTHER_STACK:3,
BLOCKED_UNDER_NATIVE_CODE:4,
REPLACED_ON_ACTIVE_STACK:5,
BLOCKED_UNDER_GENERATOR:6,
BLOCKED_ACTIVE_GENERATOR:7
};
bx.SymbolName=function(bF){
var bG=bx;
for(var bH in bG){
if(bG[bH]==bF){
return bH;
}
}
};
function Failure(ar){
this.message=ar;
}
Failure.prototype.toString=function(){
return"LiveEdit Failure: "+this.message;
};
function CopyErrorPositionToDetails(bI,p){
function createPositionStruct(L,bJ){
if(bJ==-1)return;
var bK=L.locationFromPosition(bJ,true);
if(bK==null)return;
return{
line:bK.line+1,
column:bK.column+1,
position:bJ
};
}
if(!("scriptObject"in bI)||!("startPosition"in bI)){
return;
}
var L=bI.scriptObject;
var bL={
start:createPositionStruct(L,bI.startPosition),
end:createPositionStruct(L,bI.endPosition)
};
p.position=bL;
}
function GetPcFromSourcePos(bM,bN){
return %GetFunctionCodePositionFromSource(bM,bN);
}
function SetScriptSource(L,bO,bP,X){
var j=L.source;
var bQ=CompareStrings(j,bO);
return ApplyPatchMultiChunk(L,bQ,bO,bP,
X);
}
function CompareStrings(bR,bS){
return %LiveEditCompareStrings(bR,bS);
}
function ApplySingleChunkPatch(L,change_pos,change_len,new_str,
X){
var j=L.source;
var bO=j.substring(0,change_pos)+
new_str+j.substring(change_pos+change_len);
return ApplyPatchMultiChunk(L,
[change_pos,change_pos+change_len,change_pos+new_str.length],
bO,false,X);
}
function DescribeChangeTree(bc){
function ProcessOldNode(w){
var bT=[];
for(var x=0;x<w.children.length;x++){
var bb=w.children[x];
if(bb.status!=i.UNCHANGED){
bT.push(ProcessOldNode(bb));
}
}
var bU=[];
if(w.textually_unmatched_new_nodes){
for(var x=0;x<w.textually_unmatched_new_nodes.length;x++){
var bb=w.textually_unmatched_new_nodes[x];
bU.push(ProcessNewNode(bb));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
status:w.status,
children:bT,
new_children:bU
};
if(w.status_explanation){
bV.status_explanation=w.status_explanation;
}
if(w.textual_corresponding_node){
bV.new_positions=DescribePositions(w.textual_corresponding_node);
}
return bV;
}
function ProcessNewNode(w){
var bT=[];
if(false){
for(var x=0;x<w.children.length;x++){
bT.push(ProcessNewNode(w.children[x]));
}
}
var bV={
name:w.info.function_name,
positions:DescribePositions(w),
children:bT,
};
return bV;
}
function DescribePositions(w){
return{
start_position:w.info.start_position,
end_position:w.info.end_position
};
}
return ProcessOldNode(bc);
}
var bW={};
bW.SetScriptSource=SetScriptSource;
bW.ApplyPatchMultiChunk=ApplyPatchMultiChunk;
bW.Failure=Failure;
bW.GetPcFromSourcePos=GetPcFromSourcePos;
bW.TestApi={
PosTranslator:PosTranslator,
CompareStrings:CompareStrings,
ApplySingleChunkPatch:ApplySingleChunkPatch
};
a.Debug.LiveEdit=bW;
})

t prologueÁN
(function(a,b,c){
"use strict";
%CheckIsBootstrapping();
var d=(void 0);
var e=(void 0);
var f=%ExportFromRuntime({});
var g=(void 0);
function SetupTypedArray(h){
h.next=g;
g=h;
}
function Export(h){
h(f);
}
function Import(h){
h.next=d;
d=h;
}
function ImportNow(i){
return f[i];
}
function ImportFromExperimental(h){
h.next=e;
e=h;
}
function SetFunctionName(h,i,j){
if((typeof(i)==='symbol')){
i="["+%SymbolDescription(i)+"]";
}
if((j===(void 0))){
%FunctionSetName(h,i);
}else{
%FunctionSetName(h,j+" "+i);
}
}
function InstallConstants(k,l){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(k,l.length>>1);
var m=2|4|1;
for(var n=0;n<l.length;n+=2){
var i=l[n];
var o=l[n+1];
%AddNamedProperty(k,i,o,m);
}
%ToFastProperties(k);
}
function InstallFunctions(k,m,p){
%CheckIsBootstrapping();
%OptimizeObjectForAddingMultipleProperties(k,p.length>>1);
for(var n=0;n<p.length;n+=2){
var q=p[n];
var h=p[n+1];
SetFunctionName(h,q);
%FunctionRemovePrototype(h);
%AddNamedProperty(k,q,h,m);
%SetNativeFlag(h);
}
%ToFastProperties(k);
}
function InstallGetter(k,i,r,m){
%CheckIsBootstrapping();
if(typeof m=="undefined"){
m=2;
}
SetFunctionName(r,i,"get");
%FunctionRemovePrototype(r);
%DefineAccessorPropertyUnchecked(k,i,r,null,m);
%SetNativeFlag(r);
}
function InstallGetterSetter(k,i,r,s){
%CheckIsBootstrapping();
SetFunctionName(r,i,"get");
SetFunctionName(s,i,"set");
%FunctionRemovePrototype(r);
%FunctionRemovePrototype(s);
%DefineAccessorPropertyUnchecked(k,i,r,s,2);
%SetNativeFlag(r);
%SetNativeFlag(s);
}
function SetUpLockedPrototype(
constructor,fields,methods){
%CheckIsBootstrapping();
var t=constructor.prototype;
var u=(methods.length>>1)+(fields?fields.length:0);
if(u>=4){
%OptimizeObjectForAddingMultipleProperties(t,u);
}
if(fields){
for(var n=0;n<fields.length;n++){
%AddNamedProperty(t,fields[n],
(void 0),2|4);
}
}
for(var n=0;n<methods.length;n+=2){
var q=methods[n];
var h=methods[n+1];
%AddNamedProperty(t,q,h,2|4|1);
%SetNativeFlag(h);
}
%InternalSetPrototype(t,null);
%ToFastProperties(t);
}
function PostNatives(b){
%CheckIsBootstrapping();
for(;!(d===(void 0));d=d.next){
d(f);
}
var v=[
"ArrayToString",
"ErrorToString",
"FunctionSourceString",
"GetIterator",
"GetMethod",
"InnerArrayEvery",
"InnerArrayFilter",
"InnerArrayForEach",
"InnerArrayIndexOf",
"InnerArrayJoin",
"InnerArrayLastIndexOf",
"InnerArrayMap",
"InnerArrayReduce",
"InnerArrayReduceRight",
"InnerArrayReverse",
"InnerArraySome",
"InnerArraySort",
"InnerArrayToLocaleString",
"IsNaN",
"MakeError",
"MakeTypeError",
"MapEntries",
"MapIterator",
"MapIteratorNext",
"MathMax",
"MathMin",
"MaxSimple",
"MinSimple",
"ObjectIsFrozen",
"ObjectDefineProperty",
"ObserveArrayMethods",
"ObserveObjectMethods",
"OwnPropertyKeys",
"SameValueZero",
"SetIterator",
"SetIteratorNext",
"SetValues",
"SymbolToString",
"ToNameArray",
"ToPositiveInteger",
"is_concat_spreadable_symbol",
"iterator_symbol",
"promise_status_symbol",
"promise_value_symbol",
"reflect_apply",
"reflect_construct",
"to_string_tag_symbol",
];
var w={};
%OptimizeObjectForAddingMultipleProperties(
w,v.length);
for(var q of v){
w[q]=f[q];
}
%ToFastProperties(w);
f=w;
b.PostNatives=(void 0);
b.ImportFromExperimental=(void 0);
}
function PostExperimentals(b){
%CheckIsBootstrapping();
%ExportExperimentalFromRuntime(f);
for(;!(d===(void 0));d=d.next){
d(f);
}
for(;!(e===(void 0));
e=e.next){
e(f);
}
b.InitializeRNG();
b.InitializeRNG=(void 0);
b.CreateDoubleResultArray();
b.CreateDoubleResultArray=(void 0);
b.Export=(void 0);
b.PostDebug=(void 0);
b.PostExperimentals=(void 0);
g=(void 0);
}
function PostDebug(b){
for(;!(d===(void 0));d=d.next){
d(f);
}
b.InitializeRNG();
b.InitializeRNG=(void 0);
b.CreateDoubleResultArray();
b.CreateDoubleResultArray=(void 0);
f=(void 0);
b.Export=(void 0);
b.Import=(void 0);
b.ImportNow=(void 0);
b.PostDebug=(void 0);
b.PostExperimentals=(void 0);
g=(void 0);
}
function InitializeBuiltinTypedArrays(b,x,y){
var z=g;
for(;!(z===(void 0));z=z.next){
z(x,y);
}
}
%OptimizeObjectForAddingMultipleProperties(b,15);
b.Import=Import;
b.ImportNow=ImportNow;
b.Export=Export;
b.ImportFromExperimental=ImportFromExperimental;
b.SetFunctionName=SetFunctionName;
b.InstallConstants=InstallConstants;
b.InstallFunctions=InstallFunctions;
b.InstallGetter=InstallGetter;
b.InstallGetterSetter=InstallGetterSetter;
b.SetUpLockedPrototype=SetUpLockedPrototype;
b.PostNatives=PostNatives;
b.PostExperimentals=PostExperimentals;
b.PostDebug=PostDebug;
%ToFastProperties(b);
%OptimizeObjectForAddingMultipleProperties(c,5);
c.logStackTrace=function logStackTrace(){
%DebugTrace();
};
c.log=function log(){
let message='';
for(const arg of arguments){
message+=arg;
}
%GlobalPrint(message);
};
c.createPrivateSymbol=function createPrivateSymbol(i){
return %CreatePrivateSymbol(i);
};
c.simpleBind=function simpleBind(A,B){
return function(){
return %Apply(A,B,arguments,0,arguments.length);
};
};
c.uncurryThis=function uncurryThis(A){
return function(B){
return %Apply(A,B,arguments,1,arguments.length-1);
};
};
%ToFastProperties(c);
})

runtime	8
(function(a,b){
%CheckIsBootstrapping();
var c=a.Array;
var d=a.Boolean;
var e=a.String;
var f=
b.ImportNow("is_concat_spreadable_symbol");
var g;
b.Import(function(h){
g=h.MakeRangeError;
});
function APPLY_PREPARE(i){
var j;
if(!(typeof(this)==='function')){
throw %make_type_error(9,(%_ToString(this)),typeof this);
}
if((%_IsArray(i))){
j=i.length;
if(%_IsSmi(j)&&j>=0&&j<0x800000){
return j;
}
}
j=(i==null)?0:((i.length)>>>0);
if(j>0x800000)throw %make_range_error(155);
if(i!=null&&!(%_IsSpecObject(i))){
throw %make_type_error(124,"Function.prototype.apply");
}
return j;
}
function REFLECT_APPLY_PREPARE(i){
var j;
if(!(typeof(this)==='function')){
throw %make_type_error(9,(%_ToString(this)),typeof this);
}
if((%_IsArray(i))){
j=i.length;
if(%_IsSmi(j)&&j>=0&&j<0x800000){
return j;
}
}
if(!(%_IsSpecObject(i))){
throw %make_type_error(124,"Reflect.apply");
}
j=(%_ToLength(i.length));
if(j>0x800000)throw %make_range_error(155);
return j;
}
function REFLECT_CONSTRUCT_PREPARE(
i,newTarget){
var j;
var k=(typeof(this)==='function')&&%IsConstructor(this);
var l=(typeof(newTarget)==='function')&&%IsConstructor(newTarget);
if((%_IsArray(i))){
j=i.length;
if(%_IsSmi(j)&&j>=0&&j<0x800000&&
k&&l){
return j;
}
}
if(!k){
if(!(typeof(this)==='function')){
throw %make_type_error(13,(%_ToString(this)));
}else{
throw %make_type_error(56,(%_ToString(this)));
}
}
if(!l){
if(!(typeof(newTarget)==='function')){
throw %make_type_error(13,(%_ToString(newTarget)));
}else{
throw %make_type_error(56,(%_ToString(newTarget)));
}
}
if(!(%_IsSpecObject(i))){
throw %make_type_error(124,"Reflect.construct");
}
j=(%_ToLength(i.length));
if(j>0x800000)throw %make_range_error(155);
return j;
}
function CONCAT_ITERABLE_TO_ARRAY(m){
return %concat_iterable_to_array(this,m);
};
function SameValue(n,o){
if(typeof n!=typeof o)return false;
if((typeof(n)==='number')){
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))&&(!%_IsSmi(%IS_VAR(o))&&!(o==o)))return true;
if(n===0&&o===0&&%_IsMinusZero(n)!=%_IsMinusZero(o)){
return false;
}
}
if((%_IsSimdValue(n)))return %SimdSameValue(n,o);
return n===o;
}
function SameValueZero(n,o){
if(typeof n!=typeof o)return false;
if((typeof(n)==='number')){
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))&&(!%_IsSmi(%IS_VAR(o))&&!(o==o)))return true;
}
if((%_IsSimdValue(n)))return %SimdSameValueZero(n,o);
return n===o;
}
function ConcatIterableToArray(p,m){
var q=p.length;
for(var r of m){
AddIndexedProperty(p,q++,r);
}
return p;
}
function AddIndexedProperty(s,q,t){
if(q===((q)>>>0)){
%AddElement(s,q,t);
}else{
%AddNamedProperty(s,(%_ToString(q)),t,0);
}
}
%SetForceInlineFlag(AddIndexedProperty);
function IsConcatSpreadable(u){
if(!(%_IsSpecObject(u)))return false;
var v=u[f];
if((v===(void 0)))return(%_IsArray(u));
return(!!(v));
}
function ToPositiveInteger(n,w){
var x=(%_IsSmi(%IS_VAR(n))?n:%NumberToIntegerMapMinusZero(n));
if(x<0)throw g(w);
return x;
}
function MaxSimple(y,z){
return y>z?y:z;
}
function MinSimple(y,z){
return y>z?z:y;
}
%SetForceInlineFlag(MaxSimple);
%SetForceInlineFlag(MinSimple);
%FunctionSetPrototype(c,new c(0));
b.Export(function(A){
A.AddIndexedProperty=AddIndexedProperty;
A.MaxSimple=MaxSimple;
A.MinSimple=MinSimple;
A.SameValue=SameValue;
A.SameValueZero=SameValueZero;
A.ToPositiveInteger=ToPositiveInteger;
});
%InstallToContext([
"apply_prepare_builtin",APPLY_PREPARE,
"concat_iterable_to_array_builtin",CONCAT_ITERABLE_TO_ARRAY,
"reflect_apply_prepare_builtin",REFLECT_APPLY_PREPARE,
"reflect_construct_prepare_builtin",REFLECT_CONSTRUCT_PREPARE,
]);
%InstallToContext([
"concat_iterable_to_array",ConcatIterableToArray,
]);
})

$v8nativesÁ
(function(a,b){
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=a.Boolean;
var f=a.Function;
var g=a.Number;
var h=a.Object;
var i=b.InternalArray;
var j=b.ImportNow("iterator_symbol");
var k;
var l;
var m;
var n;
var o=%GetRootNaN();
var p;
var q;
var r;
var s;
var t;
var u;
var v=b.ImportNow("SameValue");
var w;
var x=b.ImportNow("to_string_tag_symbol");
b.Import(function(y){
k=y.MakeRangeError;
l=y.MakeSyntaxError;
m=y.MakeTypeError;
n=y.MathAbs;
p=y.ObserveBeginPerformSplice;
q=y.ObserveEndPerformSplice;
r=y.ObserveEnqueueSpliceRecord;
w=y.StringIndexOf;
});
b.ImportFromExperimental(function(y){
c=y.FLAG_harmony_tostring;
s=y.ProxyDelegateCallAndConstruct;
t=y.ProxyDerivedHasOwnTrap;
u=y.ProxyDerivedKeysTrap;
});
function GlobalIsNaN(z){
z=(%_ToNumber(z));
return(!%_IsSmi(%IS_VAR(z))&&!(z==z));
}
function GlobalIsFinite(z){
z=(%_ToNumber(z));
return(%_IsSmi(%IS_VAR(z))||((z==z)&&(z!=1/0)&&(z!=-1/0)));
}
function GlobalParseInt(A,B){
if((B===(void 0))||B===10||B===0){
if(%_IsSmi(A))return A;
if((typeof(A)==='number')&&
((0.01<A&&A<1e9)||
(-1e9<A&&A<-0.01))){
return A|0;
}
A=(%_ToString(A));
B=B|0;
}else{
A=(%_ToString(A));
B=((B)|0);
if(!(B==0||(2<=B&&B<=36))){
return o;
}
}
if(%_HasCachedArrayIndex(A)&&
(B==0||B==10)){
return %_GetCachedArrayIndex(A);
}
return %StringParseInt(A,B);
}
function GlobalParseFloat(A){
A=(%_ToString(A));
if(%_HasCachedArrayIndex(A))return %_GetCachedArrayIndex(A);
return %StringParseFloat(A);
}
function GlobalEval(C){
if(!(typeof(C)==='string'))return C;
var D=%GlobalProxy(GlobalEval);
var E=%CompileString(C,false);
if(!(%_IsFunction(E)))return E;
return %_CallFunction(D,E);
}
var F=2|4|1;
b.InstallConstants(a,[
"NaN",o,
"Infinity",(1/0),
"undefined",(void 0),
]);
b.InstallFunctions(a,2,[
"isNaN",GlobalIsNaN,
"isFinite",GlobalIsFinite,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat,
"eval",GlobalEval
]);
function ObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
var G=(%_ToObject(this));
var H=%_ClassOf(G);
var I;
if(c){
I=G[x];
if(!(typeof(I)==='string')){
I=H;
}
}else{
I=H;
}
return`[object ${I}]`;
}
function ObjectToLocaleString(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw m(15,"Object.prototype.toLocaleString");
return this.toString();
}
function ObjectValueOf(){
return(%_ToObject(this));
}
function ObjectHasOwnProperty(J){
var K=(%_ToName(J));
var L=(%_ToObject(this));
if(%_IsJSProxy(L)){
if((typeof(J)==='symbol'))return false;
var M=%GetHandler(L);
return CallTrap1(M,"hasOwn",t,K);
}
return %HasOwnProperty(L,K);
}
function ObjectIsPrototypeOf(N){
if(!(%_IsSpecObject(N)))return false;
var G=(%_ToObject(this));
return %_HasInPrototypeChain(N,G);
}
function ObjectPropertyIsEnumerable(N){
var O=(%_ToName(N));
if(%_IsJSProxy(this)){
if((typeof(N)==='symbol'))return false;
var P=GetOwnPropertyJS(this,O);
return(P===(void 0))?false:P.isEnumerable();
}
return %IsPropertyEnumerable((%_ToObject(this)),O);
}
function ObjectDefineGetter(K,Q){
var R=this;
if((R===null)||(R===(void 0))){
R=%GlobalProxy(ObjectDefineGetter);
}
if(!(typeof(Q)==='function')){
throw m(65);
}
var P=new PropertyDescriptor();
P.setGet(Q);
P.setEnumerable(true);
P.setConfigurable(true);
DefineOwnProperty((%_ToObject(R)),(%_ToName(K)),P,false);
}
function ObjectLookupGetter(K){
var R=this;
if((R===null)||(R===(void 0))){
R=%GlobalProxy(ObjectLookupGetter);
}
return %LookupAccessor((%_ToObject(R)),(%_ToName(K)),0);
}
function ObjectDefineSetter(K,Q){
var R=this;
if((R===null)||(R===(void 0))){
R=%GlobalProxy(ObjectDefineSetter);
}
if(!(typeof(Q)==='function')){
throw m(68);
}
var P=new PropertyDescriptor();
P.setSet(Q);
P.setEnumerable(true);
P.setConfigurable(true);
DefineOwnProperty((%_ToObject(R)),(%_ToName(K)),P,false);
}
function ObjectLookupSetter(K){
var R=this;
if((R===null)||(R===(void 0))){
R=%GlobalProxy(ObjectLookupSetter);
}
return %LookupAccessor((%_ToObject(R)),(%_ToName(K)),1);
}
function ObjectKeys(S){
S=(%_ToObject(S));
if(%_IsJSProxy(S)){
var M=%GetHandler(S);
var T=CallTrap0(M,"keys",u);
return ToNameArray(T,"keys",false);
}
return %OwnKeys(S);
}
function IsAccessorDescriptor(P){
if((P===(void 0)))return false;
return P.hasGetter()||P.hasSetter();
}
function IsDataDescriptor(P){
if((P===(void 0)))return false;
return P.hasValue()||P.hasWritable();
}
function IsGenericDescriptor(P){
if((P===(void 0)))return false;
return!(IsAccessorDescriptor(P)||IsDataDescriptor(P));
}
function IsInconsistentDescriptor(P){
return IsAccessorDescriptor(P)&&IsDataDescriptor(P);
}
function FromPropertyDescriptor(P){
if((P===(void 0)))return P;
if(IsDataDescriptor(P)){
return{value:P.getValue(),
writable:P.isWritable(),
enumerable:P.isEnumerable(),
configurable:P.isConfigurable()};
}
return{get:P.getGet(),
set:P.getSet(),
enumerable:P.isEnumerable(),
configurable:P.isConfigurable()};
}
function FromGenericPropertyDescriptor(P){
if((P===(void 0)))return P;
var S=new h();
if(P.hasValue()){
%AddNamedProperty(S,"value",P.getValue(),0);
}
if(P.hasWritable()){
%AddNamedProperty(S,"writable",P.isWritable(),0);
}
if(P.hasGetter()){
%AddNamedProperty(S,"get",P.getGet(),0);
}
if(P.hasSetter()){
%AddNamedProperty(S,"set",P.getSet(),0);
}
if(P.hasEnumerable()){
%AddNamedProperty(S,"enumerable",P.isEnumerable(),0);
}
if(P.hasConfigurable()){
%AddNamedProperty(S,"configurable",P.isConfigurable(),0);
}
return S;
}
function ToPropertyDescriptor(S){
if(!(%_IsSpecObject(S)))throw m(82,S);
var P=new PropertyDescriptor();
if("enumerable"in S){
P.setEnumerable((!!(S.enumerable)));
}
if("configurable"in S){
P.setConfigurable((!!(S.configurable)));
}
if("value"in S){
P.setValue(S.value);
}
if("writable"in S){
P.setWritable((!!(S.writable)));
}
if("get"in S){
var U=S.get;
if(!(U===(void 0))&&!(typeof(U)==='function')){
throw m(66,U);
}
P.setGet(U);
}
if("set"in S){
var V=S.set;
if(!(V===(void 0))&&!(typeof(V)==='function')){
throw m(69,V);
}
P.setSet(V);
}
if(IsInconsistentDescriptor(P)){
throw m(121,S);
}
return P;
}
function ToCompletePropertyDescriptor(S){
var P=ToPropertyDescriptor(S);
if(IsGenericDescriptor(P)||IsDataDescriptor(P)){
if(!P.hasValue())P.setValue((void 0));
if(!P.hasWritable())P.setWritable(false);
}else{
if(!P.hasGetter())P.setGet((void 0));
if(!P.hasSetter())P.setSet((void 0));
}
if(!P.hasEnumerable())P.setEnumerable(false);
if(!P.hasConfigurable())P.setConfigurable(false);
return P;
}
function PropertyDescriptor(){
this.value_=(void 0);
this.hasValue_=false;
this.writable_=false;
this.hasWritable_=false;
this.enumerable_=false;
this.hasEnumerable_=false;
this.configurable_=false;
this.hasConfigurable_=false;
this.get_=(void 0);
this.hasGetter_=false;
this.set_=(void 0);
this.hasSetter_=false;
}
b.SetUpLockedPrototype(PropertyDescriptor,[
"value_",
"hasValue_",
"writable_",
"hasWritable_",
"enumerable_",
"hasEnumerable_",
"configurable_",
"hasConfigurable_",
"get_",
"hasGetter_",
"set_",
"hasSetter_"
],[
"toString",function PropertyDescriptor_ToString(){
return"[object PropertyDescriptor]";
},
"setValue",function PropertyDescriptor_SetValue(J){
this.value_=J;
this.hasValue_=true;
},
"getValue",function PropertyDescriptor_GetValue(){
return this.value_;
},
"hasValue",function PropertyDescriptor_HasValue(){
return this.hasValue_;
},
"setEnumerable",function PropertyDescriptor_SetEnumerable(W){
this.enumerable_=W;
this.hasEnumerable_=true;
},
"isEnumerable",function PropertyDescriptor_IsEnumerable(){
return this.enumerable_;
},
"hasEnumerable",function PropertyDescriptor_HasEnumerable(){
return this.hasEnumerable_;
},
"setWritable",function PropertyDescriptor_SetWritable(X){
this.writable_=X;
this.hasWritable_=true;
},
"isWritable",function PropertyDescriptor_IsWritable(){
return this.writable_;
},
"hasWritable",function PropertyDescriptor_HasWritable(){
return this.hasWritable_;
},
"setConfigurable",
function PropertyDescriptor_SetConfigurable(Y){
this.configurable_=Y;
this.hasConfigurable_=true;
},
"hasConfigurable",function PropertyDescriptor_HasConfigurable(){
return this.hasConfigurable_;
},
"isConfigurable",function PropertyDescriptor_IsConfigurable(){
return this.configurable_;
},
"setGet",function PropertyDescriptor_SetGetter(U){
this.get_=U;
this.hasGetter_=true;
},
"getGet",function PropertyDescriptor_GetGetter(){
return this.get_;
},
"hasGetter",function PropertyDescriptor_HasGetter(){
return this.hasGetter_;
},
"setSet",function PropertyDescriptor_SetSetter(V){
this.set_=V;
this.hasSetter_=true;
},
"getSet",function PropertyDescriptor_GetSetter(){
return this.set_;
},
"hasSetter",function PropertyDescriptor_HasSetter(){
return this.hasSetter_;
}
]);
function ConvertDescriptorArrayToDescriptor(Z){
if((Z===(void 0))){
return(void 0);
}
var P=new PropertyDescriptor();
if(Z[0]){
P.setGet(Z[2]);
P.setSet(Z[3]);
}else{
P.setValue(Z[1]);
P.setWritable(Z[4]);
}
P.setEnumerable(Z[5]);
P.setConfigurable(Z[6]);
return P;
}
function GetTrap(M,K,aa){
var ab=M[K];
if((ab===(void 0))){
if((aa===(void 0))){
throw m(89,M,K);
}
ab=aa;
}else if(!(typeof(ab)==='function')){
throw m(90,M,K);
}
return ab;
}
function CallTrap0(M,K,aa){
return %_CallFunction(M,GetTrap(M,K,aa));
}
function CallTrap1(M,K,aa,C){
return %_CallFunction(M,C,GetTrap(M,K,aa));
}
function CallTrap2(M,K,aa,C,ac){
return %_CallFunction(M,C,ac,GetTrap(M,K,aa));
}
function GetOwnPropertyJS(S,ad){
var ae=(%_ToName(ad));
if(%_IsJSProxy(S)){
if((typeof(ad)==='symbol'))return(void 0);
var M=%GetHandler(S);
var af=CallTrap1(
M,"getOwnPropertyDescriptor",(void 0),ae);
if((af===(void 0)))return af;
var P=ToCompletePropertyDescriptor(af);
if(!P.isConfigurable()){
throw m(93,
M,ae,"getOwnPropertyDescriptor");
}
return P;
}
var ag=%GetOwnProperty((%_ToObject(S)),ae);
return ConvertDescriptorArrayToDescriptor(ag);
}
function Delete(S,ae,ah){
var P=GetOwnPropertyJS(S,ae);
if((P===(void 0)))return true;
if(P.isConfigurable()){
%DeleteProperty_Sloppy(S,ae);
return true;
}else if(ah){
throw m(28,ae);
}else{
return;
}
}
function GetMethod(S,ae){
var ai=S[ae];
if((ai==null))return(void 0);
if((typeof(ai)==='function'))return ai;
throw m(13,typeof ai);
}
function DefineProxyProperty(S,ae,F,ah){
if((typeof(ae)==='symbol'))return false;
var M=%GetHandler(S);
var aj=CallTrap2(M,"defineProperty",(void 0),ae,F);
if(!aj){
if(ah){
throw m(88,
M,"false","defineProperty");
}else{
return false;
}
}
return true;
}
function DefineObjectProperty(S,ae,P,ah){
var ak=%GetOwnProperty(S,(%_ToName(ae)));
var al=ConvertDescriptorArrayToDescriptor(ak);
var am=%IsExtensible(S);
if((al===(void 0))&&!am){
if(ah){
throw m(28,ae);
}else{
return false;
}
}
if(!(al===(void 0))){
if((IsGenericDescriptor(P)||
IsDataDescriptor(P)==IsDataDescriptor(al))&&
(!P.hasEnumerable()||
v(P.isEnumerable(),al.isEnumerable()))&&
(!P.hasConfigurable()||
v(P.isConfigurable(),al.isConfigurable()))&&
(!P.hasWritable()||
v(P.isWritable(),al.isWritable()))&&
(!P.hasValue()||
v(P.getValue(),al.getValue()))&&
(!P.hasGetter()||
v(P.getGet(),al.getGet()))&&
(!P.hasSetter()||
v(P.getSet(),al.getSet()))){
return true;
}
if(!al.isConfigurable()){
if(P.isConfigurable()||
(P.hasEnumerable()&&
P.isEnumerable()!=al.isEnumerable())){
if(ah){
throw m(96,ae);
}else{
return false;
}
}
if(!IsGenericDescriptor(P)){
if(IsDataDescriptor(al)!=IsDataDescriptor(P)){
if(ah){
throw m(96,ae);
}else{
return false;
}
}
if(IsDataDescriptor(al)&&IsDataDescriptor(P)){
var an=al.isWritable();
if(an!=P.isWritable()){
if(!an||(%IsStrong(S))){
if(ah){
throw an
?m(114,S,ae)
:m(96,ae);
}else{
return false;
}
}
}
if(!an&&P.hasValue()&&
!v(P.getValue(),al.getValue())){
if(ah){
throw m(96,ae);
}else{
return false;
}
}
}
if(IsAccessorDescriptor(P)&&IsAccessorDescriptor(al)){
if(P.hasSetter()&&
!v(P.getSet(),al.getSet())){
if(ah){
throw m(96,ae);
}else{
return false;
}
}
if(P.hasGetter()&&!v(P.getGet(),al.getGet())){
if(ah){
throw m(96,ae);
}else{
return false;
}
}
}
}
}
}
var ao=0;
if(P.hasEnumerable()){
ao|=P.isEnumerable()?0:2;
}else if(!(al===(void 0))){
ao|=al.isEnumerable()?0:2;
}else{
ao|=2;
}
if(P.hasConfigurable()){
ao|=P.isConfigurable()?0:4;
}else if(!(al===(void 0))){
ao|=al.isConfigurable()?0:4;
}else
ao|=4;
if(IsDataDescriptor(P)||
(IsGenericDescriptor(P)&&
((al===(void 0))||IsDataDescriptor(al)))){
if(P.hasWritable()){
ao|=P.isWritable()?0:1;
}else if(!(al===(void 0))){
ao|=al.isWritable()?0:1;
}else{
ao|=1;
}
var J=(void 0);
if(P.hasValue()){
J=P.getValue();
}else if(!(al===(void 0))&&IsDataDescriptor(al)){
J=al.getValue();
}
%DefineDataPropertyUnchecked(S,ae,J,ao);
}else{
var ap=null;
if(P.hasGetter()){
ap=P.getGet();
}else if(IsAccessorDescriptor(al)&&al.hasGetter()){
ap=al.getGet();
}
var aq=null;
if(P.hasSetter()){
aq=P.getSet();
}else if(IsAccessorDescriptor(al)&&al.hasSetter()){
aq=al.getSet();
}
%DefineAccessorPropertyUnchecked(S,ae,ap,aq,ao);
}
return true;
}
function DefineArrayProperty(S,ae,P,ah){
if(!(typeof(ae)==='symbol')){
var ar=((ae)>>>0);
var as=false;
if((%_ToString(ar))==ae&&ar!=4294967295){
var at=S.length;
if(ar>=at&&%IsObserved(S)){
as=true;
p(S);
}
var au=GetOwnPropertyJS(S,"length");
if((ar>=at&&!au.isWritable())||
!DefineObjectProperty(S,ae,P,true)){
if(as)
q(S);
if(ah){
throw m(28,ae);
}else{
return false;
}
}
if(ar>=at){
S.length=ar+1;
}
if(as){
q(S);
r(S,at,[],ar+1-at);
}
return true;
}
}
return DefineObjectProperty(S,ae,P,ah);
}
function DefineOwnProperty(S,ae,P,ah){
if(%_IsJSProxy(S)){
if((typeof(ae)==='symbol'))return false;
var F=FromGenericPropertyDescriptor(P);
return DefineProxyProperty(S,ae,F,ah);
}else if((%_IsArray(S))){
return DefineArrayProperty(S,ae,P,ah);
}else{
return DefineObjectProperty(S,ae,P,ah);
}
}
function ObjectGetPrototypeOf(S){
return %_GetPrototype((%_ToObject(S)));
}
function ObjectSetPrototypeOf(S,av){
if((%IS_VAR(S)===null)||(S===(void 0)))throw m(15,"Object.setPrototypeOf");
if(av!==null&&!(%_IsSpecObject(av))){
throw m(84,av);
}
if((%_IsSpecObject(S))){
%SetPrototype(S,av);
}
return S;
}
function ObjectGetOwnPropertyDescriptor(S,ae){
var P=GetOwnPropertyJS((%_ToObject(S)),ae);
return FromPropertyDescriptor(P);
}
function ToNameArray(S,ab,aw){
if(!(%_IsSpecObject(S))){
throw m(91,ab,S);
}
var ax=((S.length)>>>0);
var ay=new d(ax);
var az=0;
var T={__proto__:null};
for(var ar=0;ar<ax;ar++){
var aA=(%_ToName(S[ar]));
if((typeof(aA)==='symbol')&&!aw)continue;
if(%HasOwnProperty(T,aA)){
throw m(94,ab,aA);
}
ay[az]=aA;
++az;
T[aA]=0;
}
ay.length=az;
return ay;
}
function ObjectGetOwnPropertyKeys(S,aB){
var aC=new i();
aB|=32;
var aD=%GetInterceptorInfo(S);
if((aB&8)===0){
var aE=%GetOwnElementNames(S);
for(var aF=0;aF<aE.length;++aF){
aE[aF]=%_NumberToString(aE[aF]);
}
aC.push(aE);
if((aD&1)!=0){
var aG=%GetIndexedInterceptorElementNames(S);
if(!(aG===(void 0))){
aC.push(aG);
}
}
}
aC.push(%GetOwnPropertyNames(S,aB));
if((aD&2)!=0){
var aH=
%GetNamedInterceptorPropertyNames(S);
if(!(aH===(void 0))){
aC.push(aH);
}
}
var aI=
%Apply(i.prototype.concat,
aC[0],aC,1,aC.length-1);
if(aD!=0){
var aJ={__proto__:null};
var aK=0;
for(var aF=0;aF<aI.length;++aF){
var K=aI[aF];
if((typeof(K)==='symbol')){
if((aB&16)||(%SymbolIsPrivate(K))){
continue;
}
}else{
if(aB&8)continue;
K=(%_ToString(K));
}
if(aJ[K])continue;
aJ[K]=true;
aI[aK++]=K;
}
aI.length=aK;
}
return aI;
}
function OwnPropertyKeys(S){
if(%_IsJSProxy(S)){
var M=%GetHandler(S);
var T=CallTrap0(M,"ownKeys",(void 0));
return ToNameArray(T,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(S,32);
}
function ObjectGetOwnPropertyNames(S){
S=(%_ToObject(S));
if(%_IsJSProxy(S)){
var M=%GetHandler(S);
var T=CallTrap0(M,"getOwnPropertyNames",(void 0));
return ToNameArray(T,"getOwnPropertyNames",false);
}
return ObjectGetOwnPropertyKeys(S,16);
}
function ObjectCreate(av,aL){
if(!(%_IsSpecObject(av))&&av!==null){
throw m(84,av);
}
var S={};
%InternalSetPrototype(S,av);
if(!(aL===(void 0)))ObjectDefineProperties(S,aL);
return S;
}
function ObjectDefineProperty(S,ae,F){
if(%_IsJSProxy(S)||%IsObserved(S)){
if(!(%_IsSpecObject(S))){
throw m(14,"Object.defineProperty");
}
var K=(%_ToName(ae));
if(%_IsJSProxy(S)){
var aM={__proto__:null};
for(var aN in F){
aM[aN]=F[aN];
}
DefineProxyProperty(S,K,aM,true);
}else{
var P=ToPropertyDescriptor(F);
DefineOwnProperty(S,K,P,true);
}
return S;
}
return %ObjectDefineProperty(S,ae,F);
}
function GetOwnEnumerablePropertyNames(L){
var T=new i();
for(var aO in L){
if(%HasOwnProperty(L,aO)){
T.push(aO);
}
}
var aB=8|32;
var aP=%GetOwnPropertyNames(L,aB);
for(var aF=0;aF<aP.length;++aF){
var aQ=aP[aF];
if((typeof(aQ)==='symbol')){
var P=ObjectGetOwnPropertyDescriptor(L,aQ);
if(P.enumerable)T.push(aQ);
}
}
return T;
}
function ObjectDefineProperties(S,aL){
if(%_IsJSProxy(S)||%_IsJSProxy(aL)||%IsObserved(S)){
if(!(%_IsSpecObject(S))){
throw m(14,"Object.defineProperties");
}
var ag=(%_ToObject(aL));
var T=GetOwnEnumerablePropertyNames(ag);
var aR=new i();
for(var aF=0;aF<T.length;aF++){
aR.push(ToPropertyDescriptor(ag[T[aF]]));
}
for(var aF=0;aF<T.length;aF++){
DefineOwnProperty(S,T[aF],aR[aF],true);
}
return S;
}
return %ObjectDefineProperties(S,aL);
}
function ProxyFix(S){
var M=%GetHandler(S);
var ag=CallTrap0(M,"fix",(void 0));
if((ag===(void 0))){
throw m(88,M,"undefined","fix");
}
if(%IsJSFunctionProxy(S)){
var aS=%GetCallTrap(S);
var aT=%GetConstructTrap(S);
var aU=s(aS,aT);
%Fix(S);
%SetCode(S,aU);
var aV=new h();
ObjectDefineProperty(aV,"constructor",
{value:S,writable:true,enumerable:false,configurable:true});
%FunctionSetPrototype(S,aV);
S.length=0;
}else{
%Fix(S);
}
ObjectDefineProperties(S,ag);
}
function ObjectSealJS(S){
if(!(%_IsSpecObject(S)))return S;
var aW=%_IsJSProxy(S);
if(aW||%HasSloppyArgumentsElements(S)||%IsObserved(S)){
if(aW){
ProxyFix(S);
}
var T=OwnPropertyKeys(S);
for(var aF=0;aF<T.length;aF++){
var K=T[aF];
var P=GetOwnPropertyJS(S,K);
if(P.isConfigurable()){
P.setConfigurable(false);
DefineOwnProperty(S,K,P,true);
}
}
%PreventExtensions(S);
}else{
%ObjectSeal(S);
}
return S;
}
function ObjectFreezeJS(S){
if(!(%_IsSpecObject(S)))return S;
var aW=%_IsJSProxy(S);
if(aW||%HasSloppyArgumentsElements(S)||%IsObserved(S)||
(%IsStrong(S))){
if(aW){
ProxyFix(S);
}
var T=OwnPropertyKeys(S);
for(var aF=0;aF<T.length;aF++){
var K=T[aF];
var P=GetOwnPropertyJS(S,K);
if(P.isWritable()||P.isConfigurable()){
if(IsDataDescriptor(P))P.setWritable(false);
P.setConfigurable(false);
DefineOwnProperty(S,K,P,true);
}
}
%PreventExtensions(S);
}else{
%ObjectFreeze(S);
}
return S;
}
function ObjectPreventExtension(S){
if(!(%_IsSpecObject(S)))return S;
if(%_IsJSProxy(S)){
ProxyFix(S);
}
%PreventExtensions(S);
return S;
}
function ObjectIsSealed(S){
if(!(%_IsSpecObject(S)))return true;
if(%_IsJSProxy(S)){
return false;
}
if(%IsExtensible(S)){
return false;
}
var T=OwnPropertyKeys(S);
for(var aF=0;aF<T.length;aF++){
var K=T[aF];
var P=GetOwnPropertyJS(S,K);
if(P.isConfigurable()){
return false;
}
}
return true;
}
function ObjectIsFrozen(S){
if(!(%_IsSpecObject(S)))return true;
if(%_IsJSProxy(S)){
return false;
}
if(%IsExtensible(S)){
return false;
}
var T=OwnPropertyKeys(S);
for(var aF=0;aF<T.length;aF++){
var K=T[aF];
var P=GetOwnPropertyJS(S,K);
if(IsDataDescriptor(P)&&P.isWritable())return false;
if(P.isConfigurable())return false;
}
return true;
}
function ObjectIsExtensible(S){
if(!(%_IsSpecObject(S)))return false;
if(%_IsJSProxy(S)){
return true;
}
return %IsExtensible(S);
}
function ObjectAssign(aX,aY){
"use strict";
var aZ=(%_ToObject(aX));
var ba=%_ArgumentsLength();
if(ba<2)return aZ;
for(var aF=1;aF<ba;++aF){
var bb=%_Arguments(aF);
if((bb==null)){
continue;
}
var y=(%_ToObject(bb));
var bc=OwnPropertyKeys(y);
var bd=bc.length;
for(var aK=0;aK<bd;++aK){
var aO=bc[aK];
if(%IsPropertyEnumerable(y,aO)){
var be=y[aO];
aZ[aO]=be;
}
}
}
return aZ;
}
function ObjectGetProto(){
return %_GetPrototype((%_ToObject(this)));
}
function ObjectSetProto(av){
if((%IS_VAR(this)===null)||(this===(void 0)))throw m(15,"Object.prototype.__proto__");
if(((%_IsSpecObject(av))||(av===null))&&(%_IsSpecObject(this))){
%SetPrototype(this,av);
}
}
function ObjectConstructor(C){
if(h!=new.target&&!(new.target===(void 0))){
return this;
}
if((C===null)||(C===(void 0)))return{};
return(%_ToObject(C));
}
%SetNativeFlag(h);
%SetCode(h,ObjectConstructor);
%AddNamedProperty(h.prototype,"constructor",h,
2);
b.InstallFunctions(h.prototype,2,[
"toString",ObjectToString,
"toLocaleString",ObjectToLocaleString,
"valueOf",ObjectValueOf,
"hasOwnProperty",ObjectHasOwnProperty,
"isPrototypeOf",ObjectIsPrototypeOf,
"propertyIsEnumerable",ObjectPropertyIsEnumerable,
"__defineGetter__",ObjectDefineGetter,
"__lookupGetter__",ObjectLookupGetter,
"__defineSetter__",ObjectDefineSetter,
"__lookupSetter__",ObjectLookupSetter
]);
b.InstallGetterSetter(h.prototype,"__proto__",ObjectGetProto,
ObjectSetProto);
b.InstallFunctions(h,2,[
"assign",ObjectAssign,
"keys",ObjectKeys,
"create",ObjectCreate,
"defineProperty",ObjectDefineProperty,
"defineProperties",ObjectDefineProperties,
"freeze",ObjectFreezeJS,
"getPrototypeOf",ObjectGetPrototypeOf,
"setPrototypeOf",ObjectSetPrototypeOf,
"getOwnPropertyDescriptor",ObjectGetOwnPropertyDescriptor,
"getOwnPropertyNames",ObjectGetOwnPropertyNames,
"is",v,
"isExtensible",ObjectIsExtensible,
"isFrozen",ObjectIsFrozen,
"isSealed",ObjectIsSealed,
"preventExtensions",ObjectPreventExtension,
"seal",ObjectSealJS
]);
function BooleanConstructor(C){
"use strict";
if(%_IsConstructCall()){
%_SetValueOf(this,(!!(C)));
}else{
return(!!(C));
}
}
function BooleanToString(){
var bf=this;
if(!(typeof(bf)==='boolean')){
if(!(%_ClassOf(bf)==='Boolean')){
throw m(59,'Boolean.prototype.toString');
}
bf=%_ValueOf(bf);
}
return bf?'true':'false';
}
function BooleanValueOf(){
if(!(typeof(this)==='boolean')&&!(%_ClassOf(this)==='Boolean')){
throw m(59,'Boolean.prototype.valueOf');
}
return %_ValueOf(this);
}
%SetCode(e,BooleanConstructor);
%FunctionSetPrototype(e,new e(false));
%AddNamedProperty(e.prototype,"constructor",e,
2);
b.InstallFunctions(e.prototype,2,[
"toString",BooleanToString,
"valueOf",BooleanValueOf
]);
function NumberConstructor(C){
"use strict";
var J=%_ArgumentsLength()==0?0:(%_ToNumber(C));
if(%_IsConstructCall()){
%_SetValueOf(this,J);
}else{
return J;
}
}
function NumberToStringJS(B){
var z=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw m(59,'Number.prototype.toString');
}
z=%_ValueOf(this);
}
if((B===(void 0))||B===10){
return %_NumberToString(z);
}
B=(%_ToInteger(B));
if(B<2||B>36)throw k(157);
return %NumberToRadixString(z,B);
}
function NumberToLocaleString(){
return %_CallFunction(this,NumberToStringJS);
}
function NumberValueOf(){
if(!(typeof(this)==='number')&&!(%_ClassOf(this)==='Number')){
throw m(59,'Number.prototype.valueOf');
}
return %_ValueOf(this);
}
function NumberToFixedJS(bg){
var C=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw m(37,
"Number.prototype.toFixed",this);
}
C=%_ValueOf(this);
}
var E=(%_ToInteger(bg));
if(E<0||E>20){
throw k(153,"toFixed() digits");
}
if((!%_IsSmi(%IS_VAR(C))&&!(C==C)))return"NaN";
if(C==(1/0))return"Infinity";
if(C==-(1/0))return"-Infinity";
return %NumberToFixed(C,E);
}
function NumberToExponentialJS(bg){
var C=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw m(37,
"Number.prototype.toExponential",this);
}
C=%_ValueOf(this);
}
var E=(bg===(void 0))?(void 0):(%_ToInteger(bg));
if((!%_IsSmi(%IS_VAR(C))&&!(C==C)))return"NaN";
if(C==(1/0))return"Infinity";
if(C==-(1/0))return"-Infinity";
if((E===(void 0))){
E=-1;
}else if(E<0||E>20){
throw k(153,"toExponential()");
}
return %NumberToExponential(C,E);
}
function NumberToPrecisionJS(bh){
var C=this;
if(!(typeof(this)==='number')){
if(!(%_ClassOf(this)==='Number')){
throw m(37,
"Number.prototype.toPrecision",this);
}
C=%_ValueOf(this);
}
if((bh===(void 0)))return(%_ToString(C));
var ae=(%_ToInteger(bh));
if((!%_IsSmi(%IS_VAR(C))&&!(C==C)))return"NaN";
if(C==(1/0))return"Infinity";
if(C==-(1/0))return"-Infinity";
if(ae<1||ae>21){
throw k(156);
}
return %NumberToPrecision(C,ae);
}
function NumberIsFinite(z){
return(typeof(z)==='number')&&(%_IsSmi(%IS_VAR(z))||((z==z)&&(z!=1/0)&&(z!=-1/0)));
}
function NumberIsInteger(z){
return NumberIsFinite(z)&&(%_ToInteger(z))==z;
}
function NumberIsNaN(z){
return(typeof(z)==='number')&&(!%_IsSmi(%IS_VAR(z))&&!(z==z));
}
function NumberIsSafeInteger(z){
if(NumberIsFinite(z)){
var bi=(%_ToInteger(z));
if(bi==z){
return n(bi)<=9007199254740991;
}
}
return false;
}
%SetCode(g,NumberConstructor);
%FunctionSetPrototype(g,new g(0));
%OptimizeObjectForAddingMultipleProperties(g.prototype,8);
%AddNamedProperty(g.prototype,"constructor",g,
2);
b.InstallConstants(g,[
"MAX_VALUE",1.7976931348623157e+308,
"MIN_VALUE",5e-324,
"NaN",o,
"NEGATIVE_INFINITY",-(1/0),
"POSITIVE_INFINITY",(1/0),
"MAX_SAFE_INTEGER",%_MathPow(2,53)-1,
"MIN_SAFE_INTEGER",-%_MathPow(2,53)+1,
"EPSILON",%_MathPow(2,-52)
]);
b.InstallFunctions(g.prototype,2,[
"toString",NumberToStringJS,
"toLocaleString",NumberToLocaleString,
"valueOf",NumberValueOf,
"toFixed",NumberToFixedJS,
"toExponential",NumberToExponentialJS,
"toPrecision",NumberToPrecisionJS
]);
b.InstallFunctions(g,2,[
"isFinite",NumberIsFinite,
"isInteger",NumberIsInteger,
"isNaN",NumberIsNaN,
"isSafeInteger",NumberIsSafeInteger,
"parseInt",GlobalParseInt,
"parseFloat",GlobalParseFloat
]);
%SetForceInlineFlag(NumberIsNaN);
function NativeCodeFunctionSourceString(ai){
var K=%FunctionGetName(ai);
if(K){
return'function '+K+'() { [native code] }';
}
return'function () { [native code] }';
}
function FunctionSourceString(ai){
while(%IsJSFunctionProxy(ai)){
ai=%GetCallTrap(ai);
}
if(!(%_IsFunction(ai))){
throw m(59,'Function.prototype.toString');
}
if(%FunctionHidesSource(ai)){
return NativeCodeFunctionSourceString(ai);
}
var bj=%ClassGetSourceCode(ai);
if((typeof(bj)==='string')){
return bj;
}
var bk=%FunctionGetSourceCode(ai);
if(!(typeof(bk)==='string')){
return NativeCodeFunctionSourceString(ai);
}
if(%FunctionIsArrow(ai)){
return bk;
}
var K=%FunctionNameShouldPrintAsAnonymous(ai)
?'anonymous'
:%FunctionGetName(ai);
var bl=%FunctionIsGenerator(ai);
var bm=%FunctionIsConciseMethod(ai)
?(bl?'*':'')
:(bl?'function* ':'function ');
return bm+K+bk;
}
function FunctionToString(){
return FunctionSourceString(this);
}
function FunctionBind(bn){
if(!(typeof(this)==='function'))throw m(34);
var bo=function(){
"use strict";
if(%_IsConstructCall()){
return %NewObjectFromBound(bo);
}
var bp=%BoundFunctionGetBindings(bo);
var bq=%_ArgumentsLength();
if(bq==0){
return %Apply(bp[0],bp[1],bp,2,bp.length-2);
}
if(bp.length===2){
return %Apply(bp[0],bp[1],arguments,0,bq);
}
var br=bp.length-2;
var bs=new i(br+bq);
for(var aF=0;aF<br;aF++){
bs[aF]=bp[aF+2];
}
for(var aK=0;aK<bq;aK++){
bs[aF++]=%_Arguments(aK);
}
return %Apply(bp[0],bp[1],bs,0,br+bq);
};
var bt=0;
var bu=this.length;
if((typeof bu==="number")&&
((bu>>>0)===bu)){
var bq=%_ArgumentsLength();
if(bq>0)bq--;
bt=bu-bq;
if(bt<0)bt=0;
}
var aj=%FunctionBindArguments(bo,this,
bn,bt);
var K=this.name;
var bv=(typeof(K)==='string')?K:"";
%DefineDataPropertyUnchecked(aj,"name","bound "+bv,
2|1);
return aj;
}
function NewFunctionString(bw,bx){
var ax=bw.length;
var ae='';
if(ax>1){
ae=(%_ToString(bw[0]));
for(var aF=1;aF<ax-1;aF++){
ae+=','+(%_ToString(bw[aF]));
}
if(%_CallFunction(ae,')',w)!=-1){
throw l(196);
}
ae+='\n/'+'**/';
}
var by=(ax>0)?(%_ToString(bw[ax-1])):'';
return'('+bx+'('+ae+') {\n'+by+'\n})';
}
function FunctionConstructor(bz){
var bk=NewFunctionString(arguments,'function');
var D=%GlobalProxy(FunctionConstructor);
var ai=%_CallFunction(D,%CompileString(bk,true));
return %CompleteFunctionConstruction(ai,f,new.target);
}
%SetCode(f,FunctionConstructor);
%AddNamedProperty(f.prototype,"constructor",f,
2);
b.InstallFunctions(f.prototype,2,[
"bind",FunctionBind,
"toString",FunctionToString
]);
function GetIterator(S,bA){
if((bA===(void 0))){
bA=S[j];
}
if(!(typeof(bA)==='function')){
throw m(60,S);
}
var bB=%_CallFunction(S,bA);
if(!(%_IsSpecObject(bB))){
throw m(54,bB);
}
return bB;
}
b.Export(function(aZ){
aZ.Delete=Delete;
aZ.FunctionSourceString=FunctionSourceString;
aZ.GetIterator=GetIterator;
aZ.GetMethod=GetMethod;
aZ.IsFinite=GlobalIsFinite;
aZ.IsNaN=GlobalIsNaN;
aZ.NewFunctionString=NewFunctionString;
aZ.NumberIsNaN=NumberIsNaN;
aZ.ObjectDefineProperties=ObjectDefineProperties;
aZ.ObjectDefineProperty=ObjectDefineProperty;
aZ.ObjectFreeze=ObjectFreezeJS;
aZ.ObjectGetOwnPropertyKeys=ObjectGetOwnPropertyKeys;
aZ.ObjectHasOwnProperty=ObjectHasOwnProperty;
aZ.ObjectIsFrozen=ObjectIsFrozen;
aZ.ObjectIsSealed=ObjectIsSealed;
aZ.ObjectToString=ObjectToString;
aZ.ToNameArray=ToNameArray;
});
%InstallToContext([
"global_eval_fun",GlobalEval,
"object_value_of",ObjectValueOf,
"object_to_string",ObjectToString,
"object_get_own_property_descriptor",ObjectGetOwnPropertyDescriptor,
"to_complete_property_descriptor",ToCompletePropertyDescriptor,
]);
})

symbol!
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Symbol;
var e=b.ImportNow("has_instance_symbol");
var f=
b.ImportNow("is_concat_spreadable_symbol");
var g=b.ImportNow("is_regexp_symbol");
var h=b.ImportNow("iterator_symbol");
var i;
var j;
var k=b.ImportNow("to_primitive_symbol");
var l=b.ImportNow("to_string_tag_symbol");
var m=b.ImportNow("unscopables_symbol");
b.Import(function(n){
i=n.MakeTypeError;
j=n.ObjectGetOwnPropertyKeys;
});
function SymbolToPrimitive(o){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw i(37,
"Symbol.prototype [ @@toPrimitive ]",this);
}
return %_ValueOf(this);
}
function SymbolToString(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw i(37,
"Symbol.prototype.toString",this);
}
return %SymbolDescriptiveString(%_ValueOf(this));
}
function SymbolValueOf(){
if(!((typeof(this)==='symbol')||(%_ClassOf(this)==='Symbol'))){
throw i(37,
"Symbol.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function SymbolFor(p){
p=(%_ToString(p));
var q=%SymbolRegistry();
if((q.for[p]===(void 0))){
var r=%CreateSymbol(p);
q.for[p]=r;
q.keyFor[r]=p;
}
return q.for[p];
}
function SymbolKeyFor(r){
if(!(typeof(r)==='symbol'))throw i(116,r);
return %SymbolRegistry().keyFor[r];
}
function ObjectGetOwnPropertySymbols(s){
s=(%_ToObject(s));
return j(s,8);
}
%FunctionSetPrototype(d,new c());
b.InstallConstants(d,[
"iterator",h,
"toPrimitive",k,
"unscopables",m,
]);
b.InstallFunctions(d,2,[
"for",SymbolFor,
"keyFor",SymbolKeyFor
]);
%AddNamedProperty(
d.prototype,"constructor",d,2);
%AddNamedProperty(
d.prototype,l,"Symbol",2|1);
b.InstallFunctions(d.prototype,2|1,[
k,SymbolToPrimitive
]);
b.InstallFunctions(d.prototype,2,[
"toString",SymbolToString,
"valueOf",SymbolValueOf
]);
b.InstallFunctions(c,2,[
"getOwnPropertySymbols",ObjectGetOwnPropertySymbols
]);
b.Export(function(t){
t.SymbolToString=SymbolToString;
})
})

arrayâw
(function(a,b,c){
"use strict";
%CheckIsBootstrapping();
var d;
var e;
var f;
var g=a.Array;
var h=b.InternalArray;
var i=b.InternalPackedArray;
var j;
var k;
var l;
var m;
var n;
var o;
var p;
var q;
var r;
var s=b.ImportNow("unscopables_symbol");
b.Import(function(t){
d=t.AddIndexedProperty;
e=t.Delete;
j=t.MakeTypeError;
k=t.MinSimple;
l=t.ObjectHasOwnProperty;
m=t.ObjectIsFrozen;
n=t.ObjectIsSealed;
o=t.ObjectToString;
p=t.ObserveBeginPerformSplice;
q=t.ObserveEndPerformSplice;
r=t.ObserveEnqueueSpliceRecord;
});
b.ImportFromExperimental(function(t){
f=t.FLAG_harmony_tolength;
});
var u=new h();
function GetSortedArrayKeys(v,w){
var x=new h();
if((typeof(w)==='number')){
var y=w;
for(var z=0;z<y;++z){
var A=v[z];
if(!(A===(void 0))||z in v){
x.push(z);
}
}
}else{
var B=w.length;
for(var C=0;C<B;++C){
var D=w[C];
if(!(D===(void 0))){
var A=v[D];
if(!(A===(void 0))||D in v){
x.push(D);
}
}
}
x.sort(function(E,F){return E-F;});
}
return x;
}
function SparseJoinWithSeparatorJS(v,G,H,I){
var x=GetSortedArrayKeys(v,%GetArrayKeys(v,G));
var J=0;
var K=new h(x.length*2);
var L=-1;
for(var z=0;z<x.length;z++){
var D=x[z];
if(D!=L){
var A=v[D];
if(!(typeof(A)==='string'))A=H(A);
K[z*2]=D;
K[z*2+1]=A;
L=D;
}
}
return %SparseJoinWithSeparator(K,G,I);
}
function SparseJoin(v,G,H){
var x=GetSortedArrayKeys(v,%GetArrayKeys(v,G));
var M=-1;
var N=x.length;
var K=new h(N);
var O=0;
for(var z=0;z<N;z++){
var D=x[z];
if(D!=M){
var A=v[D];
if(!(typeof(A)==='string'))A=H(A);
K[O++]=A;
M=D;
}
}
return %StringBuilderConcat(K,O,'');
}
function UseSparseVariant(v,B,P,Q){
if(!P||B<1000||%IsObserved(v)||
%HasComplexElements(v)){
return false;
}
if(!%_IsSmi(B)){
return true;
}
var R=B>>2;
var S=%EstimateNumberOfElements(v);
return(S<R)&&
(Q>S*4);
}
function Join(v,B,I,H){
if(B==0)return'';
var P=(%_IsArray(v));
if(P){
if(!%PushIfAbsent(u,v))return'';
}
try{
if(UseSparseVariant(v,B,P,B)){
%NormalizeElements(v);
if(I.length==0){
return SparseJoin(v,B,H);
}else{
return SparseJoinWithSeparatorJS(v,B,H,I);
}
}
if(B==1){
var A=v[0];
if((typeof(A)==='string'))return A;
return H(A);
}
var K=new h(B);
if(I.length==0){
var O=0;
for(var z=0;z<B;z++){
var A=v[z];
if(!(typeof(A)==='string'))A=H(A);
K[O++]=A;
}
K.length=O;
var T=%_FastOneByteArrayJoin(K,'');
if(!(T===(void 0)))return T;
return %StringBuilderConcat(K,O,'');
}
if(!(typeof(v[0])==='number')){
for(var z=0;z<B;z++){
var A=v[z];
if(!(typeof(A)==='string'))A=H(A);
K[z]=A;
}
}else{
for(var z=0;z<B;z++){
var A=v[z];
if((typeof(A)==='number')){
A=%_NumberToString(A);
}else if(!(typeof(A)==='string')){
A=H(A);
}
K[z]=A;
}
}
var T=%_FastOneByteArrayJoin(K,I);
if(!(T===(void 0)))return T;
return %StringBuilderJoin(K,B,I);
}finally{
if(P)u.length=u.length-1;
}
}
function ConvertToString(U){
if((U==null)){
return'';
}else{
return(%_ToString(U));
}
}
function ConvertToLocaleString(A){
if((A==null)){
return'';
}else{
return(%_ToString(A.toLocaleString()));
}
}
function SparseSlice(v,V,W,G,X){
var w=%GetArrayKeys(v,V+W);
if((typeof(w)==='number')){
var y=w;
for(var z=V;z<y;++z){
var Y=v[z];
if(!(Y===(void 0))||z in v){
d(X,z-V,Y);
}
}
}else{
var B=w.length;
for(var C=0;C<B;++C){
var D=w[C];
if(!(D===(void 0))){
if(D>=V){
var Y=v[D];
if(!(Y===(void 0))||D in v){
d(X,D-V,Y);
}
}
}
}
}
}
function SparseMove(v,V,W,G,Z){
if(Z===W)return;
var aa=new h(
k(G-W+Z,0xffffffff));
var ab;
var w=%GetArrayKeys(v,G);
if((typeof(w)==='number')){
var y=w;
for(var z=0;z<V&&z<y;++z){
var Y=v[z];
if(!(Y===(void 0))||z in v){
aa[z]=Y;
}
}
for(var z=V+W;z<y;++z){
var Y=v[z];
if(!(Y===(void 0))||z in v){
aa[z-W+Z]=Y;
}
}
}else{
var B=w.length;
for(var C=0;C<B;++C){
var D=w[C];
if(!(D===(void 0))){
if(D<V){
var Y=v[D];
if(!(Y===(void 0))||D in v){
aa[D]=Y;
}
}else if(D>=V+W){
var Y=v[D];
if(!(Y===(void 0))||D in v){
var ac=D-W+Z;
aa[ac]=Y;
if(ac>0xfffffffe){
ab=ab||new h();
ab.push(ac);
}
}
}
}
}
}
%MoveArrayContents(aa,v);
if(!(ab===(void 0))){
var B=ab.length;
for(var z=0;z<B;++z){
var D=ab[z];
v[D]=aa[D];
}
}
}
function SimpleSlice(v,V,W,G,X){
var P=(%_IsArray(v));
for(var z=0;z<W;z++){
var ad=V+z;
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(ad<v.length):(ad in v))){
var Y=v[ad];
d(X,z,Y);
}
}
}
function SimpleMove(v,V,W,G,Z){
var P=(%_IsArray(v));
if(Z!==W){
if(Z>W){
for(var z=G-W;z>V;z--){
var ae=z+W-1;
var af=z+Z-1;
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(ae<v.length):(ae in v))){
v[af]=v[ae];
}else{
delete v[af];
}
}
}else{
for(var z=V;z<G-W;z++){
var ae=z+W;
var af=z+Z;
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(ae<v.length):(ae in v))){
v[af]=v[ae];
}else{
delete v[af];
}
}
for(var z=G;z>G-W+Z;z--){
delete v[z-1];
}
}
}
}
function ArrayToString(){
var v;
var ag;
if((%_IsArray(this))){
ag=this.join;
if(ag===ArrayJoin){
return Join(this,this.length,',',ConvertToString);
}
v=this;
}else{
v=(%_ToObject(this));
ag=v.join;
}
if(!(typeof(ag)==='function')){
return %_CallFunction(v,o);
}
return %_Call(ag,v);
}
function InnerArrayToLocaleString(v,B){
var G=(f?(%_ToLength(B)):((B)>>>0));
if(G===0)return"";
return Join(v,G,',',ConvertToLocaleString);
}
function ArrayToLocaleString(){
var v=(%_ToObject(this));
var ah=v.length;
return InnerArrayToLocaleString(v,ah);
}
function InnerArrayJoin(I,v,B){
if((I===(void 0))){
I=',';
}else{
I=(%_ToString(I));
}
var T=%_FastOneByteArrayJoin(v,I);
if(!(T===(void 0)))return T;
if(B===1){
var A=v[0];
if((A==null))return'';
return(%_ToString(A));
}
return Join(v,B,I,ConvertToString);
}
function ArrayJoin(I){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.join");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayJoin(I,v,B);
}
function ObservedArrayPop(ai){
ai--;
var aj=this[ai];
try{
p(this);
delete this[ai];
this.length=ai;
}finally{
q(this);
r(this,ai,[aj],0);
}
return aj;
}
function ArrayPop(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.pop");
var v=(%_ToObject(this));
var ai=(f?(%_ToLength(v.length)):((v.length)>>>0));
if(ai==0){
v.length=ai;
return;
}
if(%IsObserved(v))
return ObservedArrayPop.call(v,ai);
ai--;
var aj=v[ai];
e(v,ai,true);
v.length=ai;
return aj;
}
function ObservedArrayPush(){
var ai=(f?(%_ToLength(this.length)):((this.length)>>>0));
var ak=%_ArgumentsLength();
try{
p(this);
for(var z=0;z<ak;z++){
this[z+ai]=%_Arguments(z);
}
var al=ai+ak;
this.length=al;
}finally{
q(this);
r(this,ai,[],ak);
}
return al;
}
function ArrayPush(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.push");
if(%IsObserved(this))
return ObservedArrayPush.apply(this,arguments);
var v=(%_ToObject(this));
var ai=(f?(%_ToLength(v.length)):((v.length)>>>0));
var ak=%_ArgumentsLength();
if(ak>(1<<30)||(ai-(1<<30))+ak>9007199254740991-(1<<30)){
throw j(193,ak,ai);
}
for(var z=0;z<ak;z++){
v[z+ai]=%_Arguments(z);
}
var al=ai+ak;
v.length=al;
return al;
}
function SparseReverse(v,G){
var x=GetSortedArrayKeys(v,%GetArrayKeys(v,G));
var am=x.length-1;
var an=0;
while(an<=am){
var z=x[an];
var ao=x[am];
var ap=G-ao-1;
var aq,ar;
if(ap<=z){
ar=ao;
while(x[--am]==ao){}
aq=ap;
}
if(ap>=z){
aq=z;
while(x[++an]==z){}
ar=G-z-1;
}
var as=v[aq];
if(!(as===(void 0))||aq in v){
var at=v[ar];
if(!(at===(void 0))||ar in v){
v[aq]=at;
v[ar]=as;
}else{
v[ar]=as;
delete v[aq];
}
}else{
var at=v[ar];
if(!(at===(void 0))||ar in v){
v[aq]=at;
delete v[ar];
}
}
}
}
function PackedArrayReverse(v,G){
var ao=G-1;
for(var z=0;z<ao;z++,ao--){
var as=v[z];
var at=v[ao];
v[z]=at;
v[ao]=as;
}
return v;
}
function GenericArrayReverse(v,G){
var ao=G-1;
for(var z=0;z<ao;z++,ao--){
if(z in v){
var as=v[z];
if(ao in v){
var at=v[ao];
v[z]=at;
v[ao]=as;
}else{
v[ao]=as;
delete v[z];
}
}else{
if(ao in v){
var at=v[ao];
v[z]=at;
delete v[ao];
}
}
}
return v;
}
function ArrayReverse(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.reverse");
var v=(%_ToObject(this));
var G=(f?(%_ToLength(v.length)):((v.length)>>>0));
var au=(%_IsArray(v));
if(UseSparseVariant(v,G,au,G)){
%NormalizeElements(v);
SparseReverse(v,G);
return v;
}else if(au&&%_HasFastPackedElements(v)){
return PackedArrayReverse(v,G);
}else{
return GenericArrayReverse(v,G);
}
}
function ObservedArrayShift(G){
var av=this[0];
try{
p(this);
SimpleMove(this,0,1,G,0);
this.length=G-1;
}finally{
q(this);
r(this,0,[av],0);
}
return av;
}
function ArrayShift(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.shift");
var v=(%_ToObject(this));
var G=(f?(%_ToLength(v.length)):((v.length)>>>0));
if(G===0){
v.length=0;
return;
}
if(n(v))throw j(11);
if(%IsObserved(v))
return ObservedArrayShift.call(v,G);
var av=v[0];
if(UseSparseVariant(v,G,(%_IsArray(v)),G)){
SparseMove(v,0,1,G,0);
}else{
SimpleMove(v,0,1,G,0);
}
v.length=G-1;
return av;
}
function ObservedArrayUnshift(){
var G=(f?(%_ToLength(this.length)):((this.length)>>>0));
var aw=%_ArgumentsLength();
try{
p(this);
SimpleMove(this,0,0,G,aw);
for(var z=0;z<aw;z++){
this[z]=%_Arguments(z);
}
var al=G+aw;
this.length=al;
}finally{
q(this);
r(this,0,[],aw);
}
return al;
}
function ArrayUnshift(ax){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.unshift");
if(%IsObserved(this))
return ObservedArrayUnshift.apply(this,arguments);
var v=(%_ToObject(this));
var G=(f?(%_ToLength(v.length)):((v.length)>>>0));
var aw=%_ArgumentsLength();
if(G>0&&UseSparseVariant(v,G,(%_IsArray(v)),G)&&
!n(v)){
SparseMove(v,0,0,G,aw);
}else{
SimpleMove(v,0,0,G,aw);
}
for(var z=0;z<aw;z++){
v[z]=%_Arguments(z);
}
var al=G+aw;
v.length=al;
return al;
}
function ArraySlice(ay,az){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.slice");
var v=(%_ToObject(this));
var G=(f?(%_ToLength(v.length)):((v.length)>>>0));
var V=(%_ToInteger(ay));
var aA=G;
if(!(az===(void 0)))aA=(%_ToInteger(az));
if(V<0){
V+=G;
if(V<0)V=0;
}else{
if(V>G)V=G;
}
if(aA<0){
aA+=G;
if(aA<0)aA=0;
}else{
if(aA>G)aA=G;
}
var T=[];
if(aA<V)return T;
if(UseSparseVariant(v,G,(%_IsArray(v)),aA-V)){
%NormalizeElements(v);
%NormalizeElements(T);
SparseSlice(v,V,aA-V,G,T);
}else{
SimpleSlice(v,V,aA-V,G,T);
}
T.length=aA-V;
return T;
}
function ComputeSpliceStartIndex(V,G){
if(V<0){
V+=G;
return V<0?0:V;
}
return V>G?G:V;
}
function ComputeSpliceDeleteCount(aB,aw,G,V){
var W=0;
if(aw==1)
return G-V;
W=(%_ToInteger(aB));
if(W<0)
return 0;
if(W>G-V)
return G-V;
return W;
}
function ObservedArraySplice(ay,aB){
var aw=%_ArgumentsLength();
var G=(f?(%_ToLength(this.length)):((this.length)>>>0));
var V=ComputeSpliceStartIndex((%_ToInteger(ay)),G);
var W=ComputeSpliceDeleteCount(aB,aw,G,
V);
var X=[];
X.length=W;
var aC=aw>2?aw-2:0;
try{
p(this);
SimpleSlice(this,V,W,G,X);
SimpleMove(this,V,W,G,aC);
var z=V;
var aD=2;
var aE=%_ArgumentsLength();
while(aD<aE){
this[z++]=%_Arguments(aD++);
}
this.length=G-W+aC;
}finally{
q(this);
if(X.length||aC){
r(this,
V,
X.slice(),
aC);
}
}
return X;
}
function ArraySplice(ay,aB){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.splice");
if(%IsObserved(this))
return ObservedArraySplice.apply(this,arguments);
var aw=%_ArgumentsLength();
var v=(%_ToObject(this));
var G=(f?(%_ToLength(v.length)):((v.length)>>>0));
var V=ComputeSpliceStartIndex((%_ToInteger(ay)),G);
var W=ComputeSpliceDeleteCount(aB,aw,G,
V);
var X=[];
X.length=W;
var aC=aw>2?aw-2:0;
if(W!=aC&&n(v)){
throw j(11);
}else if(W>0&&m(v)){
throw j(10);
}
var aF=W;
if(aC!=W){
aF+=G-V-W;
}
if(UseSparseVariant(v,G,(%_IsArray(v)),aF)){
%NormalizeElements(v);
%NormalizeElements(X);
SparseSlice(v,V,W,G,X);
SparseMove(v,V,W,G,aC);
}else{
SimpleSlice(v,V,W,G,X);
SimpleMove(v,V,W,G,aC);
}
var z=V;
var aD=2;
var aE=%_ArgumentsLength();
while(aD<aE){
v[z++]=%_Arguments(aD++);
}
v.length=G-W+aC;
return X;
}
function InnerArraySort(v,B,aG){
if(!(typeof(aG)==='function')){
aG=function(U,aH){
if(U===aH)return 0;
if(%_IsSmi(U)&&%_IsSmi(aH)){
return %SmiLexicographicCompare(U,aH);
}
U=(%_ToString(U));
aH=(%_ToString(aH));
if(U==aH)return 0;
else return U<aH?-1:1;
};
}
var aI=function InsertionSort(E,t,aJ){
for(var z=t+1;z<aJ;z++){
var aK=E[z];
for(var ao=z-1;ao>=t;ao--){
var aL=E[ao];
var aM=aG(aL,aK);
if(aM>0){
E[ao+1]=aL;
}else{
break;
}
}
E[ao+1]=aK;
}
};
var aN=function(E,t,aJ){
var aO=new h();
var aP=200+((aJ-t)&15);
var ao=0;
t+=1;
aJ-=1;
for(var z=t;z<aJ;z+=aP){
aO[ao]=[z,E[z]];
ao++;
}
aO.sort(function(E,F){
return aG(E[1],F[1]);
});
var aQ=aO[aO.length>>1][0];
return aQ;
}
var aR=function QuickSort(E,t,aJ){
var aQ=0;
while(true){
if(aJ-t<=10){
aI(E,t,aJ);
return;
}
if(aJ-t>1000){
aQ=aN(E,t,aJ);
}else{
aQ=t+((aJ-t)>>1);
}
var aS=E[t];
var aT=E[aJ-1];
var aU=E[aQ];
var aV=aG(aS,aT);
if(aV>0){
var aL=aS;
aS=aT;
aT=aL;
}
var aW=aG(aS,aU);
if(aW>=0){
var aL=aS;
aS=aU;
aU=aT;
aT=aL;
}else{
var aX=aG(aT,aU);
if(aX>0){
var aL=aT;
aT=aU;
aU=aL;
}
}
E[t]=aS;
E[aJ-1]=aU;
var aY=aT;
var aZ=t+1;
var ba=aJ-1;
E[aQ]=E[aZ];
E[aZ]=aY;
partition:for(var z=aZ+1;z<ba;z++){
var aK=E[z];
var aM=aG(aK,aY);
if(aM<0){
E[z]=E[aZ];
E[aZ]=aK;
aZ++;
}else if(aM>0){
do{
ba--;
if(ba==z)break partition;
var bb=E[ba];
aM=aG(bb,aY);
}while(aM>0);
E[z]=E[ba];
E[ba]=aK;
if(aM<0){
aK=E[z];
E[z]=E[aZ];
E[aZ]=aK;
aZ++;
}
}
}
if(aJ-ba<aZ-t){
aR(E,ba,aJ);
aJ=aZ;
}else{
aR(E,t,aZ);
t=ba;
}
}
};
var bc=function CopyFromPrototype(bd,B){
var be=0;
for(var bf=%_GetPrototype(bd);bf;bf=%_GetPrototype(bf)){
var w=%GetArrayKeys(bf,B);
if((typeof(w)==='number')){
var bg=w;
for(var z=0;z<bg;z++){
if(!(%_CallFunction(bd,z,l))&&(%_CallFunction(bf,z,l))){
bd[z]=bf[z];
if(z>=be){be=z+1;}
}
}
}else{
for(var z=0;z<w.length;z++){
var ad=w[z];
if(!(ad===(void 0))&&!(%_CallFunction(bd,ad,l))
&&(%_CallFunction(bf,ad,l))){
bd[ad]=bf[ad];
if(ad>=be){be=ad+1;}
}
}
}
}
return be;
};
var bh=function(bd,t,aJ){
for(var bf=%_GetPrototype(bd);bf;bf=%_GetPrototype(bf)){
var w=%GetArrayKeys(bf,aJ);
if((typeof(w)==='number')){
var bg=w;
for(var z=t;z<bg;z++){
if((%_CallFunction(bf,z,l))){
bd[z]=(void 0);
}
}
}else{
for(var z=0;z<w.length;z++){
var ad=w[z];
if(!(ad===(void 0))&&t<=ad&&
(%_CallFunction(bf,ad,l))){
bd[ad]=(void 0);
}
}
}
}
};
var bi=function SafeRemoveArrayHoles(bd){
var bj=0;
var bk=B-1;
var bl=0;
while(bj<bk){
while(bj<bk&&
!(bd[bj]===(void 0))){
bj++;
}
if(!(%_CallFunction(bd,bj,l))){
bl++;
}
while(bj<bk&&
(bd[bk]===(void 0))){
if(!(%_CallFunction(bd,bk,l))){
bl++;
}
bk--;
}
if(bj<bk){
bd[bj]=bd[bk];
bd[bk]=(void 0);
}
}
if(!(bd[bj]===(void 0)))bj++;
var z;
for(z=bj;z<B-bl;z++){
bd[z]=(void 0);
}
for(z=B-bl;z<B;z++){
if(z in %_GetPrototype(bd)){
bd[z]=(void 0);
}else{
delete bd[z];
}
}
return bj;
};
if(B<2)return v;
var P=(%_IsArray(v));
var bm;
if(!P){
bm=bc(v,B);
}
var bn=%RemoveArrayHoles(v,B);
if(bn==-1){
bn=bi(v);
}
aR(v,0,bn);
if(!P&&(bn+1<bm)){
bh(v,bn,bm);
}
return v;
}
function ArraySort(aG){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.sort");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArraySort(v,B,aG);
}
function InnerArrayFilter(bo,bp,v,B){
if(!(typeof(bo)==='function'))throw j(13,bo);
var bq=new h();
var br=0;
var P=(%_IsArray(v));
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bo));
for(var z=0;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bo);
if(%_Call(bo,bp,aK,z,v)){
bq[br++]=aK;
}
}
}
var T=new g();
%MoveArrayContents(bq,T);
return T;
}
function ArrayFilter(bo,bp){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.filter");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayFilter(bo,bp,v,B);
}
function InnerArrayForEach(bo,bp,v,B){
if(!(typeof(bo)==='function'))throw j(13,bo);
var P=(%_IsArray(v));
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bo));
for(var z=0;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bo);
%_Call(bo,bp,aK,z,v);
}
}
}
function ArrayForEach(bo,bp){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.forEach");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
InnerArrayForEach(bo,bp,v,B);
}
function InnerArraySome(bo,bp,v,B){
if(!(typeof(bo)==='function'))throw j(13,bo);
var P=(%_IsArray(v));
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bo));
for(var z=0;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bo);
if(%_Call(bo,bp,aK,z,v))return true;
}
}
return false;
}
function ArraySome(bo,bp){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.some");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArraySome(bo,bp,v,B);
}
function InnerArrayEvery(bo,bp,v,B){
if(!(typeof(bo)==='function'))throw j(13,bo);
var P=(%_IsArray(v));
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bo));
for(var z=0;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bo);
if(!%_Call(bo,bp,aK,z,v))return false;
}
}
return true;
}
function ArrayEvery(bo,bp){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.every");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayEvery(bo,bp,v,B);
}
function InnerArrayMap(bo,bp,v,B){
if(!(typeof(bo)==='function'))throw j(13,bo);
var bq=new h(B);
var P=(%_IsArray(v));
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bo));
for(var z=0;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bo);
bq[z]=%_Call(bo,bp,aK,z,v);
}
}
var T=new g();
%MoveArrayContents(bq,T);
return T;
}
function ArrayMap(bo,bp){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.map");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayMap(bo,bp,v,B);
}
function InnerArrayIndexOf(v,aK,ad,B){
if(B==0)return-1;
if((ad===(void 0))){
ad=0;
}else{
ad=(%_ToInteger(ad));
if(ad<0){
ad=B+ad;
if(ad<0)ad=0;
}
}
var bt=ad;
var be=B;
if(UseSparseVariant(v,B,(%_IsArray(v)),be-bt)){
%NormalizeElements(v);
var w=%GetArrayKeys(v,B);
if((typeof(w)==='number')){
be=w;
}else{
if(w.length==0)return-1;
var bu=GetSortedArrayKeys(v,w);
var ai=bu.length;
var z=0;
while(z<ai&&bu[z]<ad)z++;
while(z<ai){
var D=bu[z];
if(!(D===(void 0))&&v[D]===aK)return D;
z++;
}
return-1;
}
}
if(!(aK===(void 0))){
for(var z=bt;z<be;z++){
if(v[z]===aK)return z;
}
return-1;
}
for(var z=bt;z<be;z++){
if((v[z]===(void 0))&&z in v){
return z;
}
}
return-1;
}
function ArrayIndexOf(aK,ad){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.indexOf");
var B=(f?(%_ToLength(this.length)):((this.length)>>>0));
return InnerArrayIndexOf(this,aK,ad,B);
}
function InnerArrayLastIndexOf(v,aK,ad,B,bv){
if(B==0)return-1;
if(bv<2){
ad=B-1;
}else{
ad=(%_ToInteger(ad));
if(ad<0)ad+=B;
if(ad<0)return-1;
else if(ad>=B)ad=B-1;
}
var bt=0;
var be=ad;
if(UseSparseVariant(v,B,(%_IsArray(v)),ad)){
%NormalizeElements(v);
var w=%GetArrayKeys(v,ad+1);
if((typeof(w)==='number')){
be=w;
}else{
if(w.length==0)return-1;
var bu=GetSortedArrayKeys(v,w);
var z=bu.length-1;
while(z>=0){
var D=bu[z];
if(!(D===(void 0))&&v[D]===aK)return D;
z--;
}
return-1;
}
}
if(!(aK===(void 0))){
for(var z=be;z>=bt;z--){
if(v[z]===aK)return z;
}
return-1;
}
for(var z=be;z>=bt;z--){
if((v[z]===(void 0))&&z in v){
return z;
}
}
return-1;
}
function ArrayLastIndexOf(aK,ad){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.lastIndexOf");
var B=(f?(%_ToLength(this.length)):((this.length)>>>0));
return InnerArrayLastIndexOf(this,aK,ad,B,
%_ArgumentsLength());
}
function InnerArrayReduce(bw,Y,v,B,bv){
if(!(typeof(bw)==='function')){
throw j(13,bw);
}
var P=(%_IsArray(v));
var z=0;
find_initial:if(bv<2){
for(;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
Y=v[z++];
break find_initial;
}
}
throw j(98);
}
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bw));
for(;z<B;z++){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bw);
Y=bw(Y,aK,z,v);
}
}
return Y;
}
function ArrayReduce(bw,Y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.reduce");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayReduce(bw,Y,v,B,
%_ArgumentsLength());
}
function InnerArrayReduceRight(bw,Y,v,B,
bv){
if(!(typeof(bw)==='function')){
throw j(13,bw);
}
var P=(%_IsArray(v));
var z=B-1;
find_initial:if(bv<2){
for(;z>=0;z--){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
Y=v[z--];
break find_initial;
}
}
throw j(98);
}
var bs=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(bw));
for(;z>=0;z--){
if(((P&&%_HasFastPackedElements(%IS_VAR(v)))?(z<v.length):(z in v))){
var aK=v[z];
if(bs)%DebugPrepareStepInIfStepping(bw);
Y=bw(Y,aK,z,v);
}
}
return Y;
}
function ArrayReduceRight(bw,Y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"Array.prototype.reduceRight");
var v=(%_ToObject(this));
var B=(f?(%_ToLength(v.length)):((v.length)>>>0));
return InnerArrayReduceRight(bw,Y,v,B,
%_ArgumentsLength());
}
function ArrayIsArray(bd){
return(%_IsArray(bd));
}
%AddNamedProperty(g.prototype,"constructor",g,
2);
var bx={
__proto__:null,
copyWithin:true,
entries:true,
fill:true,
find:true,
findIndex:true,
keys:true,
};
%AddNamedProperty(g.prototype,s,bx,
2|1);
b.InstallFunctions(g,2,[
"isArray",ArrayIsArray
]);
var by=%SpecialArrayFunctions();
var bz=function(bA,bB,G){
var bo=bB;
if(by.hasOwnProperty(bA)){
bo=by[bA];
}
if(!(G===(void 0))){
%FunctionSetLength(bo,G);
}
return bo;
};
b.InstallFunctions(g.prototype,2,[
"toString",bz("toString",ArrayToString),
"toLocaleString",bz("toLocaleString",ArrayToLocaleString),
"join",bz("join",ArrayJoin),
"pop",bz("pop",ArrayPop),
"push",bz("push",ArrayPush,1),
"reverse",bz("reverse",ArrayReverse),
"shift",bz("shift",ArrayShift),
"unshift",bz("unshift",ArrayUnshift,1),
"slice",bz("slice",ArraySlice,2),
"splice",bz("splice",ArraySplice,2),
"sort",bz("sort",ArraySort),
"filter",bz("filter",ArrayFilter,1),
"forEach",bz("forEach",ArrayForEach,1),
"some",bz("some",ArraySome,1),
"every",bz("every",ArrayEvery,1),
"map",bz("map",ArrayMap,1),
"indexOf",bz("indexOf",ArrayIndexOf,1),
"lastIndexOf",bz("lastIndexOf",ArrayLastIndexOf,1),
"reduce",bz("reduce",ArrayReduce,1),
"reduceRight",bz("reduceRight",ArrayReduceRight,1)
]);
%FinishArrayPrototypeSetup(g.prototype);
b.SetUpLockedPrototype(h,g(),[
"indexOf",bz("indexOf",ArrayIndexOf),
"join",bz("join",ArrayJoin),
"pop",bz("pop",ArrayPop),
"push",bz("push",ArrayPush),
"shift",bz("shift",ArrayShift),
"sort",bz("sort",ArraySort),
"splice",bz("splice",ArraySplice)
]);
b.SetUpLockedPrototype(i,g(),[
"join",bz("join",ArrayJoin),
"pop",bz("pop",ArrayPop),
"push",bz("push",ArrayPush),
"shift",bz("shift",ArrayShift)
]);
b.SetUpLockedPrototype(c.InternalPackedArray,g(),[
"push",bz("push",ArrayPush),
"pop",bz("pop",ArrayPop),
"shift",bz("shift",ArrayShift),
"unshift",bz("unshift",ArrayUnshift),
"splice",bz("splice",ArraySplice),
"slice",bz("slice",ArraySlice)
]);
b.Export(function(aJ){
aJ.ArrayIndexOf=ArrayIndexOf;
aJ.ArrayJoin=ArrayJoin;
aJ.ArrayPush=ArrayPush;
aJ.ArrayToString=ArrayToString;
aJ.InnerArrayEvery=InnerArrayEvery;
aJ.InnerArrayFilter=InnerArrayFilter;
aJ.InnerArrayForEach=InnerArrayForEach;
aJ.InnerArrayIndexOf=InnerArrayIndexOf;
aJ.InnerArrayJoin=InnerArrayJoin;
aJ.InnerArrayLastIndexOf=InnerArrayLastIndexOf;
aJ.InnerArrayMap=InnerArrayMap;
aJ.InnerArrayReduce=InnerArrayReduce;
aJ.InnerArrayReduceRight=InnerArrayReduceRight;
aJ.InnerArraySome=InnerArraySome;
aJ.InnerArraySort=InnerArraySort;
aJ.InnerArrayToLocaleString=InnerArrayToLocaleString;
aJ.PackedArrayReverse=PackedArrayReverse;
});
%InstallToContext([
"array_pop",ArrayPop,
"array_push",ArrayPush,
"array_shift",ArrayShift,
"array_splice",ArraySplice,
"array_slice",ArraySlice,
"array_unshift",ArrayUnshift,
]);
});

stringV
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e=a.RegExp;
var f=a.String;
var g=b.InternalArray;
var h=b.InternalPackedArray;
var i;
var j;
var k;
var l;
var m;
b.Import(function(n){
c=n.ArrayIndexOf;
d=n.ArrayJoin;
i=n.MakeRangeError;
j=n.MakeTypeError;
k=n.RegExpExec;
l=n.RegExpExecNoTests;
m=n.RegExpLastMatchInfo;
});
function StringToString(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw j(59,'String.prototype.toString');
}
return %_ValueOf(this);
}
function StringValueOf(){
if(!(typeof(this)==='string')&&!(%_ClassOf(this)==='String')){
throw j(59,'String.prototype.valueOf');
}
return %_ValueOf(this);
}
function StringCharAtJS(o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.charAt");
var p=%_StringCharAt(this,o);
if(%_IsSmi(p)){
p=%_StringCharAt((%_ToString(this)),(%_ToInteger(o)));
}
return p;
}
function StringCharCodeAtJS(o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.charCodeAt");
var p=%_StringCharCodeAt(this,o);
if(!%_IsSmi(p)){
p=%_StringCharCodeAt((%_ToString(this)),(%_ToInteger(o)));
}
return p;
}
function StringConcat(q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.concat");
var r=%_ArgumentsLength();
var s=(%_ToString(this));
if(r===1){
return s+(%_ToString(q));
}
var t=new g(r+1);
t[0]=s;
for(var u=0;u<r;u++){
var v=%_Arguments(u);
t[u+1]=(%_ToString(v));
}
return %StringBuilderConcat(t,r+1,"");
}
function StringIndexOfJS(w){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.indexOf");
var x=(%_ToString(this));
w=(%_ToString(w));
var y=0;
if(%_ArgumentsLength()>1){
y=%_Arguments(1);
y=(%_ToInteger(y));
if(y<0)y=0;
if(y>x.length)y=x.length;
}
return %StringIndexOf(x,w,y);
}
function StringLastIndexOfJS(z){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.lastIndexOf");
var A=(%_ToString(this));
var B=A.length;
var z=(%_ToString(z));
var C=z.length;
var y=B-C;
if(%_ArgumentsLength()>1){
var D=(%_ToNumber(%_Arguments(1)));
if(!(!%_IsSmi(%IS_VAR(D))&&!(D==D))){
D=(%_ToInteger(D));
if(D<0){
D=0;
}
if(D+C<B){
y=D;
}
}
}
if(y<0){
return-1;
}
return %StringLastIndexOf(A,z,y);
}
function StringLocaleCompareJS(q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.localeCompare");
return %StringLocaleCompare((%_ToString(this)),(%_ToString(q)));
}
function StringMatchJS(E){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.match");
var x=(%_ToString(this));
if((%_IsRegExp(E))){
if(!E.global)return l(E,x,0);
var p=%StringMatch(x,E,m);
E.lastIndex=0;
return p;
}
E=new e(E);
return l(E,x,0);
}
function StringNormalizeJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.normalize");
var F=(%_ToString(this));
var G=%_Arguments(0);
var H=(G===(void 0))?'NFC':(%_ToString(G));
var I=['NFC','NFD','NFKC','NFKD'];
var J=
%_CallFunction(I,H,c);
if(J===-1){
throw i(152,
%_CallFunction(I,', ',d));
}
return F;
}
var K=[2,"","",-1,-1];
function StringReplace(L,M){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.replace");
var x=(%_ToString(this));
if((%_IsRegExp(L))){
if(!(typeof(M)==='function')){
M=(%_ToString(M));
if(!L.global){
var N=k(L,x,0);
if(N==null){
L.lastIndex=0
return x;
}
if(M.length==0){
return %_SubString(x,0,N[3])+
%_SubString(x,N[4],x.length)
}
return ExpandReplacement(M,x,m,
%_SubString(x,0,N[3]))+
%_SubString(x,N[4],x.length);
}
L.lastIndex=0;
return %StringReplaceGlobalRegExpWithString(
x,L,M,m);
}
if(L.global){
return StringReplaceGlobalRegExpWithFunction(x,L,M);
}
return StringReplaceNonGlobalRegExpWithFunction(x,L,M);
}
L=(%_ToString(L));
if(L.length==1&&
x.length>0xFF&&
(typeof(M)==='string')&&
%StringIndexOf(M,'$',0)<0){
return %StringReplaceOneCharWithString(x,L,M);
}
var O=%StringIndexOf(x,L,0);
if(O<0)return x;
var P=O+L.length;
var p=%_SubString(x,0,O);
if((typeof(M)==='function')){
p+=M(L,O,x);
}else{
K[3]=O;
K[4]=P;
p=ExpandReplacement((%_ToString(M)),
x,
K,
p);
}
return p+%_SubString(x,P,x.length);
}
function ExpandReplacement(Q,x,R,p){
var S=Q.length;
var T=%StringIndexOf(Q,'$',0);
if(T<0){
if(S>0)p+=Q;
return p;
}
if(T>0)p+=%_SubString(Q,0,T);
while(true){
var U='$';
var D=T+1;
if(D<S){
var V=%_StringCharCodeAt(Q,D);
if(V==36){
++D;
p+='$';
}else if(V==38){
++D;
p+=
%_SubString(x,R[3],R[4]);
}else if(V==96){
++D;
p+=%_SubString(x,0,R[3]);
}else if(V==39){
++D;
p+=%_SubString(x,R[4],x.length);
}else if(V>=48&&V<=57){
var W=(V-48)<<1;
var X=1;
var Y=((R)[0]);
if(D+1<Q.length){
var T=%_StringCharCodeAt(Q,D+1);
if(T>=48&&T<=57){
var Z=W*10+((T-48)<<1);
if(Z<Y){
W=Z;
X=2;
}
}
}
if(W!=0&&W<Y){
var O=R[(3+(W))];
if(O>=0){
p+=
%_SubString(x,O,R[(3+(W+1))]);
}
D+=X;
}else{
p+='$';
}
}else{
p+='$';
}
}else{
p+='$';
}
T=%StringIndexOf(Q,'$',D);
if(T<0){
if(D<S){
p+=%_SubString(Q,D,S);
}
return p;
}
if(T>D){
p+=%_SubString(Q,D,T);
}
}
return p;
}
function CaptureString(Q,aa,y){
var ab=y<<1;
var O=aa[(3+(ab))];
if(O<0)return;
var P=aa[(3+(ab+1))];
return %_SubString(Q,O,P);
}
var ac=new g(4);
function StringReplaceGlobalRegExpWithFunction(x,E,M){
var ad=ac;
if(ad){
ac=null;
}else{
ad=new g(16);
}
var ae=%RegExpExecMultiple(E,
x,
m,
ad);
E.lastIndex=0;
if((ae===null)){
ac=ad;
return x;
}
var r=ae.length;
if(((m)[0])==2){
var af=0;
for(var u=0;u<r;u++){
var ag=ae[u];
if(%_IsSmi(ag)){
if(ag>0){
af=(ag>>11)+(ag&0x7ff);
}else{
af=ae[++u]-ag;
}
}else{
var ah=M(ag,af,x);
ae[u]=(%_ToString(ah));
af+=ag.length;
}
}
}else{
for(var u=0;u<r;u++){
var ag=ae[u];
if(!%_IsSmi(ag)){
var ah=%Apply(M,(void 0),ag,0,ag.length);
ae[u]=(%_ToString(ah));
}
}
}
var p=%StringBuilderConcat(ae,r,x);
ad.length=0;
ac=ad;
return p;
}
function StringReplaceNonGlobalRegExpWithFunction(x,E,M){
var R=k(E,x,0);
if((R===null)){
E.lastIndex=0;
return x;
}
var y=R[3];
var p=%_SubString(x,0,y);
var ai=R[4];
var aj=((R)[0])>>1;
var ak;
if(aj==1){
var F=%_SubString(x,y,ai);
ak=M(F,y,x);
}else{
var al=new g(aj+2);
for(var am=0;am<aj;am++){
al[am]=CaptureString(x,R,am);
}
al[am]=y;
al[am+1]=x;
ak=%Apply(M,(void 0),al,0,am+2);
}
p+=ak;
return p+%_SubString(x,ai,x.length);
}
function StringSearch(an){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.search");
var E;
if((%_IsRegExp(an))){
E=an;
}else{
E=new e(an);
}
var N=k(E,(%_ToString(this)),0);
if(N){
return N[3];
}
return-1;
}
function StringSlice(O,P){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.slice");
var F=(%_ToString(this));
var ao=F.length;
var ap=(%_ToInteger(O));
var aq=ao;
if(!(P===(void 0))){
aq=(%_ToInteger(P));
}
if(ap<0){
ap+=ao;
if(ap<0){
ap=0;
}
}else{
if(ap>ao){
return'';
}
}
if(aq<0){
aq+=ao;
if(aq<0){
return'';
}
}else{
if(aq>ao){
aq=ao;
}
}
if(aq<=ap){
return'';
}
return %_SubString(F,ap,aq);
}
function StringSplitJS(ar,as){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.split");
var x=(%_ToString(this));
as=((as===(void 0)))?0xffffffff:((as)>>>0);
var S=x.length;
if(!(%_IsRegExp(ar))){
var at=(%_ToString(ar));
if(as===0)return[];
if((ar===(void 0)))return[x];
var au=at.length;
if(au===0)return %StringToArray(x,as);
var p=%StringSplit(x,at,as);
return p;
}
if(as===0)return[];
return StringSplitOnRegExp(x,ar,as,S);
}
function StringSplitOnRegExp(x,ar,as,S){
if(S===0){
if(k(ar,x,0,0)!=null){
return[];
}
return[x];
}
var av=0;
var aw=0;
var ax=0;
var p=new g();
outer_loop:
while(true){
if(aw===S){
p[p.length]=%_SubString(x,av,S);
break;
}
var R=k(ar,x,aw);
if(R==null||S===(ax=R[3])){
p[p.length]=%_SubString(x,av,S);
break;
}
var ay=R[4];
if(aw===ay&&ay===av){
aw++;
continue;
}
p[p.length]=%_SubString(x,av,ax);
if(p.length===as)break;
var az=((R)[0])+3;
for(var u=3+2;u<az;){
var O=R[u++];
var P=R[u++];
if(P!=-1){
p[p.length]=%_SubString(x,O,P);
}else{
p[p.length]=(void 0);
}
if(p.length===as)break outer_loop;
}
aw=av=ay;
}
var aA=[];
%MoveArrayContents(p,aA);
return aA;
}
function StringSubstring(O,P){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.subString");
var F=(%_ToString(this));
var ao=F.length;
var ap=(%_ToInteger(O));
if(ap<0){
ap=0;
}else if(ap>ao){
ap=ao;
}
var aq=ao;
if(!(P===(void 0))){
aq=(%_ToInteger(P));
if(aq>ao){
aq=ao;
}else{
if(aq<0)aq=0;
if(ap>aq){
var aB=aq;
aq=ap;
ap=aB;
}
}
}
return %_SubString(F,ap,aq);
}
function StringSubstr(O,aC){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.substr");
var F=(%_ToString(this));
var r;
if((aC===(void 0))){
r=F.length;
}else{
r=(%_ToInteger(aC));
if(r<=0)return'';
}
if((O===(void 0))){
O=0;
}else{
O=(%_ToInteger(O));
if(O>=F.length)return'';
if(O<0){
O+=F.length;
if(O<0)O=0;
}
}
var P=O+r;
if(P>F.length)P=F.length;
return %_SubString(F,O,P);
}
function StringToLowerCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.toLowerCase");
return %StringToLowerCase((%_ToString(this)));
}
function StringToLocaleLowerCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.toLocaleLowerCase");
return %StringToLowerCase((%_ToString(this)));
}
function StringToUpperCaseJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.toUpperCase");
return %StringToUpperCase((%_ToString(this)));
}
function StringToLocaleUpperCase(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.toLocaleUpperCase");
return %StringToUpperCase((%_ToString(this)));
}
function StringTrimJS(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.trim");
return %StringTrim((%_ToString(this)),true,true);
}
function StringTrimLeft(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.trimLeft");
return %StringTrim((%_ToString(this)),true,false);
}
function StringTrimRight(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.trimRight");
return %StringTrim((%_ToString(this)),false,true);
}
function StringFromCharCode(aD){
var aC=%_ArgumentsLength();
if(aC==1){
if(!%_IsSmi(aD))aD=(%_ToNumber(aD));
return %_StringCharFromCode(aD&0xffff);
}
var aE=%NewString(aC,true);
var u;
for(u=0;u<aC;u++){
var aD=%_Arguments(u);
if(!%_IsSmi(aD))aD=(%_ToNumber(aD))&0xffff;
if(aD<0)aD=aD&0xffff;
if(aD>0xff)break;
%_OneByteSeqStringSetChar(u,aD,aE);
}
if(u==aC)return aE;
aE=%TruncateString(aE,u);
var aF=%NewString(aC-u,false);
for(var am=0;u<aC;u++,am++){
var aD=%_Arguments(u);
if(!%_IsSmi(aD))aD=(%_ToNumber(aD))&0xffff;
%_TwoByteSeqStringSetChar(am,aD,aF);
}
return aE+aF;
}
function HtmlEscape(aG){
return %_CallFunction((%_ToString(aG)),/"/g,"&quot;",StringReplace);
}
function StringAnchor(aH){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.anchor");
return"<a name=\""+HtmlEscape(aH)+"\">"+(%_ToString(this))+
"</a>";
}
function StringBig(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.big");
return"<big>"+(%_ToString(this))+"</big>";
}
function StringBlink(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.blink");
return"<blink>"+(%_ToString(this))+"</blink>";
}
function StringBold(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.bold");
return"<b>"+(%_ToString(this))+"</b>";
}
function StringFixed(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.fixed");
return"<tt>"+(%_ToString(this))+"</tt>";
}
function StringFontcolor(aI){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.fontcolor");
return"<font color=\""+HtmlEscape(aI)+"\">"+(%_ToString(this))+
"</font>";
}
function StringFontsize(aJ){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.fontsize");
return"<font size=\""+HtmlEscape(aJ)+"\">"+(%_ToString(this))+
"</font>";
}
function StringItalics(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.italics");
return"<i>"+(%_ToString(this))+"</i>";
}
function StringLink(F){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.link");
return"<a href=\""+HtmlEscape(F)+"\">"+(%_ToString(this))+"</a>";
}
function StringSmall(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.small");
return"<small>"+(%_ToString(this))+"</small>";
}
function StringStrike(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.strike");
return"<strike>"+(%_ToString(this))+"</strike>";
}
function StringSub(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.sub");
return"<sub>"+(%_ToString(this))+"</sub>";
}
function StringSup(){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.sup");
return"<sup>"+(%_ToString(this))+"</sup>";
}
function StringRepeat(aK){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.repeat");
var F=(%_ToString(this));
var aC=(%_ToInteger(aK));
if(aC<0||aC>%_MaxSmi())throw i(136);
var aL="";
while(true){
if(aC&1)aL+=F;
aC>>=1;
if(aC===0)return aL;
F+=F;
}
}
function StringStartsWith(aM){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.startsWith");
var F=(%_ToString(this));
if((%_IsRegExp(aM))){
throw j(32,"String.prototype.startsWith");
}
var aN=(%_ToString(aM));
var o=0;
if(%_ArgumentsLength()>1){
var aO=%_Arguments(1);
if(!(aO===(void 0))){
o=(%_ToInteger(aO));
}
}
var ao=F.length;
if(o<0)o=0;
if(o>ao)o=ao;
var aP=aN.length;
if(aP+o>ao){
return false;
}
for(var u=0;u<aP;u++){
if(%_StringCharCodeAt(F,o+u)!==%_StringCharCodeAt(aN,u)){
return false;
}
}
return true;
}
function StringEndsWith(aM){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.endsWith");
var F=(%_ToString(this));
if((%_IsRegExp(aM))){
throw j(32,"String.prototype.endsWith");
}
var aN=(%_ToString(aM));
var ao=F.length;
var o=ao;
if(%_ArgumentsLength()>1){
var aO=%_Arguments(1);
if(!(aO===(void 0))){
o=(%_ToInteger(aO));
}
}
if(o<0)o=0;
if(o>ao)o=ao;
var aP=aN.length;
o=o-aP;
if(o<0){
return false;
}
for(var u=0;u<aP;u++){
if(%_StringCharCodeAt(F,o+u)!==%_StringCharCodeAt(aN,u)){
return false;
}
}
return true;
}
function StringIncludes(aM){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.includes");
var Q=(%_ToString(this));
if((%_IsRegExp(aM))){
throw j(32,"String.prototype.includes");
}
aM=(%_ToString(aM));
var o=0;
if(%_ArgumentsLength()>1){
o=%_Arguments(1);
o=(%_ToInteger(o));
}
var aQ=Q.length;
if(o<0)o=0;
if(o>aQ)o=aQ;
var aR=aM.length;
if(aR+o>aQ){
return false;
}
return %StringIndexOf(Q,aM,o)!==-1;
}
function StringCodePointAt(o){
if((%IS_VAR(this)===null)||(this===(void 0)))throw j(15,"String.prototype.codePointAt");
var Q=(%_ToString(this));
var aJ=Q.length;
o=(%_ToInteger(o));
if(o<0||o>=aJ){
return(void 0);
}
var aS=%_StringCharCodeAt(Q,o);
if(aS<0xD800||aS>0xDBFF||o+1==aJ){
return aS;
}
var aT=%_StringCharCodeAt(Q,o+1);
if(aT<0xDC00||aT>0xDFFF){
return aS;
}
return(aS-0xD800)*0x400+aT+0x2400;
}
function StringFromCodePoint(aU){
var aD;
var S=%_ArgumentsLength();
var y;
var p="";
for(y=0;y<S;y++){
aD=%_Arguments(y);
if(!%_IsSmi(aD)){
aD=(%_ToNumber(aD));
}
if(aD<0||aD>0x10FFFF||aD!==(%_ToInteger(aD))){
throw i(135,aD);
}
if(aD<=0xFFFF){
p+=%_StringCharFromCode(aD);
}else{
aD-=0x10000;
p+=%_StringCharFromCode((aD>>>10)&0x3FF|0xD800);
p+=%_StringCharFromCode(aD&0x3FF|0xDC00);
}
}
return p;
}
function StringRaw(aV){
var aW=%_ArgumentsLength();
var aX=(%_ToObject(aV));
var aY=(%_ToObject(aX.raw));
var aZ=(%_ToLength(aY.length));
if(aZ<=0)return"";
var p=(%_ToString(aY[0]));
for(var u=1;u<aZ;++u){
if(u<aW){
p+=(%_ToString(%_Arguments(u)));
}
p+=(%_ToString(aY[u]));
}
return p;
}
%FunctionSetPrototype(f,new f());
%AddNamedProperty(
f.prototype,"constructor",f,2);
b.InstallFunctions(f,2,[
"fromCharCode",StringFromCharCode,
"fromCodePoint",StringFromCodePoint,
"raw",StringRaw
]);
b.InstallFunctions(f.prototype,2,[
"valueOf",StringValueOf,
"toString",StringToString,
"charAt",StringCharAtJS,
"charCodeAt",StringCharCodeAtJS,
"codePointAt",StringCodePointAt,
"concat",StringConcat,
"endsWith",StringEndsWith,
"includes",StringIncludes,
"indexOf",StringIndexOfJS,
"lastIndexOf",StringLastIndexOfJS,
"localeCompare",StringLocaleCompareJS,
"match",StringMatchJS,
"normalize",StringNormalizeJS,
"repeat",StringRepeat,
"replace",StringReplace,
"search",StringSearch,
"slice",StringSlice,
"split",StringSplitJS,
"substring",StringSubstring,
"substr",StringSubstr,
"startsWith",StringStartsWith,
"toLowerCase",StringToLowerCaseJS,
"toLocaleLowerCase",StringToLocaleLowerCase,
"toUpperCase",StringToUpperCaseJS,
"toLocaleUpperCase",StringToLocaleUpperCase,
"trim",StringTrimJS,
"trimLeft",StringTrimLeft,
"trimRight",StringTrimRight,
"link",StringLink,
"anchor",StringAnchor,
"fontcolor",StringFontcolor,
"fontsize",StringFontsize,
"big",StringBig,
"blink",StringBlink,
"bold",StringBold,
"fixed",StringFixed,
"italics",StringItalics,
"small",StringSmall,
"strike",StringStrike,
"sub",StringSub,
"sup",StringSup
]);
b.Export(function(ba){
ba.StringCharAt=StringCharAtJS;
ba.StringIndexOf=StringIndexOfJS;
ba.StringLastIndexOf=StringLastIndexOfJS;
ba.StringMatch=StringMatchJS;
ba.StringReplace=StringReplace;
ba.StringSlice=StringSlice;
ba.StringSplit=StringSplitJS;
ba.StringSubstr=StringSubstr;
ba.StringSubstring=StringSubstring;
});
})

uri1U
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=a.Array;
var e=b.InternalArray;
var f;
b.Import(function(g){
f=g.MakeURIError;
});
function HexValueOf(h){
if(h>=48&&h<=57)return h-48;
if(h>=65&&h<=70)return h-55;
if(h>=97&&h<=102)return h-87;
return-1;
}
function isAlphaNumeric(i){
if(97<=i&&i<=122)return true;
if(65<=i&&i<=90)return true;
if(48<=i&&i<=57)return true;
return false;
}
var j=0;
function URIAddEncodedOctetToBuffer(k,l,m){
l[m++]=37;
l[m++]=j[k>>4];
l[m++]=j[k&0x0F];
return m;
}
function URIEncodeOctets(n,l,m){
if(j===0){
j=[48,49,50,51,52,53,54,55,56,57,
65,66,67,68,69,70];
}
m=URIAddEncodedOctetToBuffer(n[0],l,m);
if(n[1])m=URIAddEncodedOctetToBuffer(n[1],l,m);
if(n[2])m=URIAddEncodedOctetToBuffer(n[2],l,m);
if(n[3])m=URIAddEncodedOctetToBuffer(n[3],l,m);
return m;
}
function URIEncodeSingle(i,l,m){
var o=(i>>12)&0xF;
var p=(i>>6)&63;
var q=i&63;
var n=new d(3);
if(i<=0x007F){
n[0]=i;
}else if(i<=0x07FF){
n[0]=p+192;
n[1]=q+128;
}else{
n[0]=o+224;
n[1]=p+128;
n[2]=q+128;
}
return URIEncodeOctets(n,l,m);
}
function URIEncodePair(r,s,l,m){
var t=((r>>6)&0xF)+1;
var u=(r>>2)&0xF;
var o=r&3;
var p=(s>>6)&0xF;
var q=s&63;
var n=new d(4);
n[0]=(t>>2)+240;
n[1]=(((t&3)<<4)|u)+128;
n[2]=((o<<4)|p)+128;
n[3]=q+128;
return URIEncodeOctets(n,l,m);
}
function URIHexCharsToCharCode(v,w){
var x=HexValueOf(v);
var y=HexValueOf(w);
if(x==-1||y==-1)throw f();
return(x<<4)|y;
}
function URIDecodeOctets(n,l,m){
var z;
var A=n[0];
if(A<0x80){
z=A;
}else if(A<0xc2){
throw f();
}else{
var B=n[1];
if(A<0xe0){
var C=A&0x1f;
if((B<0x80)||(B>0xbf))throw f();
var D=B&0x3f;
z=(C<<6)+D;
if(z<0x80||z>0x7ff)throw f();
}else{
var E=n[2];
if(A<0xf0){
var C=A&0x0f;
if((B<0x80)||(B>0xbf))throw f();
var D=B&0x3f;
if((E<0x80)||(E>0xbf))throw f();
var F=E&0x3f;
z=(C<<12)+(D<<6)+F;
if((z<0x800)||(z>0xffff))throw f();
}else{
var G=n[3];
if(A<0xf8){
var C=(A&0x07);
if((B<0x80)||(B>0xbf))throw f();
var D=(B&0x3f);
if((E<0x80)||(E>0xbf)){
throw f();
}
var F=(E&0x3f);
if((G<0x80)||(G>0xbf))throw f();
var H=(G&0x3f);
z=(C<<18)+(D<<12)+(F<<6)+H;
if((z<0x10000)||(z>0x10ffff))throw f();
}else{
throw f();
}
}
}
}
if(0xD800<=z&&z<=0xDFFF)throw f();
if(z<0x10000){
%_TwoByteSeqStringSetChar(m++,z,l);
}else{
%_TwoByteSeqStringSetChar(m++,(z>>10)+0xd7c0,l);
%_TwoByteSeqStringSetChar(m++,(z&0x3ff)+0xdc00,l);
}
return m;
}
function Encode(I,J){
I=(%_ToString(I));
var K=I.length;
var L=new e(K);
var m=0;
for(var M=0;M<K;M++){
var r=%_StringCharCodeAt(I,M);
if(J(r)){
L[m++]=r;
}else{
if(r>=0xDC00&&r<=0xDFFF)throw f();
if(r<0xD800||r>0xDBFF){
m=URIEncodeSingle(r,L,m);
}else{
M++;
if(M==K)throw f();
var s=%_StringCharCodeAt(I,M);
if(s<0xDC00||s>0xDFFF)throw f();
m=URIEncodePair(r,s,L,m);
}
}
}
var l=%NewString(L.length,true);
for(var N=0;N<L.length;N++){
%_OneByteSeqStringSetChar(N,L[N],l);
}
return l;
}
function Decode(I,O){
I=(%_ToString(I));
var K=I.length;
var P=%NewString(K,true);
var m=0;
var M=0;
for(;M<K;M++){
var h=%_StringCharCodeAt(I,M);
if(h==37){
if(M+2>=K)throw f();
var i=URIHexCharsToCharCode(%_StringCharCodeAt(I,M+1),
%_StringCharCodeAt(I,M+2));
if(i>>7)break;
if(O(i)){
%_OneByteSeqStringSetChar(m++,37,P);
%_OneByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M+1),
P);
%_OneByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M+2),
P);
}else{
%_OneByteSeqStringSetChar(m++,i,P);
}
M+=2;
}else{
if(h>0x7f)break;
%_OneByteSeqStringSetChar(m++,h,P);
}
}
P=%TruncateString(P,m);
if(M==K)return P;
var Q=%NewString(K-M,false);
m=0;
for(;M<K;M++){
var h=%_StringCharCodeAt(I,M);
if(h==37){
if(M+2>=K)throw f();
var i=URIHexCharsToCharCode(%_StringCharCodeAt(I,++M),
%_StringCharCodeAt(I,++M));
if(i>>7){
var R=0;
while(((i<<++R)&0x80)!=0){}
if(R==1||R>4)throw f();
var n=new d(R);
n[0]=i;
if(M+3*(R-1)>=K)throw f();
for(var N=1;N<R;N++){
if(I[++M]!='%')throw f();
n[N]=URIHexCharsToCharCode(%_StringCharCodeAt(I,++M),
%_StringCharCodeAt(I,++M));
}
m=URIDecodeOctets(n,Q,m);
}else if(O(i)){
%_TwoByteSeqStringSetChar(m++,37,Q);
%_TwoByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M-1),
Q);
%_TwoByteSeqStringSetChar(m++,%_StringCharCodeAt(I,M),
Q);
}else{
%_TwoByteSeqStringSetChar(m++,i,Q);
}
}else{
%_TwoByteSeqStringSetChar(m++,h,Q);
}
}
Q=%TruncateString(Q,m);
return P+Q;
}
function URIEscapeJS(S){
return %URIEscape(S);
}
function URIUnescapeJS(S){
return %URIUnescape(S);
}
function URIDecode(I){
var T=function(i){
if(35<=i&&i<=36)return true;
if(i==38)return true;
if(43<=i&&i<=44)return true;
if(i==47)return true;
if(58<=i&&i<=59)return true;
if(i==61)return true;
if(63<=i&&i<=64)return true;
return false;
};
return Decode(I,T);
}
function URIDecodeComponent(U){
var T=function(i){return false;};
return Decode(U,T);
}
function URIEncode(I){
var V=function(i){
if(isAlphaNumeric(i))return true;
if(i==33)return true;
if(35<=i&&i<=36)return true;
if(38<=i&&i<=47)return true;
if(58<=i&&i<=59)return true;
if(i==61)return true;
if(63<=i&&i<=64)return true;
if(i==95)return true;
if(i==126)return true;
return false;
};
return Encode(I,V);
}
function URIEncodeComponent(U){
var V=function(i){
if(isAlphaNumeric(i))return true;
if(i==33)return true;
if(39<=i&&i<=42)return true;
if(45<=i&&i<=46)return true;
if(i==95)return true;
if(i==126)return true;
return false;
};
return Encode(U,V);
}
b.InstallFunctions(a,2,[
"escape",URIEscapeJS,
"unescape",URIUnescapeJS,
"decodeURI",URIDecode,
"decodeURIComponent",URIDecodeComponent,
"encodeURI",URIEncode,
"encodeURIComponent",URIEncodeComponent
]);
})

math™N
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Math;
var d=a.Object;
var e=b.InternalArray;
var f=%GetRootNaN();
var g;
var h;
var i;
var j;
var k=b.ImportNow("to_string_tag_symbol");
b.InitializeRNG=function(){
var l=%InitializeRNG();
g=l[0];
h=l[1];
i=l[2];
j=l[3];
};
function MathAbs(m){
m=+m;
return(m>0)?m:0-m;
}
function MathAcosJS(m){
return %_MathAcos(+m);
}
function MathAsinJS(m){
return %_MathAsin(+m);
}
function MathAtanJS(m){
return %_MathAtan(+m);
}
function MathAtan2JS(n,m){
n=+n;
m=+m;
return %_MathAtan2(n,m);
}
function MathCeil(m){
return-%_MathFloor(-m);
}
function MathExp(m){
return %MathExpRT((%_ToNumber(m)));
}
function MathFloorJS(m){
return %_MathFloor(+m);
}
function MathLog(m){
return %_MathLogRT((%_ToNumber(m)));
}
function MathMax(o,p){
var q=%_ArgumentsLength();
if(q==2){
o=(%_ToNumber(o));
p=(%_ToNumber(p));
if(p>o)return p;
if(o>p)return o;
if(o==p){
return(o===0&&%_IsMinusZero(o))?p:o;
}
return f;
}
var r=-(1/0);
for(var s=0;s<q;s++){
var t=%_Arguments(s);
t=(%_ToNumber(t));
if((!%_IsSmi(%IS_VAR(t))&&!(t==t))||t>r||(r===0&&t===0&&%_IsMinusZero(r))){
r=t;
}
}
return r;
}
function MathMin(o,p){
var q=%_ArgumentsLength();
if(q==2){
o=(%_ToNumber(o));
p=(%_ToNumber(p));
if(p>o)return o;
if(o>p)return p;
if(o==p){
return(o===0&&%_IsMinusZero(o))?o:p;
}
return f;
}
var r=(1/0);
for(var s=0;s<q;s++){
var t=%_Arguments(s);
t=(%_ToNumber(t));
if((!%_IsSmi(%IS_VAR(t))&&!(t==t))||t<r||(r===0&&t===0&&%_IsMinusZero(t))){
r=t;
}
}
return r;
}
function MathPowJS(m,n){
return %_MathPow((%_ToNumber(m)),(%_ToNumber(n)));
}
function MathRandom(){
var u=(MathImul(18030,g)+h)|0;
var v=(MathImul(36969,i)+j)|0;
g=u&0xFFFF;
h=u>>>16;
i=v&0xFFFF;
j=v>>>16;
return %_ConstructDouble(0x3FF00000|(u&0x000FFFFF),v&0xFFF00000)-1;
}
function MathRandomRaw(){
var u=(MathImul(18030,g)+h)|0;
var v=(MathImul(36969,i)+j)|0;
g=u&0xFFFF;
h=u>>>16;
i=v&0xFFFF;
j=v>>>16;
var m=((u<<16)+(v&0xFFFF))|0;
return m&0x3FFFFFFF;
}
function MathRound(m){
return %RoundNumber((%_ToNumber(m)));
}
function MathSqrtJS(m){
return %_MathSqrt(+m);
}
function MathImul(m,n){
return %NumberImul((%_ToNumber(m)),(%_ToNumber(n)));
}
function MathSign(m){
m=+m;
if(m>0)return 1;
if(m<0)return-1;
return m;
}
function MathTrunc(m){
m=+m;
if(m>0)return %_MathFloor(m);
if(m<0)return-%_MathFloor(-m);
return m;
}
function MathAsinh(m){
m=(%_ToNumber(m));
if(m===0||!(%_IsSmi(%IS_VAR(m))||((m==m)&&(m!=1/0)&&(m!=-1/0))))return m;
if(m>0)return MathLog(m+%_MathSqrt(m*m+1));
return-MathLog(-m+%_MathSqrt(m*m+1));
}
function MathAcosh(m){
m=(%_ToNumber(m));
if(m<1)return f;
if(!(%_IsSmi(%IS_VAR(m))||((m==m)&&(m!=1/0)&&(m!=-1/0))))return m;
return MathLog(m+%_MathSqrt(m+1)*%_MathSqrt(m-1));
}
function MathAtanh(m){
m=(%_ToNumber(m));
if(m===0)return m;
if(!(%_IsSmi(%IS_VAR(m))||((m==m)&&(m!=1/0)&&(m!=-1/0))))return f;
return 0.5*MathLog((1+m)/(1-m));
}
function MathHypot(m,n){
var q=%_ArgumentsLength();
var w=new e(q);
var x=0;
for(var s=0;s<q;s++){
var t=%_Arguments(s);
t=(%_ToNumber(t));
if(t===(1/0)||t===-(1/0))return(1/0);
t=MathAbs(t);
if(t>x)x=t;
w[s]=t;
}
if(x===0)x=1;
var y=0;
var z=0;
for(var s=0;s<q;s++){
var t=w[s]/x;
var A=t*t-z;
var B=y+A;
z=(B-y)-A;
y=B;
}
return %_MathSqrt(y)*x;
}
function MathFroundJS(m){
return %MathFround((%_ToNumber(m)));
}
function MathClz32JS(m){
return %_MathClz32(m>>>0);
}
function MathCbrt(m){
m=(%_ToNumber(m));
if(m==0||!(%_IsSmi(%IS_VAR(m))||((m==m)&&(m!=1/0)&&(m!=-1/0))))return m;
return m>=0?CubeRoot(m):-CubeRoot(-m);
}
function CubeRoot(m){
var C=MathFloorJS(%_DoubleHi(m)/3)+0x2A9F7893;
var D=%_ConstructDouble(C,0);
D=(1.0/3.0)*(m/(D*D)+2*D);
;
D=(1.0/3.0)*(m/(D*D)+2*D);
;
D=(1.0/3.0)*(m/(D*D)+2*D);
;
return(1.0/3.0)*(m/(D*D)+2*D);
;
}
%AddNamedProperty(c,k,"Math",1|2);
b.InstallConstants(c,[
"E",2.7182818284590452354,
"LN10",2.302585092994046,
"LN2",0.6931471805599453,
"LOG2E",1.4426950408889634,
"LOG10E",0.4342944819032518,
"PI",3.1415926535897932,
"SQRT1_2",0.7071067811865476,
"SQRT2",1.4142135623730951
]);
b.InstallFunctions(c,2,[
"random",MathRandom,
"abs",MathAbs,
"acos",MathAcosJS,
"asin",MathAsinJS,
"atan",MathAtanJS,
"ceil",MathCeil,
"exp",MathExp,
"floor",MathFloorJS,
"log",MathLog,
"round",MathRound,
"sqrt",MathSqrtJS,
"atan2",MathAtan2JS,
"pow",MathPowJS,
"max",MathMax,
"min",MathMin,
"imul",MathImul,
"sign",MathSign,
"trunc",MathTrunc,
"asinh",MathAsinh,
"acosh",MathAcosh,
"atanh",MathAtanh,
"hypot",MathHypot,
"fround",MathFroundJS,
"clz32",MathClz32JS,
"cbrt",MathCbrt
]);
%SetForceInlineFlag(MathAbs);
%SetForceInlineFlag(MathAcosJS);
%SetForceInlineFlag(MathAsinJS);
%SetForceInlineFlag(MathAtanJS);
%SetForceInlineFlag(MathAtan2JS);
%SetForceInlineFlag(MathCeil);
%SetForceInlineFlag(MathClz32JS);
%SetForceInlineFlag(MathFloorJS);
%SetForceInlineFlag(MathRandom);
%SetForceInlineFlag(MathSign);
%SetForceInlineFlag(MathSqrtJS);
%SetForceInlineFlag(MathTrunc);
b.Export(function(E){
E.MathAbs=MathAbs;
E.MathExp=MathExp;
E.MathFloor=MathFloorJS;
E.IntRandom=MathRandomRaw;
E.MathMax=MathMax;
E.MathMin=MathMin;
});
})

fdlibmùÈ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Float64Array;
var d=a.Math;
var e;
var f;
var g=%GetRootNaN();
var h;
b.Import(function(i){
e=i.MathAbs;
f=i.MathExp;
});
b.CreateDoubleResultArray=function(a){
h=new c(2);
};
function KernelTan(j,k,l){
var m;
var n;
var o=%_DoubleHi(j);
var p=o&0x7fffffff;
if(p<0x3e300000){
if(((p|%_DoubleLo(j))|(l+1))==0){
return 1/e(j);
}else{
if(l==1){
return j;
}else{
var n=j+k;
var m=%_ConstructDouble(%_DoubleHi(n),0);
var q=k-(m-j);
var r=-1/n;
var s=%_ConstructDouble(%_DoubleHi(r),0);
var t=1+s*m;
return s+r*(t+s*q);
}
}
}
if(p>=0x3fe59428){
if(j<0){
j=-j;
k=-k;
}
m=7.85398163397448278999e-01-j;
n=3.06161699786838301793e-17-k;
j=m+n;
k=0;
}
m=j*j;
n=m*m;
var u=1.33333333333201242699e-01+n*(2.18694882948595424599e-02+n*(3.59207910759131235356e-03+
n*(5.88041240820264096874e-04+n*(7.81794442939557092300e-05+n*-1.85586374855275456654e-05))));
var q=m*(5.39682539762260521377e-02+n*(8.86323982359930005737e-03+n*(1.45620945432529025516e-03+
n*(2.46463134818469906812e-04+n*(7.14072491382608190305e-05+n*2.59073051863633712884e-05)))));
var t=m*j;
u=k+m*(t*(u+q)+k);
u=u+3.33333333333334091986e-01*t;
n=j+u;
if(p>=0x3fe59428){
return(1-((o>>30)&2))*
(l-2.0*(j-(n*n/(n+l)-u)));
}
if(l==1){
return n;
}else{
m=%_ConstructDouble(%_DoubleHi(n),0);
q=u-(m-j);
var r=-1/n;
var s=%_ConstructDouble(%_DoubleHi(r),0);
t=1+s*m;
return s+r*(t+s*q);
}
}
function MathSinSlow(j){
var v,w,x;
var o=%_DoubleHi(j);
var p=o&0x7fffffff;
if(p<0x4002d97c){
if(o>0){
var m=j-1.57079632673412561417;
if(p!=0x3ff921fb){
w=m-6.07710050650619224932e-11;
x=(m-w)-6.07710050650619224932e-11;
}else{
m-=6.07710050630396597660e-11;
w=m-2.02226624879595063154e-21;
x=(m-w)-2.02226624879595063154e-21;
}
v=1;
}else{
var m=j+1.57079632673412561417;
if(p!=0x3ff921fb){
w=m+6.07710050650619224932e-11;
x=(m-w)+6.07710050650619224932e-11;
}else{
m+=6.07710050630396597660e-11;
w=m+2.02226624879595063154e-21;
x=(m-w)+2.02226624879595063154e-21;
}
v=-1;
}
}else if(p<=0x413921fb){
var s=e(j);
v=(s*6.36619772367581382433e-01+0.5)|0;
var u=s-v*1.57079632673412561417;
var n=v*6.07710050650619224932e-11;
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x1000000){
s=u;
n=v*6.07710050630396597660e-11;
u=s-n;
n=v*2.02226624879595063154e-21-((s-u)-n);
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x3100000){
s=u;
n=v*2.02226624871116645580e-21;
u=s-n;
n=v*8.47842766036889956997e-32-((s-u)-n);
w=u-n;
}
}
x=(u-w)-n;
if(o<0){
v=-v;
w=-w;
x=-x;
}
}else{
v=%RemPiO2(j,h);
w=h[0];
x=h[1];
}
;
var y=1-(v&2);
if(v&1){
var p=%_DoubleHi(w)&0x7fffffff;
var m=w*w;
var u=m*(4.16666666666666019037e-02+m*(-1.38888888888741095749e-03+m*(2.48015872894767294178e-05+m*(-2.75573143513906633035e-07+m*(2.08757232129817482790e-09+m*-1.13596475577881948265e-11)))));
if(p<0x3fd33333){
return(1-(0.5*m-(m*u-w*x)))*y;
}else{
var z;
if(p>0x3fe90000){
z=0.28125;
}else{
z=%_ConstructDouble(%_DoubleHi(0.25*w),0);
}
var A=0.5*m-z;
return(1-z-(A-(m*u-w*x)))*y;
}
;
}else{
var m=w*w;
var q=m*w;
var u=8.33333333332248946124e-03+m*(-1.98412698298579493134e-04+m*(2.75573137070700676789e-06+m*(-2.50507602534068634195e-08+m*1.58969099521155010221e-10)));
return(w-((m*(0.5*x-q*u)-x)-q*-1.66666666666666324348e-01))*y;
;
}
}
function MathCosSlow(j){
var v,w,x;
var o=%_DoubleHi(j);
var p=o&0x7fffffff;
if(p<0x4002d97c){
if(o>0){
var m=j-1.57079632673412561417;
if(p!=0x3ff921fb){
w=m-6.07710050650619224932e-11;
x=(m-w)-6.07710050650619224932e-11;
}else{
m-=6.07710050630396597660e-11;
w=m-2.02226624879595063154e-21;
x=(m-w)-2.02226624879595063154e-21;
}
v=1;
}else{
var m=j+1.57079632673412561417;
if(p!=0x3ff921fb){
w=m+6.07710050650619224932e-11;
x=(m-w)+6.07710050650619224932e-11;
}else{
m+=6.07710050630396597660e-11;
w=m+2.02226624879595063154e-21;
x=(m-w)+2.02226624879595063154e-21;
}
v=-1;
}
}else if(p<=0x413921fb){
var s=e(j);
v=(s*6.36619772367581382433e-01+0.5)|0;
var u=s-v*1.57079632673412561417;
var n=v*6.07710050650619224932e-11;
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x1000000){
s=u;
n=v*6.07710050630396597660e-11;
u=s-n;
n=v*2.02226624879595063154e-21-((s-u)-n);
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x3100000){
s=u;
n=v*2.02226624871116645580e-21;
u=s-n;
n=v*8.47842766036889956997e-32-((s-u)-n);
w=u-n;
}
}
x=(u-w)-n;
if(o<0){
v=-v;
w=-w;
x=-x;
}
}else{
v=%RemPiO2(j,h);
w=h[0];
x=h[1];
}
;
if(v&1){
var y=(v&2)-1;
var m=w*w;
var q=m*w;
var u=8.33333333332248946124e-03+m*(-1.98412698298579493134e-04+m*(2.75573137070700676789e-06+m*(-2.50507602534068634195e-08+m*1.58969099521155010221e-10)));
return(w-((m*(0.5*x-q*u)-x)-q*-1.66666666666666324348e-01))*y;
;
}else{
var y=1-(v&2);
var p=%_DoubleHi(w)&0x7fffffff;
var m=w*w;
var u=m*(4.16666666666666019037e-02+m*(-1.38888888888741095749e-03+m*(2.48015872894767294178e-05+m*(-2.75573143513906633035e-07+m*(2.08757232129817482790e-09+m*-1.13596475577881948265e-11)))));
if(p<0x3fd33333){
return(1-(0.5*m-(m*u-w*x)))*y;
}else{
var z;
if(p>0x3fe90000){
z=0.28125;
}else{
z=%_ConstructDouble(%_DoubleHi(0.25*w),0);
}
var A=0.5*m-z;
return(1-z-(A-(m*u-w*x)))*y;
}
;
}
}
function MathSin(j){
j=+j;
if((%_DoubleHi(j)&0x7fffffff)<=0x3fe921fb){
var m=j*j;
var q=m*j;
var u=8.33333333332248946124e-03+m*(-1.98412698298579493134e-04+m*(2.75573137070700676789e-06+m*(-2.50507602534068634195e-08+m*1.58969099521155010221e-10)));
return(j-((m*(0.5*0-q*u)-0)-q*-1.66666666666666324348e-01));
;
}
return+MathSinSlow(j);
}
function MathCos(j){
j=+j;
if((%_DoubleHi(j)&0x7fffffff)<=0x3fe921fb){
var p=%_DoubleHi(j)&0x7fffffff;
var m=j*j;
var u=m*(4.16666666666666019037e-02+m*(-1.38888888888741095749e-03+m*(2.48015872894767294178e-05+m*(-2.75573143513906633035e-07+m*(2.08757232129817482790e-09+m*-1.13596475577881948265e-11)))));
if(p<0x3fd33333){
return(1-(0.5*m-(m*u-j*0)));
}else{
var z;
if(p>0x3fe90000){
z=0.28125;
}else{
z=%_ConstructDouble(%_DoubleHi(0.25*j),0);
}
var A=0.5*m-z;
return(1-z-(A-(m*u-j*0)));
}
;
}
return+MathCosSlow(j);
}
function MathTan(j){
j=j*1;
if((%_DoubleHi(j)&0x7fffffff)<=0x3fe921fb){
return KernelTan(j,0,1);
}
var v,w,x;
var o=%_DoubleHi(j);
var p=o&0x7fffffff;
if(p<0x4002d97c){
if(o>0){
var m=j-1.57079632673412561417;
if(p!=0x3ff921fb){
w=m-6.07710050650619224932e-11;
x=(m-w)-6.07710050650619224932e-11;
}else{
m-=6.07710050630396597660e-11;
w=m-2.02226624879595063154e-21;
x=(m-w)-2.02226624879595063154e-21;
}
v=1;
}else{
var m=j+1.57079632673412561417;
if(p!=0x3ff921fb){
w=m+6.07710050650619224932e-11;
x=(m-w)+6.07710050650619224932e-11;
}else{
m+=6.07710050630396597660e-11;
w=m+2.02226624879595063154e-21;
x=(m-w)+2.02226624879595063154e-21;
}
v=-1;
}
}else if(p<=0x413921fb){
var s=e(j);
v=(s*6.36619772367581382433e-01+0.5)|0;
var u=s-v*1.57079632673412561417;
var n=v*6.07710050650619224932e-11;
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x1000000){
s=u;
n=v*6.07710050630396597660e-11;
u=s-n;
n=v*2.02226624879595063154e-21-((s-u)-n);
w=u-n;
if(p-(%_DoubleHi(w)&0x7ff00000)>0x3100000){
s=u;
n=v*2.02226624871116645580e-21;
u=s-n;
n=v*8.47842766036889956997e-32-((s-u)-n);
w=u-n;
}
}
x=(u-w)-n;
if(o<0){
v=-v;
w=-w;
x=-x;
}
}else{
v=%RemPiO2(j,h);
w=h[0];
x=h[1];
}
;
return KernelTan(w,x,(v&1)?-1:1);
}
function MathLog1p(j){
j=j*1;
var o=%_DoubleHi(j);
var B=o&0x7fffffff;
var C=1;
var D=j;
var E=1;
var F=0;
var G=j;
if(o<0x3fda827a){
if(B>=0x3ff00000){
if(j===-1){
return-(1/0);
}else{
return g;
}
}else if(B<0x3c900000){
return j;
}else if(B<0x3e200000){
return j-j*j*0.5;
}
if((o>0)||(o<=-0x402D413D)){
C=0;
}
}
if(o>=0x7ff00000)return j;
if(C!==0){
if(o<0x43400000){
G=1+j;
E=%_DoubleHi(G);
C=(E>>20)-1023;
F=(C>0)?1-(G-j):j-(G-1);
F=F/G;
}else{
E=%_DoubleHi(G);
C=(E>>20)-1023;
}
E=E&0xfffff;
if(E<0x6a09e){
G=%_ConstructDouble(E|0x3ff00000,%_DoubleLo(G));
}else{
++C;
G=%_ConstructDouble(E|0x3fe00000,%_DoubleLo(G));
E=(0x00100000-E)>>2;
}
D=G-1;
}
var H=0.5*D*D;
if(E===0){
if(D===0){
if(C===0){
return 0.0;
}else{
return C*6.93147180369123816490e-01+(F+C*1.90821492927058770002e-10);
}
}
var I=H*(1-6.666666666666666666e-01*D);
if(C===0){
return D-I;
}else{
return C*6.93147180369123816490e-01-((I-(C*1.90821492927058770002e-10+F))-D);
}
}
var t=D/(2+D);
var m=t*t;
var I=m*(6.666666666666735130e-01+m*(3.999999999940941908e-01+m*(2.857142874366239149e-01+m*(2.222219843214978396e-01+
m*(1.818357216161805012e-01+m*(1.531383769920937332e-01+m*1.479819860511658591e-01))))));
if(C===0){
return D-(H-t*(H+I));
}else{
return C*6.93147180369123816490e-01-((H-(t*(H+I)+(C*1.90821492927058770002e-10+F)))-D);
}
}
function MathExpm1(j){
j=j*1;
var k;
var J;
var K;
var C;
var s;
var F;
var o=%_DoubleHi(j);
var L=o&0x80000000;
var k=(L===0)?j:-j;
o&=0x7fffffff;
if(o>=0x4043687a){
if(o>=0x40862e42){
if(o>=0x7ff00000){
return(j===-(1/0))?-1:j;
}
if(j>7.09782712893383973096e+02)return(1/0);
}
if(L!=0)return-1;
}
if(o>0x3fd62e42){
if(o<0x3ff0a2b2){
if(L===0){
J=j-6.93147180369123816490e-01;
K=1.90821492927058770002e-10;
C=1;
}else{
J=j+6.93147180369123816490e-01;
K=-1.90821492927058770002e-10;
C=-1;
}
}else{
C=(1.44269504088896338700*j+((L===0)?0.5:-0.5))|0;
s=C;
J=j-s*6.93147180369123816490e-01;
K=s*1.90821492927058770002e-10;
}
j=J-K;
F=(J-j)-K;
}else if(o<0x3c900000){
return j;
}else{
C=0;
}
var M=0.5*j;
var N=j*M;
var O=1+N*(-3.33333333333331316428e-02+N*(1.58730158725481460165e-03+N*
(-7.93650757867487942473e-05+N*(4.00821782732936239552e-06+N*-2.01099218183624371326e-07))));
s=3-O*M;
var P=N*((O-s)/(6-j*s));
if(C===0){
return j-(j*P-N);
}else{
P=(j*(P-F)-F);
P-=N;
if(C===-1)return 0.5*(j-P)-0.5;
if(C===1){
if(j<-0.25)return-2*(P-(j+0.5));
return 1+2*(j-P);
}
if(C<=-2||C>56){
k=1-(P-j);
k=%_ConstructDouble(%_DoubleHi(k)+(C<<20),%_DoubleLo(k));
return k-1;
}
if(C<20){
s=%_ConstructDouble(0x3ff00000-(0x200000>>C),0);
k=s-(P-j);
k=%_ConstructDouble(%_DoubleHi(k)+(C<<20),%_DoubleLo(k));
}else{
s=%_ConstructDouble((0x3ff-C)<<20,0);
k=j-(P+s);
k+=1;
k=%_ConstructDouble(%_DoubleHi(k)+(C<<20),%_DoubleLo(k));
}
}
return k;
}
function MathSinh(j){
j=j*1;
var Q=(j<0)?-0.5:0.5;
var B=e(j);
if(B<22){
if(B<3.725290298461914e-9)return j;
var s=MathExpm1(B);
if(B<1)return Q*(2*s-s*s/(s+1));
return Q*(s+s/(s+1));
}
if(B<709.7822265625)return Q*f(B);
if(B<=710.4758600739439){
var n=f(0.5*B);
var s=Q*n;
return s*n;
}
return j*(1/0);
}
function MathCosh(j){
j=j*1;
var p=%_DoubleHi(j)&0x7fffffff;
if(p<0x3fd62e43){
var s=MathExpm1(e(j));
var n=1+s;
if(p<0x3c800000)return n;
return 1+(s*s)/(n+n);
}
if(p<0x40360000){
var s=f(e(j));
return 0.5*s+0.5/s;
}
if(p<0x40862e42)return 0.5*f(e(j));
if(e(j)<=710.4758600739439){
var n=f(0.5*e(j));
var s=0.5*n;
return s*n;
}
if((!%_IsSmi(%IS_VAR(j))&&!(j==j)))return j;
return(1/0);
}
function MathTanh(j){
j=j*1;
if(!(%_IsSmi(%IS_VAR(j))||((j==j)&&(j!=1/0)&&(j!=-1/0)))){
if(j>0)return 1;
if(j<0)return-1;
return j;
}
var B=e(j);
var m;
if(B<22){
if(B<2.77555756156289135105e-17){
return j;
}
if(B>=1){
var s=MathExpm1(2*B);
m=1-2/(s+2);
}else{
var s=MathExpm1(-2*B);
m=-s/(s+2);
}
}else{
m=1;
}
return(j>=0)?m:-m;
}
function MathLog10(j){
j=j*1;
var o=%_DoubleHi(j);
var R=%_DoubleLo(j);
var C=0;
if(o<0x00100000){
if(((o&0x7fffffff)|R)===0)return-(1/0);
if(o<0)return g;
C-=54;
j*=18014398509481984;
o=%_DoubleHi(j);
R=%_DoubleLo(j);
}
if(o>=0x7ff00000)return j;
C+=(o>>20)-1023;
var S=(C&0x80000000)>>>31;
o=(o&0x000fffff)|((0x3ff-S)<<20);
var k=C+S;
j=%_ConstructDouble(o,R);
var m=k*3.69423907715893078616e-13+4.34294481903251816668e-01*%_MathLogRT(j);
return m+k*3.01029995663611771306e-01;
}
function MathLog2(j){
j=j*1;
var B=e(j);
var o=%_DoubleHi(j);
var R=%_DoubleLo(j);
var p=o&0x7fffffff;
if((p|R)==0)return-(1/0);
if(o<0)return g;
if(p>=0x7ff00000)return j;
var v=0;
if(p<0x00100000){
B*=9007199254740992;
v-=53;
p=%_DoubleHi(B);
}
v+=(p>>20)-0x3ff;
var T=p&0x000fffff;
p=T|0x3ff00000;
var U=1;
var V=0;
var W=0;
if(T>0x3988e){
if(T<0xbb67a){
U=1.5;
V=5.84962487220764160156e-01;
W=1.35003920212974897128e-08;
}else{
v+=1;
p-=0x00100000;
}
}
B=%_ConstructDouble(p,%_DoubleLo(B));
var G=B-U;
var q=1/(B+U);
var X=G*q;
var Y=%_ConstructDouble(%_DoubleHi(X),0);
var Z=%_ConstructDouble(%_DoubleHi(B+U),0)
var aa=B-(Z-U);
var ab=q*((G-Y*Z)-Y*aa);
var ac=X*X;
var u=ac*ac*(5.99999999999994648725e-01+ac*(4.28571428578550184252e-01+ac*(3.33333329818377432918e-01+ac*(
2.72728123808534006489e-01+ac*(2.30660745775561754067e-01+ac*2.06975017800338417784e-01)))));
u+=ab*(Y+X);
ac=Y*Y;
Z=%_ConstructDouble(%_DoubleHi(3.0+ac+u),0);
aa=u-((Z-3.0)-ac);
G=Y*Z;
q=ab*Z+aa*X;
var ad=%_ConstructDouble(%_DoubleHi(G+q),0);
var ae=q-(ad-G);
var af=9.61796700954437255859e-01*ad;
var ag=-7.02846165095275826516e-09*ad+ae*9.61796693925975554329e-01+W;
var s=v;
var ah=%_ConstructDouble(%_DoubleHi(((af+ag)+V)+s),0);
var ai=ag-(((ah-s)-V)-af);
return ah+ai;
}
b.InstallFunctions(d,2,[
"cos",MathCos,
"sin",MathSin,
"tan",MathTan,
"sinh",MathSinh,
"cosh",MathCosh,
"tanh",MathTanh,
"log10",MathLog10,
"log2",MathLog2,
"log1p",MathLog1p,
"expm1",MathExpm1
]);
%SetForceInlineFlag(MathSin);
%SetForceInlineFlag(MathCos);
})

dateQÿ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Date;
var d=a.Object;
var e=b.InternalArray;
var f;
var g;
var h;
var i;
var j=%GetRootNaN();
b.Import(function(k){
f=k.IsFinite;
g=k.MakeRangeError;
h=k.MathAbs;
i=k.MathFloor;
});
var l=j;
var m;
function LocalTimezone(n){
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return"";
CheckDateCacheCurrent();
if(n==l){
return m;
}
var o=%DateLocalTimezone(n);
l=n;
m=o;
return o;
}
function UTC(p){
if((!%_IsSmi(%IS_VAR(p))&&!(p==p)))return p;
return %DateToUTC(p);
}
function MakeTime(q,r,s,t){
if(!f(q))return j;
if(!f(r))return j;
if(!f(s))return j;
if(!f(t))return j;
return(%_ToInteger(q))*3600000
+(%_ToInteger(r))*60000
+(%_ToInteger(s))*1000
+(%_ToInteger(t));
}
function TimeInYear(u){
return DaysInYear(u)*86400000;
}
function MakeDay(u,v,w){
if(!f(u)||!f(v)||!f(w))return j;
u=(%_IsSmi(%IS_VAR(u))?u:%NumberToIntegerMapMinusZero(u));
v=(%_IsSmi(%IS_VAR(v))?v:%NumberToIntegerMapMinusZero(v));
w=(%_IsSmi(%IS_VAR(w))?w:%NumberToIntegerMapMinusZero(w));
if(u<-1000000||u>1000000||
v<-10000000||v>10000000){
return j;
}
return %DateMakeDay(u|0,v|0)+w-1;
}
function MakeDate(x,p){
var p=x*86400000+p;
if(h(p)>8640002592000000)return j;
return p;
}
function TimeClip(p){
if(!f(p))return j;
if(h(p)>8640000000000000)return j;
return(%_ToInteger(p))+0;
}
var y={
time:0,
string:null
};
function DateConstructor(u,v,w,z,A,B,t){
if(!%_IsConstructCall()){
return %_CallFunction(new c(),DateToString);
}
var C=%_ArgumentsLength();
var D;
if(C==0){
D=%DateCurrentTime();
(%DateSetValue(this,D,1));
}else if(C==1){
if((typeof(u)==='number')){
D=TimeClip(u);
}else if((typeof(u)==='string')){
CheckDateCacheCurrent();
var E=y;
if(E.string===u){
D=E.time;
}else{
D=DateParse(u);
if(!(!%_IsSmi(%IS_VAR(D))&&!(D==D))){
E.time=D;
E.string=u;
}
}
}else if((%_IsDate(u))){
D=(%_DateField(u,0));
}else{
var p=(%_ToPrimitive(u));
D=(typeof(p)==='string')?DateParse(p):(%_ToNumber(p));
}
(%DateSetValue(this,D,1));
}else{
u=(%_ToNumber(u));
v=(%_ToNumber(v));
w=C>2?(%_ToNumber(w)):1;
z=C>3?(%_ToNumber(z)):0;
A=C>4?(%_ToNumber(A)):0;
B=C>5?(%_ToNumber(B)):0;
t=C>6?(%_ToNumber(t)):0;
u=(!(!%_IsSmi(%IS_VAR(u))&&!(u==u))&&
0<=(%_ToInteger(u))&&
(%_ToInteger(u))<=99)?1900+(%_ToInteger(u)):u;
var x=MakeDay(u,v,w);
var p=MakeTime(z,A,B,t);
D=MakeDate(x,p);
(%DateSetValue(this,D,0));
}
}
var F=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
var G=['Jan','Feb','Mar','Apr','May','Jun',
'Jul','Aug','Sep','Oct','Nov','Dec'];
function TwoDigitString(D){
return D<10?"0"+D:""+D;
}
function DateString(w){
if(!%_IsDate(w))%_ThrowNotDateError();
return F[(%_DateField(w,4))]+' '
+G[(%_DateField(w,2))]+' '
+TwoDigitString((%_DateField(w,3)))+' '
+(%_DateField(w,1));
}
var H=['Sunday','Monday','Tuesday','Wednesday',
'Thursday','Friday','Saturday'];
var I=['January','February','March','April','May','June',
'July','August','September','October','November','December'];
function LongDateString(w){
if(!%_IsDate(w))%_ThrowNotDateError();
return H[(%_DateField(w,4))]+', '
+I[(%_DateField(w,2))]+' '
+TwoDigitString((%_DateField(w,3)))+', '
+(%_DateField(w,1));
}
function TimeString(w){
if(!%_IsDate(w))%_ThrowNotDateError();
return TwoDigitString((%_DateField(w,5)))+':'
+TwoDigitString((%_DateField(w,6)))+':'
+TwoDigitString((%_DateField(w,7)));
}
function TimeStringUTC(w){
if(!%_IsDate(w))%_ThrowNotDateError();
return TwoDigitString((%_DateField(w,15)))+':'
+TwoDigitString((%_DateField(w,16)))+':'
+TwoDigitString((%_DateField(w,17)));
}
function LocalTimezoneString(w){
if(!%_IsDate(w))%_ThrowNotDateError();
var o=LocalTimezone((%_DateField(w,0)));
var J=-(%_DateField(w,21));
var K=(J>=0)?1:-1;
var z=i((K*J)/60);
var r=i((K*J)%60);
var L=' GMT'+((K==1)?'+':'-')+
TwoDigitString(z)+TwoDigitString(r);
return L+' ('+o+')';
}
function DatePrintString(w){
if(!%_IsDate(w))%_ThrowNotDateError();
return DateString(w)+' '+TimeString(w);
}
var M=new e(8);
function DateParse(N){
var O=%DateParseString(N,M);
if((O===null))return j;
var x=MakeDay(O[0],O[1],O[2]);
var p=MakeTime(O[3],O[4],O[5],O[6]);
var w=MakeDate(x,p);
if((O[7]===null)){
return TimeClip(UTC(w));
}else{
return TimeClip(w-O[7]*1000);
}
}
function DateUTC(u,v,w,z,A,B,t){
u=(%_ToNumber(u));
v=(%_ToNumber(v));
var C=%_ArgumentsLength();
w=C>2?(%_ToNumber(w)):1;
z=C>3?(%_ToNumber(z)):0;
A=C>4?(%_ToNumber(A)):0;
B=C>5?(%_ToNumber(B)):0;
t=C>6?(%_ToNumber(t)):0;
u=(!(!%_IsSmi(%IS_VAR(u))&&!(u==u))&&
0<=(%_ToInteger(u))&&
(%_ToInteger(u))<=99)?1900+(%_ToInteger(u)):u;
var x=MakeDay(u,v,w);
var p=MakeTime(z,A,B,t);
return TimeClip(MakeDate(x,p));
}
function DateNow(){
return %DateCurrentTime();
}
function DateToString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0))
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
var P=LocalTimezoneString(this)
return DatePrintString(this)+P;
}
function DateToDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
return DateString(this);
}
function DateToTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
var P=LocalTimezoneString(this);
return TimeString(this)+P;
}
function DateToLocaleString(){
if(!%_IsDate(this))%_ThrowNotDateError();
return %_CallFunction(this,DateToString);
}
function DateToLocaleDateString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
return LongDateString(this);
}
function DateToLocaleTimeString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
return TimeString(this);
}
function DateValueOf(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetTime(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,0));
}
function DateGetFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1));
}
function DateGetUTCFullYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,11));
}
function DateGetMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,2));
}
function DateGetUTCMonth(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,12));
}
function DateGetDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,3));
}
function DateGetUTCDate(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,13));
}
function DateGetDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,4));
}
function DateGetUTCDay(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,14));
}
function DateGetHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,5));
}
function DateGetUTCHours(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,15));
}
function DateGetMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,6));
}
function DateGetUTCMinutes(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,16));
}
function DateGetSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,7));
}
function DateGetUTCSeconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,17))
}
function DateGetMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,8));
}
function DateGetUTCMilliseconds(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,18));
}
function DateGetTimezoneOffset(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,21));
}
function DateSetTime(t){
if(!%_IsDate(this))%_ThrowNotDateError();
(%DateSetValue(this,(%_ToNumber(t)),1));
return(%_DateField(this,0));
}
function DateSetMilliseconds(t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
t=(%_ToNumber(t));
var p=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),(%_DateField(this,7)),t);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),p),0));
}
function DateSetUTCMilliseconds(t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
t=(%_ToNumber(t));
var p=MakeTime((%_DateField(this,15)),
(%_DateField(this,16)),
(%_DateField(this,17)),
t);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),p),1));
}
function DateSetSeconds(s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
s=(%_ToNumber(s));
t=%_ArgumentsLength()<2?(%_DateField(this,8)):(%_ToNumber(t));
var p=MakeTime((%_DateField(this,5)),(%_DateField(this,6)),s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),p),0));
}
function DateSetUTCSeconds(s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
s=(%_ToNumber(s));
t=%_ArgumentsLength()<2?(%_DateField(this,18)):(%_ToNumber(t));
var p=MakeTime((%_DateField(this,15)),(%_DateField(this,16)),s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),p),1));
}
function DateSetMinutes(r,s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
r=(%_ToNumber(r));
var C=%_ArgumentsLength();
s=C<2?(%_DateField(this,7)):(%_ToNumber(s));
t=C<3?(%_DateField(this,8)):(%_ToNumber(t));
var p=MakeTime((%_DateField(this,5)),r,s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),p),0));
}
function DateSetUTCMinutes(r,s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
r=(%_ToNumber(r));
var C=%_ArgumentsLength();
s=C<2?(%_DateField(this,17)):(%_ToNumber(s));
t=C<3?(%_DateField(this,18)):(%_ToNumber(t));
var p=MakeTime((%_DateField(this,15)),r,s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),p),1));
}
function DateSetHours(q,r,s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
q=(%_ToNumber(q));
var C=%_ArgumentsLength();
r=C<2?(%_DateField(this,6)):(%_ToNumber(r));
s=C<3?(%_DateField(this,7)):(%_ToNumber(s));
t=C<4?(%_DateField(this,8)):(%_ToNumber(t));
var p=MakeTime(q,r,s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,9)),p),0));
}
function DateSetUTCHours(q,r,s,t){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
q=(%_ToNumber(q));
var C=%_ArgumentsLength();
r=C<2?(%_DateField(this,16)):(%_ToNumber(r));
s=C<3?(%_DateField(this,17)):(%_ToNumber(s));
t=C<4?(%_DateField(this,18)):(%_ToNumber(t));
var p=MakeTime(q,r,s,t);
return(%DateSetValue(this,MakeDate((%_DateField(this,19)),p),1));
}
function DateSetDate(w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
w=(%_ToNumber(w));
var x=MakeDay((%_DateField(this,1)),(%_DateField(this,2)),w);
return(%DateSetValue(this,MakeDate(x,(%_DateField(this,10))),0));
}
function DateSetUTCDate(w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
w=(%_ToNumber(w));
var x=MakeDay((%_DateField(this,11)),(%_DateField(this,12)),w);
return(%DateSetValue(this,MakeDate(x,(%_DateField(this,20))),1));
}
function DateSetMonth(v,w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
v=(%_ToNumber(v));
w=%_ArgumentsLength()<2?(%_DateField(this,3)):(%_ToNumber(w));
var x=MakeDay((%_DateField(this,1)),v,w);
return(%DateSetValue(this,MakeDate(x,(%_DateField(this,10))),0));
}
function DateSetUTCMonth(v,w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
v=(%_ToNumber(v));
w=%_ArgumentsLength()<2?(%_DateField(this,13)):(%_ToNumber(w));
var x=MakeDay((%_DateField(this,11)),v,w);
return(%DateSetValue(this,MakeDate(x,(%_DateField(this,20))),1));
}
function DateSetFullYear(u,v,w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0)+%_DateField(this,21));
u=(%_ToNumber(u));
var C=%_ArgumentsLength();
var p;
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))){
v=C<2?0:(%_ToNumber(v));
w=C<3?1:(%_ToNumber(w));
p=0;
}else{
v=C<2?(%_DateField(this,2)):(%_ToNumber(v));
w=C<3?(%_DateField(this,3)):(%_ToNumber(w));
p=(%_DateField(this,10));
}
var x=MakeDay(u,v,w);
return(%DateSetValue(this,MakeDate(x,p),0));
}
function DateSetUTCFullYear(u,v,w){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
u=(%_ToNumber(u));
var C=%_ArgumentsLength();
var p;
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))){
v=C<2?0:(%_ToNumber(v));
w=C<3?1:(%_ToNumber(w));
p=0;
}else{
v=C<2?(%_DateField(this,12)):(%_ToNumber(v));
w=C<3?(%_DateField(this,13)):(%_ToNumber(w));
p=(%_DateField(this,20));
}
var x=MakeDay(u,v,w);
return(%DateSetValue(this,MakeDate(x,p),1));
}
function DateToUTCString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))return'Invalid Date';
return F[(%_DateField(this,14))]+', '
+TwoDigitString((%_DateField(this,13)))+' '
+G[(%_DateField(this,12))]+' '
+(%_DateField(this,11))+' '
+TimeStringUTC(this)+' GMT';
}
function DateGetYear(){
if(!%_IsDate(this))%_ThrowNotDateError();
return(%_DateField(this,1))-1900;
}
function DateSetYear(u){
if(!%_IsDate(this))%_ThrowNotDateError();
u=(%_ToNumber(u));
if((!%_IsSmi(%IS_VAR(u))&&!(u==u)))return(%DateSetValue(this,j,1));
u=(0<=(%_ToInteger(u))&&(%_ToInteger(u))<=99)
?1900+(%_ToInteger(u)):u;
var n=(%_DateField(this,0)+%_DateField(this,21));
var v,w,p;
if((!%_IsSmi(%IS_VAR(n))&&!(n==n))){
v=0;
w=1;
p=0;
}else{
v=(%_DateField(this,2));
w=(%_DateField(this,3));
p=(%_DateField(this,10));
}
var x=MakeDay(u,v,w);
return(%DateSetValue(this,MakeDate(x,p),0));
}
function DateToGMTString(){
return %_CallFunction(this,DateToUTCString);
}
function PadInt(Q,R){
if(R==1)return Q;
return Q<%_MathPow(10,R-1)?'0'+PadInt(Q,R-1):Q;
}
function DateToISOString(){
if(!%_IsDate(this))%_ThrowNotDateError();
var n=(%_DateField(this,0));
if((!%_IsSmi(%IS_VAR(n))&&!(n==n)))throw g(146);
var u=(%_DateField(this,11));
var S;
if(u>=0&&u<=9999){
S=PadInt(u,4);
}else{
if(u<0){
S="-"+PadInt(-u,6);
}else{
S="+"+PadInt(u,6);
}
}
return S+
'-'+PadInt((%_DateField(this,12))+1,2)+
'-'+PadInt((%_DateField(this,13)),2)+
'T'+PadInt((%_DateField(this,15)),2)+
':'+PadInt((%_DateField(this,16)),2)+
':'+PadInt((%_DateField(this,17)),2)+
'.'+PadInt((%_DateField(this,18)),3)+
'Z';
}
function DateToJSON(T){
var U=(%_ToObject(this));
var V=(%_ToPrimitive_Number(U));
if((typeof(V)==='number')&&!(%_IsSmi(%IS_VAR(V))||((V==V)&&(V!=1/0)&&(V!=-1/0)))){
return null;
}
return U.toISOString();
}
var W;
var X=j;
function CheckDateCacheCurrent(){
if(!W){
W=%DateCacheVersion();
if(!W)return;
}
if(W[0]==X){
return;
}
X=W[0];
l=j;
m=(void 0);
y.time=j;
y.string=null;
}
function CreateDate(p){
var w=new c();
w.setTime(p);
return w;
}
%SetCode(c,DateConstructor);
%FunctionSetPrototype(c,new d());
b.InstallFunctions(c,2,[
"UTC",DateUTC,
"parse",DateParse,
"now",DateNow
]);
%AddNamedProperty(c.prototype,"constructor",c,2);
b.InstallFunctions(c.prototype,2,[
"toString",DateToString,
"toDateString",DateToDateString,
"toTimeString",DateToTimeString,
"toLocaleString",DateToLocaleString,
"toLocaleDateString",DateToLocaleDateString,
"toLocaleTimeString",DateToLocaleTimeString,
"valueOf",DateValueOf,
"getTime",DateGetTime,
"getFullYear",DateGetFullYear,
"getUTCFullYear",DateGetUTCFullYear,
"getMonth",DateGetMonth,
"getUTCMonth",DateGetUTCMonth,
"getDate",DateGetDate,
"getUTCDate",DateGetUTCDate,
"getDay",DateGetDay,
"getUTCDay",DateGetUTCDay,
"getHours",DateGetHours,
"getUTCHours",DateGetUTCHours,
"getMinutes",DateGetMinutes,
"getUTCMinutes",DateGetUTCMinutes,
"getSeconds",DateGetSeconds,
"getUTCSeconds",DateGetUTCSeconds,
"getMilliseconds",DateGetMilliseconds,
"getUTCMilliseconds",DateGetUTCMilliseconds,
"getTimezoneOffset",DateGetTimezoneOffset,
"setTime",DateSetTime,
"setMilliseconds",DateSetMilliseconds,
"setUTCMilliseconds",DateSetUTCMilliseconds,
"setSeconds",DateSetSeconds,
"setUTCSeconds",DateSetUTCSeconds,
"setMinutes",DateSetMinutes,
"setUTCMinutes",DateSetUTCMinutes,
"setHours",DateSetHours,
"setUTCHours",DateSetUTCHours,
"setDate",DateSetDate,
"setUTCDate",DateSetUTCDate,
"setMonth",DateSetMonth,
"setUTCMonth",DateSetUTCMonth,
"setFullYear",DateSetFullYear,
"setUTCFullYear",DateSetUTCFullYear,
"toGMTString",DateToGMTString,
"toUTCString",DateToUTCString,
"getYear",DateGetYear,
"setYear",DateSetYear,
"toISOString",DateToISOString,
"toJSON",DateToJSON
]);
%InstallToContext(["create_date_fun",CreateDate]);
})

regexp©W
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e;
var f=a.Object;
var g=a.RegExp;
var h=b.InternalPackedArray;
var i;
b.ImportFromExperimental(function(j){
c=j.FLAG_harmony_regexps;
d=j.FLAG_harmony_tolength;
e=j.FLAG_harmony_unicode_regexps;
});
b.Import(function(j){
i=j.MakeTypeError;
});
var k=new h(
2,
"",
(void 0),
0,
0
);
function DoConstructRegExp(l,m,n){
if((%_IsRegExp(m))){
if(!(n===(void 0)))throw i(99);
n=(m.global?'g':'')
+(m.ignoreCase?'i':'')
+(m.multiline?'m':'');
if(e)
n+=(m.unicode?'u':'');
if(c)
n+=(m.sticky?'y':'');
m=m.source;
}
m=(m===(void 0))?'':(%_ToString(m));
n=(n===(void 0))?'':(%_ToString(n));
%RegExpInitializeAndCompile(l,m,n);
}
function RegExpConstructor(m,n){
if(%_IsConstructCall()){
DoConstructRegExp(this,m,n);
}else{
if((%_IsRegExp(m))&&(n===(void 0))){
return m;
}
return new g(m,n);
}
}
function RegExpCompileJS(m,n){
if(this==g.prototype){
throw i(37,
'RegExp.prototype.compile',this);
}
if((m===(void 0))&&%_ArgumentsLength()!=0){
DoConstructRegExp(this,'undefined',n);
}else{
DoConstructRegExp(this,m,n);
}
}
function DoRegExpExec(o,p,q){
var r=%_RegExpExec(o,p,q,k);
return r;
}
function RegExpExecNoTests(o,p,s){
var t=%_RegExpExec(o,p,s,k);
if(t!==null){
if(c&&o.sticky){
o.lastIndex=t[4];
}
var u=((t)[0])>>1;
var s=t[3];
var v=t[4];
var w=%_SubString(p,s,v);
var r=%_RegExpConstructResult(u,s,p);
r[0]=w;
if(u==1)return r;
var x=3+2;
for(var y=1;y<u;y++){
s=t[x++];
if(s!=-1){
v=t[x];
r[y]=%_SubString(p,s,v);
}
x++;
}
return r;
;
}
o.lastIndex=0;
return null;
}
function RegExpExecJS(p){
if(!(%_IsRegExp(this))){
throw i(37,
'RegExp.prototype.exec',this);
}
p=(%_ToString(p));
var z=this.lastIndex;
var y=(d?(%_ToLength(z)):(%_ToInteger(z)));
var A=this.global||(c&&this.sticky);
if(A){
if(y<0||y>p.length){
this.lastIndex=0;
return null;
}
}else{
y=0;
}
var B=%_RegExpExec(this,p,y,k);
if((B===null)){
this.lastIndex=0;
return null;
}
if(A){
this.lastIndex=k[4];
}
var u=((B)[0])>>1;
var s=B[3];
var v=B[4];
var w=%_SubString(p,s,v);
var r=%_RegExpConstructResult(u,s,p);
r[0]=w;
if(u==1)return r;
var x=3+2;
for(var y=1;y<u;y++){
s=B[x++];
if(s!=-1){
v=B[x];
r[y]=%_SubString(p,s,v);
}
x++;
}
return r;
;
}
var C;
var D;
function RegExpTest(p){
if(!(%_IsRegExp(this))){
throw i(37,
'RegExp.prototype.test',this);
}
p=(%_ToString(p));
var z=this.lastIndex;
var y=(d?(%_ToLength(z)):(%_ToInteger(z)));
if(this.global||(c&&this.sticky)){
if(y<0||y>p.length){
this.lastIndex=0;
return false;
}
var B=%_RegExpExec(this,p,y,k);
if((B===null)){
this.lastIndex=0;
return false;
}
this.lastIndex=k[4];
return true;
}else{
var o=this;
if(o.source.length>=3&&
%_StringCharCodeAt(o.source,0)==46&&
%_StringCharCodeAt(o.source,1)==42&&
%_StringCharCodeAt(o.source,2)!=63){
o=TrimRegExp(o);
}
var B=%_RegExpExec(o,p,0,k);
if((B===null)){
this.lastIndex=0;
return false;
}
return true;
}
}
function TrimRegExp(o){
if(!%_ObjectEquals(C,o)){
C=o;
D=
new g(%_SubString(o.source,2,o.source.length),
(o.ignoreCase?o.multiline?"im":"i"
:o.multiline?"m":""));
}
return D;
}
function RegExpToString(){
if(!(%_IsRegExp(this))){
throw i(37,
'RegExp.prototype.toString',this);
}
var r='/'+this.source+'/';
if(this.global)r+='g';
if(this.ignoreCase)r+='i';
if(this.multiline)r+='m';
if(e&&this.unicode)r+='u';
if(c&&this.sticky)r+='y';
return r;
}
function RegExpGetLastMatch(){
var E=((k)[1]);
return %_SubString(E,
k[3],
k[4]);
}
function RegExpGetLastParen(){
var F=((k)[0]);
if(F<=2)return'';
var E=((k)[1]);
var s=k[(3+(F-2))];
var v=k[(3+(F-1))];
if(s!=-1&&v!=-1){
return %_SubString(E,s,v);
}
return"";
}
function RegExpGetLeftContext(){
var G;
var H;
G=k[3];
H=((k)[1]);
return %_SubString(H,0,G);
}
function RegExpGetRightContext(){
var G;
var H;
G=k[4];
H=((k)[1]);
return %_SubString(H,G,H.length);
}
function RegExpMakeCaptureGetter(I){
return function foo(){
var q=I*2;
if(q>=((k)[0]))return'';
var J=k[(3+(q))];
var K=k[(3+(q+1))];
if(J==-1||K==-1)return'';
return %_SubString(((k)[1]),J,K);
};
}
%FunctionSetInstanceClassName(g,'RegExp');
%FunctionSetPrototype(g,new f());
%AddNamedProperty(
g.prototype,'constructor',g,2);
%SetCode(g,RegExpConstructor);
b.InstallFunctions(g.prototype,2,[
"exec",RegExpExecJS,
"test",RegExpTest,
"toString",RegExpToString,
"compile",RegExpCompileJS
]);
%FunctionSetLength(g.prototype.compile,1);
var L=function(){
var M=((k)[2]);
return(M===(void 0))?"":M;
};
var N=function(p){
((k)[2])=(%_ToString(p));
};
%OptimizeObjectForAddingMultipleProperties(g,22);
%DefineAccessorPropertyUnchecked(g,'input',L,
N,4);
%DefineAccessorPropertyUnchecked(g,'$_',L,
N,2|4);
var O=false;
var P=function(){return O;};
var Q=function(R){O=R?true:false;};
%DefineAccessorPropertyUnchecked(g,'multiline',P,
Q,4);
%DefineAccessorPropertyUnchecked(g,'$*',P,
Q,
2|4);
var S=function(T){};
%DefineAccessorPropertyUnchecked(g,'lastMatch',RegExpGetLastMatch,
S,4);
%DefineAccessorPropertyUnchecked(g,'$&',RegExpGetLastMatch,
S,2|4);
%DefineAccessorPropertyUnchecked(g,'lastParen',RegExpGetLastParen,
S,4);
%DefineAccessorPropertyUnchecked(g,'$+',RegExpGetLastParen,
S,2|4);
%DefineAccessorPropertyUnchecked(g,'leftContext',
RegExpGetLeftContext,S,
4);
%DefineAccessorPropertyUnchecked(g,'$`',RegExpGetLeftContext,
S,2|4);
%DefineAccessorPropertyUnchecked(g,'rightContext',
RegExpGetRightContext,S,
4);
%DefineAccessorPropertyUnchecked(g,"$'",RegExpGetRightContext,
S,2|4);
for(var y=1;y<10;++y){
%DefineAccessorPropertyUnchecked(g,'$'+y,
RegExpMakeCaptureGetter(y),S,
4);
}
%ToFastProperties(g);
b.Export(function(U){
U.RegExpExec=DoRegExpExec;
U.RegExpExecNoTests=RegExpExecNoTests;
U.RegExpLastMatchInfo=k;
U.RegExpTest=RegExpTest;
});
})

,arraybufferÅ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.ArrayBuffer;
var d=a.Object;
var e;
var f;
var g;
var h;
var i=b.ImportNow("to_string_tag_symbol");
b.Import(function(j){
e=j.MakeTypeError;
f=j.MaxSimple;
g=j.MinSimple;
h=j.ToPositiveInteger;
});
function ArrayBufferConstructor(k){
if(%_IsConstructCall()){
var l=h(k,132);
%ArrayBufferInitialize(this,l,false);
}else{
throw e(22,"ArrayBuffer");
}
}
function ArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw e(37,
'ArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function ArrayBufferSlice(m,n){
if(!(%_ClassOf(this)==='ArrayBuffer')){
throw e(37,
'ArrayBuffer.prototype.slice',this);
}
var o=(%_ToInteger(m));
if(!(n===(void 0))){
n=(%_ToInteger(n));
}
var p;
var q=%_ArrayBufferGetByteLength(this);
if(o<0){
p=f(q+o,0);
}else{
p=g(o,q);
}
var r=(n===(void 0))?q:n;
var s;
if(r<0){
s=f(q+r,0);
}else{
s=g(r,q);
}
if(s<p){
s=p;
}
var t=s-p;
var u=new c(t);
%ArrayBufferSliceImpl(this,u,p);
return u;
}
function ArrayBufferIsViewJS(v){
return %ArrayBufferIsView(v);
}
%SetCode(c,ArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(
c.prototype,"constructor",c,2);
%AddNamedProperty(c.prototype,
i,"ArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",
ArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",ArrayBufferIsViewJS
]);
b.InstallFunctions(c.prototype,2,[
"slice",ArrayBufferSlice
]);
})

(typedarrayZn
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=a.ArrayBuffer;
var f=a.DataView;
var g=a.Object;
var h=b.InternalArray;
var i=b.ImportNow("iterator_symbol");
var j;
var k;
var l;
var m;
var n;
var o=b.ImportNow("to_string_tag_symbol");
var p=a.Uint8Array;

var q=a.Int8Array;

var r=a.Uint16Array;

var s=a.Int16Array;

var t=a.Uint32Array;

var u=a.Int32Array;

var v=a.Float32Array;

var w=a.Float64Array;

var x=a.Uint8ClampedArray;


b.Import(function(y){
c=y.ArrayValues;
j=y.MakeRangeError;
k=y.MakeTypeError;
l=y.MaxSimple;
m=y.MinSimple;
n=y.ToPositiveInteger;
});
function Uint8ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 1!==0){
throw j(147,
"start offset","Uint8Array",1);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 1!==0){
throw j(147,
"byte length","Uint8Array",1);
}
F=D-E;
G=F/1;
}else{
var G=C;
F=G*1;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,1,A,E,F,true);
}
function Uint8ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*1;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,1,A,0,I,true);
}else{
%_TypedArrayInitialize(z,1,null,0,I,true);
}
}
function Uint8ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*1;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,1,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,1,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Uint8ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Uint8ArrayConstructByArrayLike(z,O);
}
function Uint8ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Uint8ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Uint8ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Uint8ArrayConstructByArrayLike(this,S);
}else{
Uint8ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Uint8Array")
}
}
function Uint8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw k(37,"Uint8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw k(37,"Uint8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw k(37,"Uint8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8Array_GetLength(){
if(!(%_ClassOf(this)==='Uint8Array')){
throw k(37,"Uint8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Uint8Array')){
throw k(37,"Uint8Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*1;
return new p(%TypedArrayGetBuffer(this),
aa,G);
}

function Int8ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 1!==0){
throw j(147,
"start offset","Int8Array",1);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 1!==0){
throw j(147,
"byte length","Int8Array",1);
}
F=D-E;
G=F/1;
}else{
var G=C;
F=G*1;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,2,A,E,F,true);
}
function Int8ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*1;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,2,A,0,I,true);
}else{
%_TypedArrayInitialize(z,2,null,0,I,true);
}
}
function Int8ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*1;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,2,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,2,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Int8ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Int8ArrayConstructByArrayLike(z,O);
}
function Int8ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Int8ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Int8ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Int8ArrayConstructByArrayLike(this,S);
}else{
Int8ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Int8Array")
}
}
function Int8Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int8Array')){
throw k(37,"Int8Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int8Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw k(37,"Int8Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int8Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int8Array')){
throw k(37,"Int8Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int8Array_GetLength(){
if(!(%_ClassOf(this)==='Int8Array')){
throw k(37,"Int8Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int8ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Int8Array')){
throw k(37,"Int8Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*1;
return new q(%TypedArrayGetBuffer(this),
aa,G);
}

function Uint16ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 2!==0){
throw j(147,
"start offset","Uint16Array",2);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 2!==0){
throw j(147,
"byte length","Uint16Array",2);
}
F=D-E;
G=F/2;
}else{
var G=C;
F=G*2;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,3,A,E,F,true);
}
function Uint16ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*2;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,3,A,0,I,true);
}else{
%_TypedArrayInitialize(z,3,null,0,I,true);
}
}
function Uint16ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*2;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,3,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,3,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Uint16ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Uint16ArrayConstructByArrayLike(z,O);
}
function Uint16ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Uint16ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Uint16ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Uint16ArrayConstructByArrayLike(this,S);
}else{
Uint16ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Uint16Array")
}
}
function Uint16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw k(37,"Uint16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw k(37,"Uint16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw k(37,"Uint16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint16Array_GetLength(){
if(!(%_ClassOf(this)==='Uint16Array')){
throw k(37,"Uint16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint16ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Uint16Array')){
throw k(37,"Uint16Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*2;
return new r(%TypedArrayGetBuffer(this),
aa,G);
}

function Int16ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 2!==0){
throw j(147,
"start offset","Int16Array",2);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 2!==0){
throw j(147,
"byte length","Int16Array",2);
}
F=D-E;
G=F/2;
}else{
var G=C;
F=G*2;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,4,A,E,F,true);
}
function Int16ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*2;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,4,A,0,I,true);
}else{
%_TypedArrayInitialize(z,4,null,0,I,true);
}
}
function Int16ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*2;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,4,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,4,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Int16ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Int16ArrayConstructByArrayLike(z,O);
}
function Int16ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Int16ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Int16ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Int16ArrayConstructByArrayLike(this,S);
}else{
Int16ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Int16Array")
}
}
function Int16Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int16Array')){
throw k(37,"Int16Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int16Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw k(37,"Int16Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int16Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int16Array')){
throw k(37,"Int16Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int16Array_GetLength(){
if(!(%_ClassOf(this)==='Int16Array')){
throw k(37,"Int16Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int16ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Int16Array')){
throw k(37,"Int16Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*2;
return new s(%TypedArrayGetBuffer(this),
aa,G);
}

function Uint32ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 4!==0){
throw j(147,
"start offset","Uint32Array",4);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 4!==0){
throw j(147,
"byte length","Uint32Array",4);
}
F=D-E;
G=F/4;
}else{
var G=C;
F=G*4;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,5,A,E,F,true);
}
function Uint32ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*4;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,5,A,0,I,true);
}else{
%_TypedArrayInitialize(z,5,null,0,I,true);
}
}
function Uint32ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*4;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,5,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,5,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Uint32ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Uint32ArrayConstructByArrayLike(z,O);
}
function Uint32ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Uint32ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Uint32ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Uint32ArrayConstructByArrayLike(this,S);
}else{
Uint32ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Uint32Array")
}
}
function Uint32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw k(37,"Uint32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw k(37,"Uint32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw k(37,"Uint32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint32Array_GetLength(){
if(!(%_ClassOf(this)==='Uint32Array')){
throw k(37,"Uint32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint32ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Uint32Array')){
throw k(37,"Uint32Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*4;
return new t(%TypedArrayGetBuffer(this),
aa,G);
}

function Int32ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 4!==0){
throw j(147,
"start offset","Int32Array",4);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 4!==0){
throw j(147,
"byte length","Int32Array",4);
}
F=D-E;
G=F/4;
}else{
var G=C;
F=G*4;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,6,A,E,F,true);
}
function Int32ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*4;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,6,A,0,I,true);
}else{
%_TypedArrayInitialize(z,6,null,0,I,true);
}
}
function Int32ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*4;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,6,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,6,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Int32ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Int32ArrayConstructByArrayLike(z,O);
}
function Int32ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Int32ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Int32ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Int32ArrayConstructByArrayLike(this,S);
}else{
Int32ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Int32Array")
}
}
function Int32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Int32Array')){
throw k(37,"Int32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Int32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw k(37,"Int32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Int32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Int32Array')){
throw k(37,"Int32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Int32Array_GetLength(){
if(!(%_ClassOf(this)==='Int32Array')){
throw k(37,"Int32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Int32ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Int32Array')){
throw k(37,"Int32Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*4;
return new u(%TypedArrayGetBuffer(this),
aa,G);
}

function Float32ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 4!==0){
throw j(147,
"start offset","Float32Array",4);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 4!==0){
throw j(147,
"byte length","Float32Array",4);
}
F=D-E;
G=F/4;
}else{
var G=C;
F=G*4;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,7,A,E,F,true);
}
function Float32ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*4;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,7,A,0,I,true);
}else{
%_TypedArrayInitialize(z,7,null,0,I,true);
}
}
function Float32ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*4;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,7,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,7,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Float32ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Float32ArrayConstructByArrayLike(z,O);
}
function Float32ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Float32ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Float32ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Float32ArrayConstructByArrayLike(this,S);
}else{
Float32ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Float32Array")
}
}
function Float32Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float32Array')){
throw k(37,"Float32Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float32Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw k(37,"Float32Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float32Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float32Array')){
throw k(37,"Float32Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float32Array_GetLength(){
if(!(%_ClassOf(this)==='Float32Array')){
throw k(37,"Float32Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float32ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Float32Array')){
throw k(37,"Float32Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*4;
return new v(%TypedArrayGetBuffer(this),
aa,G);
}

function Float64ArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 8!==0){
throw j(147,
"start offset","Float64Array",8);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 8!==0){
throw j(147,
"byte length","Float64Array",8);
}
F=D-E;
G=F/8;
}else{
var G=C;
F=G*8;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,8,A,E,F,true);
}
function Float64ArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*8;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,8,A,0,I,true);
}else{
%_TypedArrayInitialize(z,8,null,0,I,true);
}
}
function Float64ArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*8;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,8,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,8,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Float64ArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Float64ArrayConstructByArrayLike(z,O);
}
function Float64ArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Float64ArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Float64ArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Float64ArrayConstructByArrayLike(this,S);
}else{
Float64ArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Float64Array")
}
}
function Float64Array_GetBuffer(){
if(!(%_ClassOf(this)==='Float64Array')){
throw k(37,"Float64Array.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Float64Array_GetByteLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw k(37,"Float64Array.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Float64Array_GetByteOffset(){
if(!(%_ClassOf(this)==='Float64Array')){
throw k(37,"Float64Array.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Float64Array_GetLength(){
if(!(%_ClassOf(this)==='Float64Array')){
throw k(37,"Float64Array.length",this);
}
return %_TypedArrayGetLength(this);
}
function Float64ArraySubArray(V,W){
if(!(%_ClassOf(this)==='Float64Array')){
throw k(37,"Float64Array.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*8;
return new w(%TypedArrayGetBuffer(this),
aa,G);
}

function Uint8ClampedArrayConstructByArrayBuffer(z,A,B,C){
if(!(B===(void 0))){
B=n(B,148);
}
if(!(C===(void 0))){
C=n(C,148);
}
var D=%_ArrayBufferGetByteLength(A);
var E;
if((B===(void 0))){
E=0;
}else{
E=B;
if(E % 1!==0){
throw j(147,
"start offset","Uint8ClampedArray",1);
}
if(E>D){
throw j(149);
}
}
var F;
var G;
if((C===(void 0))){
if(D % 1!==0){
throw j(147,
"byte length","Uint8ClampedArray",1);
}
F=D-E;
G=F/1;
}else{
var G=C;
F=G*1;
}
if((E+F>D)
||(G>%_MaxSmi())){
throw j(148);
}
%_TypedArrayInitialize(z,9,A,E,F,true);
}
function Uint8ClampedArrayConstructByLength(z,C){
var H=(C===(void 0))?
0:n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var I=H*1;
if(I>%_TypedArrayMaxSizeInHeap()){
var A=new e(I);
%_TypedArrayInitialize(z,9,A,0,I,true);
}else{
%_TypedArrayInitialize(z,9,null,0,I,true);
}
}
function Uint8ClampedArrayConstructByArrayLike(z,J){
var C=J.length;
var H=n(C,148);
if(H>%_MaxSmi()){
throw j(148);
}
var K=false;
var I=H*1;
if(I<=%_TypedArrayMaxSizeInHeap()){
%_TypedArrayInitialize(z,9,null,0,I,false);
}else{
K=
%TypedArrayInitializeFromArrayLike(z,9,J,H);
}
if(!K){
for(var L=0;L<H;L++){
z[L]=J[L];
}
}
}
function Uint8ClampedArrayConstructByIterable(z,M,N){
var O=new h();
var P=%_Call(N,M);
var Q={
__proto__:null
};
Q[i]=function(){return P;}
for(var R of Q){
O.push(R);
}
Uint8ClampedArrayConstructByArrayLike(z,O);
}
function Uint8ClampedArrayConstructor(S,T,U){
if(%_IsConstructCall()){
if((%_ClassOf(S)==='ArrayBuffer')||(%_ClassOf(S)==='SharedArrayBuffer')){
Uint8ClampedArrayConstructByArrayBuffer(this,S,T,U);
}else if((typeof(S)==='number')||(typeof(S)==='string')||
(typeof(S)==='boolean')||(S===(void 0))){
Uint8ClampedArrayConstructByLength(this,S);
}else{
var N=S[i];
if((N===(void 0))||N===c){
Uint8ClampedArrayConstructByArrayLike(this,S);
}else{
Uint8ClampedArrayConstructByIterable(this,S,N);
}
}
}else{
throw k(22,"Uint8ClampedArray")
}
}
function Uint8ClampedArray_GetBuffer(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw k(37,"Uint8ClampedArray.buffer",this);
}
return %TypedArrayGetBuffer(this);
}
function Uint8ClampedArray_GetByteLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw k(37,"Uint8ClampedArray.byteLength",this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function Uint8ClampedArray_GetByteOffset(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw k(37,"Uint8ClampedArray.byteOffset",this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function Uint8ClampedArray_GetLength(){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw k(37,"Uint8ClampedArray.length",this);
}
return %_TypedArrayGetLength(this);
}
function Uint8ClampedArraySubArray(V,W){
if(!(%_ClassOf(this)==='Uint8ClampedArray')){
throw k(37,"Uint8ClampedArray.subarray",this);
}
var X=(%_ToInteger(V));
if(!(W===(void 0))){
var Y=(%_ToInteger(W));
var Z=%_TypedArrayGetLength(this);
}else{
var Z=%_TypedArrayGetLength(this);
var Y=Z;
}
if(X<0){
X=l(0,Z+X);
}else{
X=m(X,Z);
}
if(Y<0){
Y=l(0,Z+Y);
}else{
Y=m(Y,Z);
}
if(Y<X){
Y=X;
}
var G=Y-X;
var aa=
%_ArrayBufferViewGetByteOffset(this)+X*1;
return new x(%TypedArrayGetBuffer(this),
aa,G);
}


function TypedArraySetFromArrayLike(ab,ac,ad,E){
if(E>0){
for(var L=0;L<ad;L++){
ab[E+L]=ac[L];
}
}
else{
for(var L=0;L<ad;L++){
ab[L]=ac[L];
}
}
}
function TypedArraySetFromOverlappingTypedArray(ab,ac,E){
var ae=ac.BYTES_PER_ELEMENT;
var af=ab.BYTES_PER_ELEMENT;
var ad=ac.length;
function CopyLeftPart(){
var ag=ab.byteOffset+(E+1)*af;
var ah=ac.byteOffset;
for(var ai=0;
ai<ad&&ag<=ah;
ai++){
ab[E+ai]=ac[ai];
ag+=af;
ah+=ae;
}
return ai;
}
var ai=CopyLeftPart();
function CopyRightPart(){
var ag=
ab.byteOffset+(E+ad-1)*af;
var ah=
ac.byteOffset+ad*ae;
for(var aj=ad-1;
aj>=ai&&ag>=ah;
aj--){
ab[E+aj]=ac[aj];
ag-=af;
ah-=ae;
}
return aj;
}
var aj=CopyRightPart();
var ak=new d(aj+1-ai);
for(var L=ai;L<=aj;L++){
ak[L-ai]=ac[L];
}
for(L=ai;L<=aj;L++){
ab[E+L]=ak[L-ai];
}
}
function TypedArraySet(z,E){
var al=(E===(void 0))?0:(%_ToInteger(E));
if(al<0)throw k(158);
if(al>%_MaxSmi()){
throw j(159);
}
switch(%TypedArraySetFastCases(this,z,al)){
case 0:
return;
case 1:
TypedArraySetFromOverlappingTypedArray(this,z,al);
return;
case 2:
TypedArraySetFromArrayLike(this,z,z.length,al);
return;
case 3:
var H=z.length;
if((H===(void 0))){
if((typeof(z)==='number')){
throw k(40);
}
return;
}
H=(%_ToLength(H));
if(al+H>this.length){
throw j(159);
}
TypedArraySetFromArrayLike(this,z,H,al);
return;
}
}
function TypedArrayGetToStringTag(){
if(!%_IsTypedArray(this))return;
var am=%_ClassOf(this);
if((am===(void 0)))return;
return am;
}
%SetCode(p,Uint8ArrayConstructor);
%FunctionSetPrototype(p,new g());
%AddNamedProperty(p,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(p.prototype,
"constructor",a.Uint8Array,2);
%AddNamedProperty(p.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(p.prototype,"buffer",Uint8Array_GetBuffer);
b.InstallGetter(p.prototype,"byteOffset",Uint8Array_GetByteOffset,
2|4);
b.InstallGetter(p.prototype,"byteLength",Uint8Array_GetByteLength,
2|4);
b.InstallGetter(p.prototype,"length",Uint8Array_GetLength,
2|4);
b.InstallGetter(p.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(p.prototype,2,[
"subarray",Uint8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(q,Int8ArrayConstructor);
%FunctionSetPrototype(q,new g());
%AddNamedProperty(q,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(q.prototype,
"constructor",a.Int8Array,2);
%AddNamedProperty(q.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(q.prototype,"buffer",Int8Array_GetBuffer);
b.InstallGetter(q.prototype,"byteOffset",Int8Array_GetByteOffset,
2|4);
b.InstallGetter(q.prototype,"byteLength",Int8Array_GetByteLength,
2|4);
b.InstallGetter(q.prototype,"length",Int8Array_GetLength,
2|4);
b.InstallGetter(q.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(q.prototype,2,[
"subarray",Int8ArraySubArray,
"set",TypedArraySet
]);

%SetCode(r,Uint16ArrayConstructor);
%FunctionSetPrototype(r,new g());
%AddNamedProperty(r,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(r.prototype,
"constructor",a.Uint16Array,2);
%AddNamedProperty(r.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(r.prototype,"buffer",Uint16Array_GetBuffer);
b.InstallGetter(r.prototype,"byteOffset",Uint16Array_GetByteOffset,
2|4);
b.InstallGetter(r.prototype,"byteLength",Uint16Array_GetByteLength,
2|4);
b.InstallGetter(r.prototype,"length",Uint16Array_GetLength,
2|4);
b.InstallGetter(r.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(r.prototype,2,[
"subarray",Uint16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(s,Int16ArrayConstructor);
%FunctionSetPrototype(s,new g());
%AddNamedProperty(s,"BYTES_PER_ELEMENT",2,
1|2|4);
%AddNamedProperty(s.prototype,
"constructor",a.Int16Array,2);
%AddNamedProperty(s.prototype,
"BYTES_PER_ELEMENT",2,
1|2|4);
b.InstallGetter(s.prototype,"buffer",Int16Array_GetBuffer);
b.InstallGetter(s.prototype,"byteOffset",Int16Array_GetByteOffset,
2|4);
b.InstallGetter(s.prototype,"byteLength",Int16Array_GetByteLength,
2|4);
b.InstallGetter(s.prototype,"length",Int16Array_GetLength,
2|4);
b.InstallGetter(s.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(s.prototype,2,[
"subarray",Int16ArraySubArray,
"set",TypedArraySet
]);

%SetCode(t,Uint32ArrayConstructor);
%FunctionSetPrototype(t,new g());
%AddNamedProperty(t,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(t.prototype,
"constructor",a.Uint32Array,2);
%AddNamedProperty(t.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(t.prototype,"buffer",Uint32Array_GetBuffer);
b.InstallGetter(t.prototype,"byteOffset",Uint32Array_GetByteOffset,
2|4);
b.InstallGetter(t.prototype,"byteLength",Uint32Array_GetByteLength,
2|4);
b.InstallGetter(t.prototype,"length",Uint32Array_GetLength,
2|4);
b.InstallGetter(t.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(t.prototype,2,[
"subarray",Uint32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(u,Int32ArrayConstructor);
%FunctionSetPrototype(u,new g());
%AddNamedProperty(u,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(u.prototype,
"constructor",a.Int32Array,2);
%AddNamedProperty(u.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(u.prototype,"buffer",Int32Array_GetBuffer);
b.InstallGetter(u.prototype,"byteOffset",Int32Array_GetByteOffset,
2|4);
b.InstallGetter(u.prototype,"byteLength",Int32Array_GetByteLength,
2|4);
b.InstallGetter(u.prototype,"length",Int32Array_GetLength,
2|4);
b.InstallGetter(u.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(u.prototype,2,[
"subarray",Int32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(v,Float32ArrayConstructor);
%FunctionSetPrototype(v,new g());
%AddNamedProperty(v,"BYTES_PER_ELEMENT",4,
1|2|4);
%AddNamedProperty(v.prototype,
"constructor",a.Float32Array,2);
%AddNamedProperty(v.prototype,
"BYTES_PER_ELEMENT",4,
1|2|4);
b.InstallGetter(v.prototype,"buffer",Float32Array_GetBuffer);
b.InstallGetter(v.prototype,"byteOffset",Float32Array_GetByteOffset,
2|4);
b.InstallGetter(v.prototype,"byteLength",Float32Array_GetByteLength,
2|4);
b.InstallGetter(v.prototype,"length",Float32Array_GetLength,
2|4);
b.InstallGetter(v.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(v.prototype,2,[
"subarray",Float32ArraySubArray,
"set",TypedArraySet
]);

%SetCode(w,Float64ArrayConstructor);
%FunctionSetPrototype(w,new g());
%AddNamedProperty(w,"BYTES_PER_ELEMENT",8,
1|2|4);
%AddNamedProperty(w.prototype,
"constructor",a.Float64Array,2);
%AddNamedProperty(w.prototype,
"BYTES_PER_ELEMENT",8,
1|2|4);
b.InstallGetter(w.prototype,"buffer",Float64Array_GetBuffer);
b.InstallGetter(w.prototype,"byteOffset",Float64Array_GetByteOffset,
2|4);
b.InstallGetter(w.prototype,"byteLength",Float64Array_GetByteLength,
2|4);
b.InstallGetter(w.prototype,"length",Float64Array_GetLength,
2|4);
b.InstallGetter(w.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(w.prototype,2,[
"subarray",Float64ArraySubArray,
"set",TypedArraySet
]);

%SetCode(x,Uint8ClampedArrayConstructor);
%FunctionSetPrototype(x,new g());
%AddNamedProperty(x,"BYTES_PER_ELEMENT",1,
1|2|4);
%AddNamedProperty(x.prototype,
"constructor",a.Uint8ClampedArray,2);
%AddNamedProperty(x.prototype,
"BYTES_PER_ELEMENT",1,
1|2|4);
b.InstallGetter(x.prototype,"buffer",Uint8ClampedArray_GetBuffer);
b.InstallGetter(x.prototype,"byteOffset",Uint8ClampedArray_GetByteOffset,
2|4);
b.InstallGetter(x.prototype,"byteLength",Uint8ClampedArray_GetByteLength,
2|4);
b.InstallGetter(x.prototype,"length",Uint8ClampedArray_GetLength,
2|4);
b.InstallGetter(x.prototype,o,
TypedArrayGetToStringTag);
b.InstallFunctions(x.prototype,2,[
"subarray",Uint8ClampedArraySubArray,
"set",TypedArraySet
]);


function DataViewConstructor(A,B,I){
if(%_IsConstructCall()){
if(!(%_ClassOf(A)==='ArrayBuffer'))throw k(24);
if(!(B===(void 0))){
B=n(B,140);
}
if(!(I===(void 0))){
I=(%_ToInteger(I));
}
var D=%_ArrayBufferGetByteLength(A);
var E=(B===(void 0))?0:B;
if(E>D)throw j(140);
var C=(I===(void 0))
?D-E
:I;
if(C<0||E+C>D){
throw new j(139);
}
%_DataViewInitialize(this,A,E,C);
}else{
throw k(22,"DataView");
}
}
function DataViewGetBufferJS(){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,'DataView.buffer',this);
}
return %DataViewGetBuffer(this);
}
function DataViewGetByteOffset(){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.byteOffset',this);
}
return %_ArrayBufferViewGetByteOffset(this);
}
function DataViewGetByteLength(){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.byteLength',this);
}
return %_ArrayBufferViewGetByteLength(this);
}
function DataViewGetInt8JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getInt8',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetInt8(this,E,!!an);
}
function DataViewSetInt8JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setInt8',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetInt8(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetUint8JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getUint8',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetUint8(this,E,!!an);
}
function DataViewSetUint8JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setUint8',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetUint8(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetInt16JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getInt16',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetInt16(this,E,!!an);
}
function DataViewSetInt16JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setInt16',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetInt16(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetUint16JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getUint16',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetUint16(this,E,!!an);
}
function DataViewSetUint16JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setUint16',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetUint16(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetInt32JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getInt32',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetInt32(this,E,!!an);
}
function DataViewSetInt32JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setInt32',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetInt32(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetUint32JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getUint32',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetUint32(this,E,!!an);
}
function DataViewSetUint32JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setUint32',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetUint32(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetFloat32JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getFloat32',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetFloat32(this,E,!!an);
}
function DataViewSetFloat32JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setFloat32',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetFloat32(this,E,(%_ToNumber(R)),!!an);
}

function DataViewGetFloat64JS(E,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.getFloat64',this);
}
if(%_ArgumentsLength()<1)throw k(40);
E=n(E,138);
return %DataViewGetFloat64(this,E,!!an);
}
function DataViewSetFloat64JS(E,R,an){
if(!(%_ClassOf(this)==='DataView')){
throw k(37,
'DataView.setFloat64',this);
}
if(%_ArgumentsLength()<2)throw k(40);
E=n(E,138);
%DataViewSetFloat64(this,E,(%_ToNumber(R)),!!an);
}


%SetCode(f,DataViewConstructor);
%FunctionSetPrototype(f,new g);
%AddNamedProperty(f.prototype,"constructor",f,
2);
%AddNamedProperty(f.prototype,o,"DataView",
1|2);
b.InstallGetter(f.prototype,"buffer",DataViewGetBufferJS);
b.InstallGetter(f.prototype,"byteOffset",
DataViewGetByteOffset);
b.InstallGetter(f.prototype,"byteLength",
DataViewGetByteLength);
b.InstallFunctions(f.prototype,2,[
"getInt8",DataViewGetInt8JS,
"setInt8",DataViewSetInt8JS,
"getUint8",DataViewGetUint8JS,
"setUint8",DataViewSetUint8JS,
"getInt16",DataViewGetInt16JS,
"setInt16",DataViewSetInt16JS,
"getUint16",DataViewGetUint16JS,
"setUint16",DataViewSetUint16JS,
"getInt32",DataViewGetInt32JS,
"setInt32",DataViewSetInt32JS,
"getUint32",DataViewGetUint32JS,
"setUint32",DataViewSetUint32JS,
"getFloat32",DataViewGetFloat32JS,
"setFloat32",DataViewSetFloat32JS,
"getFloat64",DataViewGetFloat64JS,
"setFloat64",DataViewSetFloat64JS
]);
})

Hiterator-prototypeÑ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d=b.ImportNow("IteratorPrototype");
var e=b.ImportNow("iterator_symbol");
function IteratorPrototypeIterator(){
return this;
}
b.SetFunctionName(IteratorPrototypeIterator,e);
%AddNamedProperty(d,e,
IteratorPrototypeIterator,2);
})

$generator]
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=b.ImportNow("GeneratorFunctionPrototype");
var d=b.ImportNow("GeneratorFunction");
var e=a.Function;
var f;
var g;
var h=b.ImportNow("to_string_tag_symbol");
b.Import(function(i){
f=i.MakeTypeError;
g=i.NewFunctionString;
});
function GeneratorObjectNext(j){
if(!(%_ClassOf(this)==='Generator')){
throw f(37,
'[Generator].prototype.next',this);
}
var k=%GeneratorGetContinuation(this);
if(k>0){
if(%_DebugIsActive()!=0)%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,j);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(k==0){
return{value:void 0,done:true};
}else{
throw f(35);
}
}
function GeneratorObjectThrow(l){
if(!(%_ClassOf(this)==='Generator')){
throw f(37,
'[Generator].prototype.throw',this);
}
var k=%GeneratorGetContinuation(this);
if(k>0){
try{
return %_GeneratorThrow(this,l);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(k==0){
throw l;
}else{
throw f(35);
}
}
function GeneratorFunctionConstructor(m){
var n=g(arguments,'function*');
var o=%GlobalProxy(GeneratorFunctionConstructor);
var p=%_CallFunction(o,%CompileString(n,true));
return %CompleteFunctionConstruction(p,d,new.target);
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var q=c.prototype;
b.InstallFunctions(q,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(q,"constructor",
c,2|1);
%AddNamedProperty(q,
h,"Generator",2|1);
%InternalSetPrototype(c,e.prototype);
%AddNamedProperty(c,
h,"GeneratorFunction",2|1);
%AddNamedProperty(c,"constructor",
d,2|1);
%InternalSetPrototype(d,e);
%SetCode(d,GeneratorFunctionConstructor);
})

8object-observea­
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d=a.Array;
var e=a.Object;
var f=b.InternalArray;
var g;
var h;
var i;
b.Import(function(j){
c=j.GetHash;
g=j.MakeTypeError;
h=j.ObjectFreeze;
i=j.ObjectIsFrozen;
});
var k;
var l={};
function GetObservationStateJS(){
if((k===(void 0))){
k=%GetObservationState();
}
if((k.callbackInfoMap===(void 0))){
k.callbackInfoMap=%ObservationWeakMapCreate();
k.objectInfoMap=%ObservationWeakMapCreate();
k.notifierObjectInfoMap=%ObservationWeakMapCreate();
k.pendingObservers=null;
k.nextCallbackPriority=0;
k.lastMicrotaskId=0;
}
return k;
}
function GetPendingObservers(){
return GetObservationStateJS().pendingObservers;
}
function SetPendingObservers(m){
GetObservationStateJS().pendingObservers=m;
}
function GetNextCallbackPriority(){
return GetObservationStateJS().nextCallbackPriority++;
}
function nullProtoObject(){
return{__proto__:null};
}
function TypeMapCreate(){
return nullProtoObject();
}
function TypeMapAddType(n,o,p){
n[o]=p?1:(n[o]||0)+1;
}
function TypeMapRemoveType(n,o){
n[o]--;
}
function TypeMapCreateFromList(q,r){
var n=TypeMapCreate();
for(var s=0;s<r;s++){
TypeMapAddType(n,q[s],true);
}
return n;
}
function TypeMapHasType(n,o){
return!!n[o];
}
function TypeMapIsDisjointFrom(t,u){
if(!t||!u)
return true;
for(var o in t){
if(TypeMapHasType(t,o)&&TypeMapHasType(u,o))
return false;
}
return true;
}
var v=(function(){
var w=[
'add',
'update',
'delete',
'setPrototype',
'reconfigure',
'preventExtensions'
];
return TypeMapCreateFromList(w,w.length);
})();
function ObserverCreate(x,y){
if((y===(void 0)))
return x;
var z=nullProtoObject();
z.callback=x;
z.accept=y;
return z;
}
function ObserverGetCallback(z){
return(typeof(z)==='function')?z:z.callback;
}
function ObserverGetAcceptTypes(z){
return(typeof(z)==='function')?v:z.accept;
}
function ObserverIsActive(z,A){
return TypeMapIsDisjointFrom(ObjectInfoGetPerformingTypes(A),
ObserverGetAcceptTypes(z));
}
function ObjectInfoGetOrCreate(B){
var A=ObjectInfoGet(B);
if((A===(void 0))){
if(!%_IsJSProxy(B)){
%SetIsObserved(B);
}
A={
object:B,
changeObservers:null,
notifier:null,
performing:null,
performingCount:0,
};
%WeakCollectionSet(GetObservationStateJS().objectInfoMap,
B,A,c(B));
}
return A;
}
function ObjectInfoGet(B){
return %WeakCollectionGet(GetObservationStateJS().objectInfoMap,B,
c(B));
}
function ObjectInfoGetFromNotifier(C){
return %WeakCollectionGet(GetObservationStateJS().notifierObjectInfoMap,
C,c(C));
}
function ObjectInfoGetNotifier(A){
if((A.notifier===null)){
var C={__proto__:l};
A.notifier=C;
%WeakCollectionSet(GetObservationStateJS().notifierObjectInfoMap,
C,A,c(C));
}
return A.notifier;
}
function ChangeObserversIsOptimized(D){
return(typeof(D)==='function')||
(typeof(D.callback)==='function');
}
function ObjectInfoNormalizeChangeObservers(A){
if(ChangeObserversIsOptimized(A.changeObservers)){
var z=A.changeObservers;
var x=ObserverGetCallback(z);
var E=CallbackInfoGet(x);
var F=CallbackInfoGetPriority(E);
A.changeObservers=nullProtoObject();
A.changeObservers[F]=z;
}
}
function ObjectInfoAddObserver(A,x,y){
var E=CallbackInfoGetOrCreate(x);
var z=ObserverCreate(x,y);
if(!A.changeObservers){
A.changeObservers=z;
return;
}
ObjectInfoNormalizeChangeObservers(A);
var F=CallbackInfoGetPriority(E);
A.changeObservers[F]=z;
}
function ObjectInfoRemoveObserver(A,x){
if(!A.changeObservers)
return;
if(ChangeObserversIsOptimized(A.changeObservers)){
if(x===ObserverGetCallback(A.changeObservers))
A.changeObservers=null;
return;
}
var E=CallbackInfoGet(x);
var F=CallbackInfoGetPriority(E);
A.changeObservers[F]=null;
}
function ObjectInfoHasActiveObservers(A){
if((A===(void 0))||!A.changeObservers)
return false;
if(ChangeObserversIsOptimized(A.changeObservers))
return ObserverIsActive(A.changeObservers,A);
for(var F in A.changeObservers){
var z=A.changeObservers[F];
if(!(z===null)&&ObserverIsActive(z,A))
return true;
}
return false;
}
function ObjectInfoAddPerformingType(A,o){
A.performing=A.performing||TypeMapCreate();
TypeMapAddType(A.performing,o);
A.performingCount++;
}
function ObjectInfoRemovePerformingType(A,o){
A.performingCount--;
TypeMapRemoveType(A.performing,o);
}
function ObjectInfoGetPerformingTypes(A){
return A.performingCount>0?A.performing:null;
}
function ConvertAcceptListToTypeMap(G){
if((G===(void 0)))
return G;
if(!(%_IsSpecObject(G)))throw g(73);
var H=(%_ToInteger(G.length));
if(H<0)H=0;
return TypeMapCreateFromList(G,H);
}
function CallbackInfoGet(x){
return %WeakCollectionGet(GetObservationStateJS().callbackInfoMap,x,
c(x));
}
function CallbackInfoSet(x,E){
%WeakCollectionSet(GetObservationStateJS().callbackInfoMap,
x,E,c(x));
}
function CallbackInfoGetOrCreate(x){
var E=CallbackInfoGet(x);
if(!(E===(void 0)))
return E;
var F=GetNextCallbackPriority();
CallbackInfoSet(x,F);
return F;
}
function CallbackInfoGetPriority(E){
if((typeof(E)==='number'))
return E;
else
return E.priority;
}
function CallbackInfoNormalize(x){
var E=CallbackInfoGet(x);
if((typeof(E)==='number')){
var F=E;
E=new f;
E.priority=F;
CallbackInfoSet(x,E);
}
return E;
}
function ObjectObserve(B,x,y){
if(!(%_IsSpecObject(B)))
throw g(75,"observe","observe");
if(%IsJSGlobalProxy(B))
throw g(71,"observe");
if(%IsAccessCheckNeeded(B))
throw g(72,"observe");
if(!(typeof(x)==='function'))
throw g(74,"observe");
if(i(x))
throw g(70);
var I=%GetObjectContextObjectObserve(B);
return I(B,x,y);
}
function NativeObjectObserve(B,x,y){
var A=ObjectInfoGetOrCreate(B);
var q=ConvertAcceptListToTypeMap(y);
ObjectInfoAddObserver(A,x,q);
return B;
}
function ObjectUnobserve(B,x){
if(!(%_IsSpecObject(B)))
throw g(75,"unobserve","unobserve");
if(%IsJSGlobalProxy(B))
throw g(71,"unobserve");
if(!(typeof(x)==='function'))
throw g(74,"unobserve");
var A=ObjectInfoGet(B);
if((A===(void 0)))
return B;
ObjectInfoRemoveObserver(A,x);
return B;
}
function ArrayObserve(B,x){
return ObjectObserve(B,x,['add',
'update',
'delete',
'splice']);
}
function ArrayUnobserve(B,x){
return ObjectUnobserve(B,x);
}
function ObserverEnqueueIfActive(z,A,J){
if(!ObserverIsActive(z,A)||
!TypeMapHasType(ObserverGetAcceptTypes(z),J.type)){
return;
}
var x=ObserverGetCallback(z);
if(!%ObserverObjectAndRecordHaveSameOrigin(x,J.object,
J)){
return;
}
var E=CallbackInfoNormalize(x);
if((GetPendingObservers()===null)){
SetPendingObservers(nullProtoObject());
if((%_DebugIsActive()!=0)){
var K=++GetObservationStateJS().lastMicrotaskId;
var L="Object.observe";
%EnqueueMicrotask(function(){
%DebugAsyncTaskEvent({type:"willHandle",id:K,name:L});
ObserveMicrotaskRunner();
%DebugAsyncTaskEvent({type:"didHandle",id:K,name:L});
});
%DebugAsyncTaskEvent({type:"enqueue",id:K,name:L});
}else{
%EnqueueMicrotask(ObserveMicrotaskRunner);
}
}
GetPendingObservers()[E.priority]=x;
E.push(J);
}
function ObjectInfoEnqueueExternalChangeRecord(A,J,o){
if(!ObjectInfoHasActiveObservers(A))
return;
var M=!(o===(void 0));
var N=M?
{object:A.object,type:o}:
{object:A.object};
for(var O in J){
if(O==='object'||(M&&O==='type'))continue;
%DefineDataPropertyUnchecked(
N,O,J[O],1+4);
}
h(N);
ObjectInfoEnqueueInternalChangeRecord(A,N);
}
function ObjectInfoEnqueueInternalChangeRecord(A,J){
if((typeof(J.name)==='symbol'))return;
if(ChangeObserversIsOptimized(A.changeObservers)){
var z=A.changeObservers;
ObserverEnqueueIfActive(z,A,J);
return;
}
for(var F in A.changeObservers){
var z=A.changeObservers[F];
if((z===null))
continue;
ObserverEnqueueIfActive(z,A,J);
}
}
function BeginPerformSplice(P){
var A=ObjectInfoGet(P);
if(!(A===(void 0)))
ObjectInfoAddPerformingType(A,'splice');
}
function EndPerformSplice(P){
var A=ObjectInfoGet(P);
if(!(A===(void 0)))
ObjectInfoRemovePerformingType(A,'splice');
}
function EnqueueSpliceRecord(P,Q,R,S){
var A=ObjectInfoGet(P);
if(!ObjectInfoHasActiveObservers(A))
return;
var J={
type:'splice',
object:P,
index:Q,
removed:R,
addedCount:S
};
h(J);
h(J.removed);
ObjectInfoEnqueueInternalChangeRecord(A,J);
}
function NotifyChange(o,B,L,T){
var A=ObjectInfoGet(B);
if(!ObjectInfoHasActiveObservers(A))
return;
var J;
if(arguments.length==2){
J={type:o,object:B};
}else if(arguments.length==3){
J={type:o,object:B,name:L};
}else{
J={
type:o,
object:B,
name:L,
oldValue:T
};
}
h(J);
ObjectInfoEnqueueInternalChangeRecord(A,J);
}
function ObjectNotifierNotify(J){
if(!(%_IsSpecObject(this)))
throw g(14,"notify");
var A=ObjectInfoGetFromNotifier(this);
if((A===(void 0)))
throw g(76);
if(!(typeof(J.type)==='string'))
throw g(79);
ObjectInfoEnqueueExternalChangeRecord(A,J);
}
function ObjectNotifierPerformChange(U,V){
if(!(%_IsSpecObject(this)))
throw g(14,"performChange");
var A=ObjectInfoGetFromNotifier(this);
if((A===(void 0)))
throw g(76);
if(!(typeof(U)==='string'))
throw g(78);
if(!(typeof(V)==='function'))
throw g(77);
var W=%GetObjectContextNotifierPerformChange(A);
W(A,U,V);
}
function NativeObjectNotifierPerformChange(A,U,V){
ObjectInfoAddPerformingType(A,U);
var J;
try{
J=V();
}finally{
ObjectInfoRemovePerformingType(A,U);
}
if((%_IsSpecObject(J)))
ObjectInfoEnqueueExternalChangeRecord(A,J,U);
}
function ObjectGetNotifier(B){
if(!(%_IsSpecObject(B)))
throw g(75,"getNotifier","getNotifier");
if(%IsJSGlobalProxy(B))
throw g(71,"getNotifier");
if(%IsAccessCheckNeeded(B))
throw g(72,"getNotifier");
if(i(B))return null;
if(!%ObjectWasCreatedInCurrentOrigin(B))return null;
var X=%GetObjectContextObjectGetNotifier(B);
return X(B);
}
function NativeObjectGetNotifier(B){
var A=ObjectInfoGetOrCreate(B);
return ObjectInfoGetNotifier(A);
}
function CallbackDeliverPending(x){
var E=CallbackInfoGet(x);
if((E===(void 0))||(typeof(E)==='number'))
return false;
var F=E.priority;
CallbackInfoSet(x,F);
var m=GetPendingObservers();
if(!(m===null))
delete m[F];
var Y=[];
%MoveArrayContents(E,Y);
%DeliverObservationChangeRecords(x,Y);
return true;
}
function ObjectDeliverChangeRecords(x){
if(!(typeof(x)==='function'))
throw g(74,"deliverChangeRecords");
while(CallbackDeliverPending(x)){}
}
function ObserveMicrotaskRunner(){
var m=GetPendingObservers();
if(!(m===null)){
SetPendingObservers(null);
for(var s in m){
CallbackDeliverPending(m[s]);
}
}
}
b.InstallFunctions(l,2,[
"notify",ObjectNotifierNotify,
"performChange",ObjectNotifierPerformChange
]);
var Z=[
"deliverChangeRecords",ObjectDeliverChangeRecords,
"getNotifier",ObjectGetNotifier,
"observe",ObjectObserve,
"unobserve",ObjectUnobserve
];
var aa=[
"observe",ArrayObserve,
"unobserve",ArrayUnobserve
];
var ab=function(ac,s){
if(s % 2===1)%FunctionRemovePrototype(ac);
};
Z.forEach(ab);
aa.forEach(ab);
%InstallToContext([
"native_object_get_notifier",NativeObjectGetNotifier,
"native_object_notifier_perform_change",NativeObjectNotifierPerformChange,
"native_object_observe",NativeObjectObserve,
"observers_begin_perform_splice",BeginPerformSplice,
"observers_end_perform_splice",EndPerformSplice,
"observers_enqueue_splice",EnqueueSpliceRecord,
"observers_notify_change",NotifyChange,
]);
b.Export(function(ad){
ad.ObserveArrayMethods=aa;
ad.ObserveBeginPerformSplice=BeginPerformSplice;
ad.ObserveEndPerformSplice=EndPerformSplice;
ad.ObserveEnqueueSpliceRecord=EnqueueSpliceRecord;
ad.ObserveObjectMethods=Z;
});
})

(collectionM…
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Object;
var e=a.Set;
var f=b.ImportNow("hash_code_symbol");
var g;
var h;
var i;
var j;
var k;
var l=b.ImportNow("to_string_tag_symbol");
b.Import(function(m){
g=m.IntRandom;
h=m.MakeTypeError;
i=m.MapIterator;
j=m.NumberIsNaN;
k=m.SetIterator;
});
function HashToEntry(n,o,p){
var q=(o&((p)-1));
return((%_FixedArrayGet(n,(3+(q))|0)));
}
%SetForceInlineFlag(HashToEntry);
function SetFindEntry(n,p,r,o){
var s=HashToEntry(n,o,p);
if(s===-1)return s;
var t=((%_FixedArrayGet(n,((3+(p)+((s)<<1)))|0)));
if(r===t)return s;
var u=j(r);
while(true){
if(u&&j(t)){
return s;
}
s=((%_FixedArrayGet(n,((3+(p)+((s)<<1))+1)|0)));
if(s===-1)return s;
t=((%_FixedArrayGet(n,((3+(p)+((s)<<1)))|0)));
if(r===t)return s;
}
return-1;
}
%SetForceInlineFlag(SetFindEntry);
function MapFindEntry(n,p,r,o){
var s=HashToEntry(n,o,p);
if(s===-1)return s;
var t=((%_FixedArrayGet(n,((3+(p)+((s)*3)))|0)));
if(r===t)return s;
var u=j(r);
while(true){
if(u&&j(t)){
return s;
}
s=((%_FixedArrayGet(n,((3+(p)+((s)*3))+2)|0)));
if(s===-1)return s;
t=((%_FixedArrayGet(n,((3+(p)+((s)*3)))|0)));
if(r===t)return s;
}
return-1;
}
%SetForceInlineFlag(MapFindEntry);
function ComputeIntegerHash(r,v){
var o=r;
o=o^v;
o=~o+(o<<15);
o=o^(o>>>12);
o=o+(o<<2);
o=o^(o>>>4);
o=(o*2057)|0;
o=o^(o>>>16);
return o&0x3fffffff;
}
%SetForceInlineFlag(ComputeIntegerHash);
function GetExistingHash(r){
if(%_IsSmi(r)){
return ComputeIntegerHash(r,0);
}
if((typeof(r)==='string')){
var w=%_StringGetRawHashField(r);
if((w&1)===0){
return w>>>2;
}
}else if((%_IsSpecObject(r))&&!%_IsJSProxy(r)&&!(%_ClassOf(r)==='global')){
var o=(r[f]);
return o;
}
return %GenericHash(r);
}
%SetForceInlineFlag(GetExistingHash);
function GetHash(r){
var o=GetExistingHash(r);
if((o===(void 0))){
o=g()|0;
if(o===0)o=1;
(r[f]=o);
}
return o;
}
%SetForceInlineFlag(GetHash);
function SetConstructor(x){
if(!%_IsConstructCall()){
throw h(22,"Set");
}
%_SetInitialize(this);
if(!(x==null)){
var y=this.add;
if(!(typeof(y)==='function')){
throw h(83,'add',this);
}
for(var z of x){
%_Call(y,this,z);
}
}
}
function SetAdd(r){
if(!(%_ClassOf(this)==='Set')){
throw h(37,'Set.prototype.add',this);
}
if(r===0){
r=0;
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetHash(r);
if(SetFindEntry(n,p,r,o)!==-1)return this;
var A=((%_FixedArrayGet(n,(1)|0)));
var B=((%_FixedArrayGet(n,(2)|0)));
var C=p<<1;
if((A+B)>=C){
%SetGrow(this);
n=%_JSCollectionGetTable(this);
p=((%_FixedArrayGet(n,(0)|0)));
A=((%_FixedArrayGet(n,(1)|0)));
B=((%_FixedArrayGet(n,(2)|0)));
}
var s=A+B;
var D=(3+(p)+((s)<<1));
var q=(o&((p)-1));
var E=((%_FixedArrayGet(n,(3+(q))|0)));
((%_FixedArraySet(n,(3+(q))|0,s)));
(((%_FixedArraySet(n,(1)|0,(A+1)|0))));
(%_FixedArraySet(n,(D)|0,r));
((%_FixedArraySet(n,(D+1)|0,(E)|0)));
return this;
}
function SetHas(r){
if(!(%_ClassOf(this)==='Set')){
throw h(37,'Set.prototype.has',this);
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetExistingHash(r);
if((o===(void 0)))return false;
return SetFindEntry(n,p,r,o)!==-1;
}
function SetDelete(r){
if(!(%_ClassOf(this)==='Set')){
throw h(37,
'Set.prototype.delete',this);
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetExistingHash(r);
if((o===(void 0)))return false;
var s=SetFindEntry(n,p,r,o);
if(s===-1)return false;
var A=((%_FixedArrayGet(n,(1)|0)))-1;
var B=((%_FixedArrayGet(n,(2)|0)))+1;
var D=(3+(p)+((s)<<1));
(%_FixedArraySet(n,(D)|0,%_TheHole()));
(((%_FixedArraySet(n,(1)|0,(A)|0))));
(((%_FixedArraySet(n,(2)|0,(B)|0))));
if(A<(p>>>1))%SetShrink(this);
return true;
}
function SetGetSize(){
if(!(%_ClassOf(this)==='Set')){
throw h(37,
'Set.prototype.size',this);
}
var n=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(n,(1)|0)));
}
function SetClearJS(){
if(!(%_ClassOf(this)==='Set')){
throw h(37,
'Set.prototype.clear',this);
}
%_SetClear(this);
}
function SetForEach(F,G){
if(!(%_ClassOf(this)==='Set')){
throw h(37,
'Set.prototype.forEach',this);
}
if(!(typeof(F)==='function'))throw h(13,F);
var H=new k(this,2);
var r;
var I=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(F));
var J=[(void 0)];
while(%SetIteratorNext(H,J)){
if(I)%DebugPrepareStepInIfStepping(F);
r=J[0];
%_Call(F,G,r,r,this);
}
}
%SetCode(e,SetConstructor);
%FunctionSetLength(e,0);
%FunctionSetPrototype(e,new d());
%AddNamedProperty(e.prototype,"constructor",e,2);
%AddNamedProperty(e.prototype,l,"Set",
2|1);
%FunctionSetLength(SetForEach,1);
b.InstallGetter(e.prototype,"size",SetGetSize);
b.InstallFunctions(e.prototype,2,[
"add",SetAdd,
"has",SetHas,
"delete",SetDelete,
"clear",SetClearJS,
"forEach",SetForEach
]);
function MapConstructor(x){
if(!%_IsConstructCall()){
throw h(22,"Map");
}
%_MapInitialize(this);
if(!(x==null)){
var y=this.set;
if(!(typeof(y)==='function')){
throw h(83,'set',this);
}
for(var K of x){
if(!(%_IsSpecObject(K))){
throw h(43,K);
}
%_Call(y,this,K[0],K[1]);
}
}
}
function MapGet(r){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.get',this);
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetExistingHash(r);
if((o===(void 0)))return(void 0);
var s=MapFindEntry(n,p,r,o);
if(s===-1)return(void 0);
return((%_FixedArrayGet(n,((3+(p)+((s)*3))+1)|0)));
}
function MapSet(r,z){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.set',this);
}
if(r===0){
r=0;
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetHash(r);
var s=MapFindEntry(n,p,r,o);
if(s!==-1){
var L=(3+(p)+((s)*3));
(%_FixedArraySet(n,(L+1)|0,z));
return this;
}
var A=((%_FixedArrayGet(n,(1)|0)));
var B=((%_FixedArrayGet(n,(2)|0)));
var C=p<<1;
if((A+B)>=C){
%MapGrow(this);
n=%_JSCollectionGetTable(this);
p=((%_FixedArrayGet(n,(0)|0)));
A=((%_FixedArrayGet(n,(1)|0)));
B=((%_FixedArrayGet(n,(2)|0)));
}
s=A+B;
var D=(3+(p)+((s)*3));
var q=(o&((p)-1));
var E=((%_FixedArrayGet(n,(3+(q))|0)));
((%_FixedArraySet(n,(3+(q))|0,s)));
(((%_FixedArraySet(n,(1)|0,(A+1)|0))));
(%_FixedArraySet(n,(D)|0,r));
(%_FixedArraySet(n,(D+1)|0,z));
(%_FixedArraySet(n,(D+2)|0,E));
return this;
}
function MapHas(r){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.has',this);
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetHash(r);
return MapFindEntry(n,p,r,o)!==-1;
}
function MapDelete(r){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.delete',this);
}
var n=%_JSCollectionGetTable(this);
var p=((%_FixedArrayGet(n,(0)|0)));
var o=GetHash(r);
var s=MapFindEntry(n,p,r,o);
if(s===-1)return false;
var A=((%_FixedArrayGet(n,(1)|0)))-1;
var B=((%_FixedArrayGet(n,(2)|0)))+1;
var D=(3+(p)+((s)*3));
(%_FixedArraySet(n,(D)|0,%_TheHole()));
(%_FixedArraySet(n,(D+1)|0,%_TheHole()));
(((%_FixedArraySet(n,(1)|0,(A)|0))));
(((%_FixedArraySet(n,(2)|0,(B)|0))));
if(A<(p>>>1))%MapShrink(this);
return true;
}
function MapGetSize(){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.size',this);
}
var n=%_JSCollectionGetTable(this);
return((%_FixedArrayGet(n,(1)|0)));
}
function MapClearJS(){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.clear',this);
}
%_MapClear(this);
}
function MapForEach(F,G){
if(!(%_ClassOf(this)==='Map')){
throw h(37,
'Map.prototype.forEach',this);
}
if(!(typeof(F)==='function'))throw h(13,F);
var H=new i(this,3);
var I=(%_DebugIsActive()!=0&&%DebugCallbackSupportsStepping(F));
var J=[(void 0),(void 0)];
while(%MapIteratorNext(H,J)){
if(I)%DebugPrepareStepInIfStepping(F);
%_Call(F,G,J[1],J[0],this);
}
}
%SetCode(c,MapConstructor);
%FunctionSetLength(c,0);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",c,2);
%AddNamedProperty(
c.prototype,l,"Map",2|1);
%FunctionSetLength(MapForEach,1);
b.InstallGetter(c.prototype,"size",MapGetSize);
b.InstallFunctions(c.prototype,2,[
"get",MapGet,
"set",MapSet,
"has",MapHas,
"delete",MapDelete,
"clear",MapClearJS,
"forEach",MapForEach
]);
function MapFromArray(M){
var N=new c;
var O=M.length;
for(var P=0;P<O;P+=2){
var r=M[P];
var z=M[P+1];
%_Call(MapSet,N,r,z);
}
return N;
};
function SetFromArray(M){
var Q=new e;
var O=M.length;
for(var P=0;P<O;++P){
%_Call(SetAdd,Q,M[P]);
}
return Q;
};
%InstallToContext([
"map_get",MapGet,
"map_set",MapSet,
"map_has",MapHas,
"map_delete",MapDelete,
"set_add",SetAdd,
"set_has",SetHas,
"set_delete",SetDelete,
"map_from_array",MapFromArray,
"set_from_array",SetFromArray,
]);
b.Export(function(R){
R.GetExistingHash=GetExistingHash;
R.GetHash=GetHash;
});
})

<weak-collection­-
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d;
var e=a.Object;
var f=a.WeakMap;
var g=a.WeakSet;
var h;
var i=b.ImportNow("to_string_tag_symbol");
b.Import(function(j){
c=j.GetExistingHash;
d=j.GetHash;
h=j.MakeTypeError;
});
function WeakMapConstructor(k){
if(!%_IsConstructCall()){
throw h(22,"WeakMap");
}
%WeakCollectionInitialize(this);
if(!(k==null)){
var l=this.set;
if(!(typeof(l)==='function')){
throw h(83,'set',this);
}
for(var m of k){
if(!(%_IsSpecObject(m))){
throw h(43,m);
}
%_Call(l,this,m[0],m[1]);
}
}
}
function WeakMapGet(n){
if(!(%_ClassOf(this)==='WeakMap')){
throw h(37,
'WeakMap.prototype.get',this);
}
if(!(%_IsSpecObject(n)))return(void 0);
var o=c(n);
if((o===(void 0)))return(void 0);
return %WeakCollectionGet(this,n,o);
}
function WeakMapSet(n,p){
if(!(%_ClassOf(this)==='WeakMap')){
throw h(37,
'WeakMap.prototype.set',this);
}
if(!(%_IsSpecObject(n)))throw h(143);
return %WeakCollectionSet(this,n,p,d(n));
}
function WeakMapHas(n){
if(!(%_ClassOf(this)==='WeakMap')){
throw h(37,
'WeakMap.prototype.has',this);
}
if(!(%_IsSpecObject(n)))return false;
var o=c(n);
if((o===(void 0)))return false;
return %WeakCollectionHas(this,n,o);
}
function WeakMapDelete(n){
if(!(%_ClassOf(this)==='WeakMap')){
throw h(37,
'WeakMap.prototype.delete',this);
}
if(!(%_IsSpecObject(n)))return false;
var o=c(n);
if((o===(void 0)))return false;
return %WeakCollectionDelete(this,n,o);
}
%SetCode(f,WeakMapConstructor);
%FunctionSetLength(f,0);
%FunctionSetPrototype(f,new e());
%AddNamedProperty(f.prototype,"constructor",f,
2);
%AddNamedProperty(f.prototype,i,"WeakMap",
2|1);
b.InstallFunctions(f.prototype,2,[
"get",WeakMapGet,
"set",WeakMapSet,
"has",WeakMapHas,
"delete",WeakMapDelete
]);
function WeakSetConstructor(k){
if(!%_IsConstructCall()){
throw h(22,"WeakSet");
}
%WeakCollectionInitialize(this);
if(!(k==null)){
var l=this.add;
if(!(typeof(l)==='function')){
throw h(83,'add',this);
}
for(var p of k){
%_Call(l,this,p);
}
}
}
function WeakSetAdd(p){
if(!(%_ClassOf(this)==='WeakSet')){
throw h(37,
'WeakSet.prototype.add',this);
}
if(!(%_IsSpecObject(p)))throw h(144);
return %WeakCollectionSet(this,p,true,d(p));
}
function WeakSetHas(p){
if(!(%_ClassOf(this)==='WeakSet')){
throw h(37,
'WeakSet.prototype.has',this);
}
if(!(%_IsSpecObject(p)))return false;
var o=c(p);
if((o===(void 0)))return false;
return %WeakCollectionHas(this,p,o);
}
function WeakSetDelete(p){
if(!(%_ClassOf(this)==='WeakSet')){
throw h(37,
'WeakSet.prototype.delete',this);
}
if(!(%_IsSpecObject(p)))return false;
var o=c(p);
if((o===(void 0)))return false;
return %WeakCollectionDelete(this,p,o);
}
%SetCode(g,WeakSetConstructor);
%FunctionSetLength(g,0);
%FunctionSetPrototype(g,new e());
%AddNamedProperty(g.prototype,"constructor",g,
2);
%AddNamedProperty(g.prototype,i,"WeakSet",
2|1);
b.InstallFunctions(g.prototype,2,[
"add",WeakSetAdd,
"has",WeakSetHas,
"delete",WeakSetDelete
]);
})

Lcollection-iterator(
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=a.Set;
var e=b.ImportNow("iterator_symbol");
var f;
var g=b.ImportNow("MapIterator");
var h=b.ImportNow("to_string_tag_symbol");
var i=b.ImportNow("SetIterator");
b.Import(function(j){
f=j.MakeTypeError;
});
function SetIteratorConstructor(k,l){
%SetIteratorInitialize(this,k,l);
}
function SetIteratorNextJS(){
if(!(%_ClassOf(this)==='Set Iterator')){
throw f(37,
'Set Iterator.prototype.next',this);
}
var m=[(void 0),(void 0)];
var n=%_CreateIterResultObject(m,false);
switch(%SetIteratorNext(this,m)){
case 0:
n.value=(void 0);
n.done=true;
break;
case 2:
n.value=m[0];
break;
case 3:
m[1]=m[0];
break;
}
return n;
}
function SetEntries(){
if(!(%_ClassOf(this)==='Set')){
throw f(37,
'Set.prototype.entries',this);
}
return new i(this,3);
}
function SetValues(){
if(!(%_ClassOf(this)==='Set')){
throw f(37,
'Set.prototype.values',this);
}
return new i(this,2);
}
%SetCode(i,SetIteratorConstructor);
%FunctionSetInstanceClassName(i,'Set Iterator');
b.InstallFunctions(i.prototype,2,[
'next',SetIteratorNextJS
]);
%AddNamedProperty(i.prototype,h,
"Set Iterator",1|2);
b.InstallFunctions(d.prototype,2,[
'entries',SetEntries,
'keys',SetValues,
'values',SetValues
]);
%AddNamedProperty(d.prototype,e,SetValues,2);
function MapIteratorConstructor(o,l){
%MapIteratorInitialize(this,o,l);
}
function MapIteratorNextJS(){
if(!(%_ClassOf(this)==='Map Iterator')){
throw f(37,
'Map Iterator.prototype.next',this);
}
var m=[(void 0),(void 0)];
var n=%_CreateIterResultObject(m,false);
switch(%MapIteratorNext(this,m)){
case 0:
n.value=(void 0);
n.done=true;
break;
case 1:
n.value=m[0];
break;
case 2:
n.value=m[1];
break;
}
return n;
}
function MapEntries(){
if(!(%_ClassOf(this)==='Map')){
throw f(37,
'Map.prototype.entries',this);
}
return new g(this,3);
}
function MapKeys(){
if(!(%_ClassOf(this)==='Map')){
throw f(37,
'Map.prototype.keys',this);
}
return new g(this,1);
}
function MapValues(){
if(!(%_ClassOf(this)==='Map')){
throw f(37,
'Map.prototype.values',this);
}
return new g(this,2);
}
%SetCode(g,MapIteratorConstructor);
%FunctionSetInstanceClassName(g,'Map Iterator');
b.InstallFunctions(g.prototype,2,[
'next',MapIteratorNextJS
]);
%AddNamedProperty(g.prototype,h,
"Map Iterator",1|2);
b.InstallFunctions(c.prototype,2,[
'entries',MapEntries,
'keys',MapKeys,
'values',MapValues
]);
%AddNamedProperty(c.prototype,e,MapEntries,2);
b.Export(function(p){
p.MapEntries=MapEntries;
p.MapIteratorNext=MapIteratorNextJS;
p.SetIteratorNext=SetIteratorNextJS;
p.SetValues=SetValues;
});
})

promise½e
(function(a,b,c){
"use strict";
%CheckIsBootstrapping();
var d=b.InternalArray;
var e;
var f=
b.ImportNow("promise_combined_deferred_symbol");
var g=
b.ImportNow("promise_has_handler_symbol");
var h=b.ImportNow("promise_on_reject_symbol");
var i=
b.ImportNow("promise_on_resolve_symbol");
var j=b.ImportNow("promise_raw_symbol");
var k=b.ImportNow("promise_status_symbol");
var l=b.ImportNow("promise_value_symbol");
var m=b.ImportNow("to_string_tag_symbol");
b.Import(function(n){
e=n.MakeTypeError;
});
var o=0;
var p=function Promise(q){
if(q===j)return;
if(!%_IsConstructCall())throw e(55,this);
if(!(typeof(q)==='function'))
throw e(102,q);
var r=PromiseInit(this);
try{
%DebugPushPromise(r,Promise,q);
q(function(s){PromiseResolve(r,s)},
function(t){PromiseReject(r,t)});
}catch(e){
PromiseReject(r,e);
}finally{
%DebugPopPromise();
}
}
function PromiseSet(r,u,v,w,x){
(r[k]=u);
(r[l]=v);
(r[i]=w);
(r[h]=x);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:r,status:u,value:v});
}
return r;
}
function PromiseCreateAndSet(u,v){
var r=new p(j);
if((%_DebugIsActive()!=0))PromiseSet(r,0,(void 0));
return PromiseSet(r,u,v);
}
function PromiseInit(r){
return PromiseSet(
r,0,(void 0),new d,new d)
}
function PromiseDone(r,u,v,y){
if((r[k])===0){
var z=(r[y]);
if(z.length)PromiseEnqueue(v,z,u);
PromiseSet(r,u,v);
}
}
function PromiseCoerce(A,s){
if(!IsPromise(s)&&(%_IsSpecObject(s))){
var B;
try{
B=s.then;
}catch(t){
return %_CallFunction(A,t,PromiseRejected);
}
if((typeof(B)==='function')){
var C=%_CallFunction(A,PromiseDeferred);
try{
%_Call(B,s,C.resolve,C.reject);
}catch(t){
C.reject(t);
}
return C.promise;
}
}
return s;
}
function PromiseHandle(v,D,C){
try{
%DebugPushPromise(C.promise,PromiseHandle,D);
var E=D(v);
if(E===C.promise)
throw e(81,E);
else if(IsPromise(E))
%_CallFunction(E,C.resolve,C.reject,PromiseChain);
else
C.resolve(E);
}catch(exception){
try{C.reject(exception);}catch(e){}
}finally{
%DebugPopPromise();
}
}
function PromiseEnqueue(v,z,u){
var F,G,H=(%_DebugIsActive()!=0);
%EnqueueMicrotask(function(){
if(H){
%DebugAsyncTaskEvent({type:"willHandle",id:F,name:G});
}
for(var I=0;I<z.length;I+=2){
PromiseHandle(v,z[I],z[I+1])
}
if(H){
%DebugAsyncTaskEvent({type:"didHandle",id:F,name:G});
}
});
if(H){
F=++o;
G=u>0?"Promise.resolve":"Promise.reject";
%DebugAsyncTaskEvent({type:"enqueue",id:F,name:G});
}
}
function PromiseIdResolveHandler(s){return s}
function PromiseIdRejectHandler(t){throw t}
function PromiseNopResolver(){}
function IsPromise(s){
return(%_IsSpecObject(s))&&(!(s[k]===(void 0)));
}
function PromiseCreate(){
return new p(PromiseNopResolver)
}
function PromiseResolve(r,s){
PromiseDone(r,+1,s,i)
}
function PromiseReject(r,t){
if((r[k])==0){
var J=(%_DebugIsActive()!=0);
if(J||
!(!(r[g]===(void 0)))){
%PromiseRejectEvent(r,t,J);
}
}
PromiseDone(r,-1,t,h)
}
function PromiseDeferred(){
if(this===p){
var r=PromiseInit(new p(j));
return{
promise:r,
resolve:function(s){PromiseResolve(r,s)},
reject:function(t){PromiseReject(r,t)}
};
}else{
var E={promise:(void 0),reject:(void 0),resolve:(void 0)};
E.promise=new this(function(K,L){
E.resolve=K;
E.reject=L;
});
return E;
}
}
function PromiseResolved(s){
if(this===p){
return PromiseCreateAndSet(+1,s);
}else{
return new this(function(K,L){K(s)});
}
}
function PromiseRejected(t){
var r;
if(this===p){
r=PromiseCreateAndSet(-1,t);
%PromiseRejectEvent(r,t,false);
}else{
r=new this(function(K,L){L(t)});
}
return r;
}
function PromiseChain(w,x){
w=(w===(void 0))?PromiseIdResolveHandler:w;
x=(x===(void 0))?PromiseIdRejectHandler:x;
var C=%_CallFunction(this.constructor,PromiseDeferred);
switch((this[k])){
case(void 0):
throw e(55,this);
case 0:
(this[i]).push(w,C);
(this[h]).push(x,C);
break;
case+1:
PromiseEnqueue((this[l]),
[w,C],
+1);
break;
case-1:
if(!(!(this[g]===(void 0)))){
%PromiseRevokeReject(this);
}
PromiseEnqueue((this[l]),
[x,C],
-1);
break;
}
(this[g]=true);
if((%_DebugIsActive()!=0)){
%DebugPromiseEvent({promise:C.promise,parentPromise:this});
}
return C.promise;
}
function PromiseCatch(x){
return this.then((void 0),x);
}
function PromiseThen(w,x){
w=(typeof(w)==='function')?w:PromiseIdResolveHandler;
x=(typeof(x)==='function')?x:PromiseIdRejectHandler;
var M=this;
var A=this.constructor;
return %_CallFunction(
this,
function(s){
s=PromiseCoerce(A,s);
if(s===M){
if(%_DebugIsActive()!=0)%DebugPrepareStepInIfStepping(x);
return x(e(81,s));
}else if(IsPromise(s)){
return s.then(w,x);
}else{
if(%_DebugIsActive()!=0)%DebugPrepareStepInIfStepping(w);
return w(s);
}
},
x,
PromiseChain
);
}
function PromiseCast(s){
if(IsPromise(s)&&s.constructor===this){
return s;
}else{
return new this(function(K){K(s)});
}
}
function PromiseAll(N){
var C=%_CallFunction(this,PromiseDeferred);
var O=[];
try{
var P=0;
var I=0;
for(var v of N){
var L=function(t){C.reject(t)};
this.resolve(v).then(
(function(I){
return function(s){
O[I]=s;
if(--P===0)C.resolve(O);
}
})(I),L);
(L[f]=C);
++I;
++P;
}
if(P===0){
C.resolve(O);
}
}catch(e){
C.reject(e)
}
return C.promise;
}
function PromiseRace(N){
var C=%_CallFunction(this,PromiseDeferred);
try{
for(var v of N){
var L=function(t){C.reject(t)};
this.resolve(v).then(function(s){C.resolve(s)},L);
(L[f]=C);
}
}catch(e){
C.reject(e)
}
return C.promise;
}
function PromiseHasUserDefinedRejectHandlerRecursive(r){
var Q=(r[h]);
if((Q===(void 0)))return false;
for(var I=0;I<Q.length;I+=2){
var D=Q[I];
if(D!==PromiseIdRejectHandler){
var C=(D[f]);
if((C===(void 0)))return true;
if(PromiseHasUserDefinedRejectHandlerRecursive(C.promise)){
return true;
}
}else if(PromiseHasUserDefinedRejectHandlerRecursive(
Q[I+1].promise)){
return true;
}
}
return false;
}
function PromiseHasUserDefinedRejectHandler(){
return PromiseHasUserDefinedRejectHandlerRecursive(this);
};
%AddNamedProperty(a,'Promise',p,2);
%AddNamedProperty(p.prototype,m,"Promise",
2|1);
b.InstallFunctions(p,2,[
"defer",PromiseDeferred,
"accept",PromiseResolved,
"reject",PromiseRejected,
"all",PromiseAll,
"race",PromiseRace,
"resolve",PromiseCast
]);
b.InstallFunctions(p.prototype,2,[
"chain",PromiseChain,
"then",PromiseThen,
"catch",PromiseCatch
]);
%InstallToContext([
"promise_catch",PromiseCatch,
"promise_chain",PromiseChain,
"promise_create",PromiseCreate,
"promise_has_user_defined_reject_handler",PromiseHasUserDefinedRejectHandler,
"promise_reject",PromiseReject,
"promise_resolve",PromiseResolve,
"promise_then",PromiseThen,
]);
b.InstallFunctions(c,0,[
"createPromise",PromiseCreate,
"resolvePromise",PromiseResolve,
"rejectPromise",PromiseReject
]);
})

 messagesyè
(function(a,b){
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g=
b.ImportNow("call_site_receiver_symbol");
var h=
b.ImportNow("call_site_function_symbol");
var i=
b.ImportNow("call_site_position_symbol");
var j=
b.ImportNow("call_site_strict_symbol");
var k;
var l=
b.ImportNow("formatted_stack_trace_symbol");
var m
var n=a.Object;
var o;
var p;
var q;
var r=b.InternalArray;
var s=b.ImportNow("internal_error_symbol");
var t;
var u;
var v=b.ImportNow("Script");
var w=b.ImportNow("stack_trace_symbol");
var x;
var y;
var z;
var A;
var B;
var C;
var D;
b.Import(function(E){
c=E.ArrayJoin;
d=E.Bool16x8ToString;
e=E.Bool32x4ToString;
f=E.Bool8x16ToString;
k=E.Float32x4ToString;
m=E.FunctionSourceString;
o=E.Int16x8ToString;
p=E.Int32x4ToString;
q=E.Int8x16ToString;
t=E.ObjectDefineProperty;
u=E.ObjectToString;
x=E.StringCharAt;
y=E.StringIndexOf;
z=E.StringSubstring;
A=E.SymbolToString;
B=E.Uint16x8ToString;
C=E.Uint32x4ToString;
D=E.Uint8x16ToString;
});
var F;
var G;
var H;
var I;
var J;
var K;
var L;
function NoSideEffectsObjectToString(){
if((this===(void 0)))return"[object Undefined]";
if((this===null))return"[object Null]";
return"[object "+%_ClassOf((%_ToObject(this)))+"]";
}
function NoSideEffectToString(M){
if((typeof(M)==='string'))return M;
if((typeof(M)==='number'))return %_NumberToString(M);
if((typeof(M)==='boolean'))return M?'true':'false';
if((M===(void 0)))return'undefined';
if((M===null))return'null';
if((%_IsFunction(M))){
var N=%_CallFunction(M,M,m);
if(N.length>128){
N=%_SubString(N,0,111)+"...<omitted>..."+
%_SubString(N,N.length-2,N.length);
}
return N;
}
if((typeof(M)==='symbol'))return %_CallFunction(M,A);
if((%_IsSimdValue(M))){
switch(typeof(M)){
case'float32x4':return %_CallFunction(M,k);
case'int32x4':return %_CallFunction(M,p);
case'int16x8':return %_CallFunction(M,o);
case'int8x16':return %_CallFunction(M,q);
case'uint32x4':return %_CallFunction(M,C);
case'uint16x8':return %_CallFunction(M,B);
case'uint8x16':return %_CallFunction(M,D);
case'bool32x4':return %_CallFunction(M,e);
case'bool16x8':return %_CallFunction(M,d);
case'bool8x16':return %_CallFunction(M,f);
}
}
if((typeof(M)==='object')
&&%GetDataProperty(M,"toString")===u){
var O=%GetDataProperty(M,"constructor");
if(typeof O=="function"){
var P=O.name;
if((typeof(P)==='string')&&P!==""){
return"#<"+P+">";
}
}
}
if(CanBeSafelyTreatedAsAnErrorObject(M)){
return %_CallFunction(M,ErrorToString);
}
return %_CallFunction(M,NoSideEffectsObjectToString);
}
function CanBeSafelyTreatedAsAnErrorObject(M){
switch(%_ClassOf(M)){
case'Error':
case'EvalError':
case'RangeError':
case'ReferenceError':
case'SyntaxError':
case'TypeError':
case'URIError':
return true;
}
var Q=%GetDataProperty(M,"toString");
return M instanceof F&&Q===ErrorToString;
}
function ToStringCheckErrorObject(M){
if(CanBeSafelyTreatedAsAnErrorObject(M)){
return %_CallFunction(M,ErrorToString);
}else{
return(%_ToString(M));
}
}
function ToDetailString(M){
if(M!=null&&(typeof(M)==='object')&&M.toString===u){
var O=M.constructor;
if(typeof O=="function"){
var P=O.name;
if((typeof(P)==='string')&&P!==""){
return"#<"+P+">";
}
}
}
return ToStringCheckErrorObject(M);
}
function MakeGenericError(O,R,S,T,U){
var V=new O(FormatMessage(R,S,T,U));
V[s]=true;
return V;
}
%FunctionSetInstanceClassName(v,'Script');
%AddNamedProperty(v.prototype,'constructor',v,
2|4|1);
%SetCode(v,function(W){
throw MakeError(6);
});
function FormatMessage(R,S,T,U){
var S=NoSideEffectToString(S);
var T=NoSideEffectToString(T);
var U=NoSideEffectToString(U);
try{
return %FormatMessageString(R,S,T,U);
}catch(e){
return"<error>";
}
}
function GetLineNumber(X){
var Y=%MessageGetStartPosition(X);
if(Y==-1)return 0;
var Z=%MessageGetScript(X);
var aa=Z.locationFromPosition(Y,true);
if(aa==null)return 0;
return aa.line+1;
}
function GetColumnNumber(X){
var Z=%MessageGetScript(X);
var Y=%MessageGetStartPosition(X);
var aa=Z.locationFromPosition(Y,true);
if(aa==null)return-1;
return aa.column;
}
function GetSourceLine(X){
var Z=%MessageGetScript(X);
var Y=%MessageGetStartPosition(X);
var aa=Z.locationFromPosition(Y,true);
if(aa==null)return"";
return aa.sourceText();
}
function ScriptLineFromPosition(ab){
var ac=0;
var ad=this.lineCount()-1;
var ae=this.line_ends;
if(ab>ae[ad]){
return-1;
}
if(ab<=ae[0]){
return 0;
}
while(ad>=1){
var af=(ac+ad)>>1;
if(ab>ae[af]){
ac=af+1;
}else if(ab<=ae[af-1]){
ad=af-1;
}else{
return af;
}
}
return-1;
}
function ScriptLocationFromPosition(ab,
include_resource_offset){
var ag=this.lineFromPosition(ab);
if(ag==-1)return null;
var ae=this.line_ends;
var ah=ag==0?0:ae[ag-1]+1;
var ai=ae[ag];
if(ai>0&&%_CallFunction(this.source,ai-1,x)=='\r'){
ai--;
}
var aj=ab-ah;
if(include_resource_offset){
ag+=this.line_offset;
if(ag==this.line_offset){
aj+=this.column_offset;
}
}
return new SourceLocation(this,ab,ag,aj,ah,ai);
}
function ScriptLocationFromLine(ak,al,am){
var ag=0;
if(!(ak===(void 0))){
ag=ak-this.line_offset;
}
var aj=al||0;
if(ag==0){
aj-=this.column_offset;
}
var an=am||0;
if(ag<0||aj<0||an<0)return null;
if(ag==0){
return this.locationFromPosition(an+aj,false);
}else{
var ao=this.lineFromPosition(an);
if(ao==-1||ao+ag>=this.lineCount()){
return null;
}
return this.locationFromPosition(
this.line_ends[ao+ag-1]+1+aj);
}
}
function ScriptSourceSlice(ap,aq){
var ar=(ap===(void 0))?this.line_offset
:ap;
var as=(aq===(void 0))?this.line_offset+this.lineCount()
:aq;
ar-=this.line_offset;
as-=this.line_offset;
if(ar<0)ar=0;
if(as>this.lineCount())as=this.lineCount();
if(ar>=this.lineCount()||
as<0||
ar>as){
return null;
}
var ae=this.line_ends;
var at=ar==0?0:ae[ar-1]+1;
var au=as==0?0:ae[as-1]+1;
return new SourceSlice(this,
ar+this.line_offset,
as+this.line_offset,
at,au);
}
function ScriptSourceLine(ak){
var ag=0;
if(!(ak===(void 0))){
ag=ak-this.line_offset;
}
if(ag<0||this.lineCount()<=ag){
return null;
}
var ae=this.line_ends;
var ah=ag==0?0:ae[ag-1]+1;
var ai=ae[ag];
return %_CallFunction(this.source,ah,ai,z);
}
function ScriptLineCount(){
return this.line_ends.length;
}
function ScriptLineEnd(av){
return this.line_ends[av];
}
function ScriptNameOrSourceURL(){
if(this.source_url)return this.source_url;
return this.name;
}
b.SetUpLockedPrototype(v,[
"source",
"name",
"source_url",
"source_mapping_url",
"line_ends",
"line_offset",
"column_offset"
],[
"lineFromPosition",ScriptLineFromPosition,
"locationFromPosition",ScriptLocationFromPosition,
"locationFromLine",ScriptLocationFromLine,
"sourceSlice",ScriptSourceSlice,
"sourceLine",ScriptSourceLine,
"lineCount",ScriptLineCount,
"nameOrSourceURL",ScriptNameOrSourceURL,
"lineEnd",ScriptLineEnd
]
);
function SourceLocation(Z,ab,ag,aj,ah,ai){
this.script=Z;
this.position=ab;
this.line=ag;
this.column=aj;
this.start=ah;
this.end=ai;
}
function SourceLocationSourceText(){
return %_CallFunction(this.script.source,
this.start,
this.end,
z);
}
b.SetUpLockedPrototype(SourceLocation,
["script","position","line","column","start","end"],
["sourceText",SourceLocationSourceText]
);
function SourceSlice(Z,ar,as,at,au){
this.script=Z;
this.from_line=ar;
this.to_line=as;
this.from_position=at;
this.to_position=au;
}
function SourceSliceSourceText(){
return %_CallFunction(this.script.source,
this.from_position,
this.to_position,
z);
}
b.SetUpLockedPrototype(SourceSlice,
["script","from_line","to_line","from_position","to_position"],
["sourceText",SourceSliceSourceText]
);
function GetStackTraceLine(aw,ax,ay,az){
return new CallSite(aw,ax,ay,false).toString();
}
function CallSite(aA,ax,ay,aB){
(this[g]=aA);
(this[h]=ax);
(this[i]=ay);
(this[j]=aB);
}
function CallSiteGetThis(){
return(this[j])
?(void 0):(this[g]);
}
function CallSiteGetFunction(){
return(this[j])
?(void 0):(this[h]);
}
function CallSiteGetPosition(){
return(this[i]);
}
function CallSiteGetTypeName(){
return GetTypeName((this[g]),false);
}
function CallSiteIsToplevel(){
return %CallSiteIsToplevelRT(this);
}
function CallSiteIsEval(){
return %CallSiteIsEvalRT(this);
}
function CallSiteGetEvalOrigin(){
var Z=%FunctionGetScript((this[h]));
return FormatEvalOrigin(Z);
}
function CallSiteGetScriptNameOrSourceURL(){
return %CallSiteGetScriptNameOrSourceUrlRT(this);
}
function CallSiteGetFunctionName(){
return %CallSiteGetFunctionNameRT(this);
}
function CallSiteGetMethodName(){
return %CallSiteGetMethodNameRT(this);
}
function CallSiteGetFileName(){
return %CallSiteGetFileNameRT(this);
}
function CallSiteGetLineNumber(){
return %CallSiteGetLineNumberRT(this);
}
function CallSiteGetColumnNumber(){
return %CallSiteGetColumnNumberRT(this);
}
function CallSiteIsNative(){
return %CallSiteIsNativeRT(this);
}
function CallSiteIsConstructor(){
return %CallSiteIsConstructorRT(this);
}
function CallSiteToString(){
var aC;
var aD="";
if(this.isNative()){
aD="native";
}else{
aC=this.getScriptNameOrSourceURL();
if(!aC&&this.isEval()){
aD=this.getEvalOrigin();
aD+=", ";
}
if(aC){
aD+=aC;
}else{
aD+="<anonymous>";
}
var aE=this.getLineNumber();
if(aE!=null){
aD+=":"+aE;
var aF=this.getColumnNumber();
if(aF){
aD+=":"+aF;
}
}
}
var ag="";
var aG=this.getFunctionName();
var aH=true;
var aI=this.isConstructor();
var aJ=!(this.isToplevel()||aI);
if(aJ){
var aK=GetTypeName((this[g]),true);
var aL=this.getMethodName();
if(aG){
if(aK&&
%_CallFunction(aG,aK,y)!=0){
ag+=aK+".";
}
ag+=aG;
if(aL&&
(%_CallFunction(aG,"."+aL,y)!=
aG.length-aL.length-1)){
ag+=" [as "+aL+"]";
}
}else{
ag+=aK+"."+(aL||"<anonymous>");
}
}else if(aI){
ag+="new "+(aG||"<anonymous>");
}else if(aG){
ag+=aG;
}else{
ag+=aD;
aH=false;
}
if(aH){
ag+=" ("+aD+")";
}
return ag;
}
b.SetUpLockedPrototype(CallSite,["receiver","fun","pos"],[
"getThis",CallSiteGetThis,
"getTypeName",CallSiteGetTypeName,
"isToplevel",CallSiteIsToplevel,
"isEval",CallSiteIsEval,
"getEvalOrigin",CallSiteGetEvalOrigin,
"getScriptNameOrSourceURL",CallSiteGetScriptNameOrSourceURL,
"getFunction",CallSiteGetFunction,
"getFunctionName",CallSiteGetFunctionName,
"getMethodName",CallSiteGetMethodName,
"getFileName",CallSiteGetFileName,
"getLineNumber",CallSiteGetLineNumber,
"getColumnNumber",CallSiteGetColumnNumber,
"isNative",CallSiteIsNative,
"getPosition",CallSiteGetPosition,
"isConstructor",CallSiteIsConstructor,
"toString",CallSiteToString
]);
function FormatEvalOrigin(Z){
var aM=Z.nameOrSourceURL();
if(aM){
return aM;
}
var aN="eval at ";
if(Z.eval_from_function_name){
aN+=Z.eval_from_function_name;
}else{
aN+="<anonymous>";
}
var aO=Z.eval_from_script;
if(aO){
if(aO.compilation_type==1){
aN+=" ("+FormatEvalOrigin(aO)+")";
}else{
if(aO.name){
aN+=" ("+aO.name;
var aa=aO.locationFromPosition(
Z.eval_from_script_position,true);
if(aa){
aN+=":"+(aa.line+1);
aN+=":"+(aa.column+1);
}
aN+=")";
}else{
aN+=" (unknown source)";
}
}
}
return aN;
}
function FormatErrorString(V){
try{
return %_CallFunction(V,ErrorToString);
}catch(e){
try{
return"<error: "+e+">";
}catch(ee){
return"<error>";
}
}
}
function GetStackFrames(aP){
var aQ=new r();
var aR=aP[0];
for(var af=1;af<aP.length;af+=4){
var aw=aP[af];
var ax=aP[af+1];
var aS=aP[af+2];
var aT=aP[af+3];
var ay=%_IsSmi(aS)?aS:%FunctionGetPositionForOffset(aS,aT);
aR--;
aQ.push(new CallSite(aw,ax,ay,(aR<0)));
}
return aQ;
}
var aU=false;
function FormatStackTrace(M,aP){
var aQ=GetStackFrames(aP);
if((%_IsFunction(F.prepareStackTrace))&&
!aU){
var aV=[];
%MoveArrayContents(aQ,aV);
aU=true;
var aW=(void 0);
try{
aW=F.prepareStackTrace(M,aV);
}catch(e){
throw e;
}finally{
aU=false;
}
return aW;
}
var aX=new r();
aX.push(FormatErrorString(M));
for(var af=0;af<aQ.length;af++){
var aY=aQ[af];
var ag;
try{
ag=aY.toString();
}catch(e){
try{
ag="<error: "+e+">";
}catch(ee){
ag="<error>";
}
}
aX.push("    at "+ag);
}
return %_CallFunction(aX,"\n",c);
}
function GetTypeName(aA,aZ){
if((aA==null))return null;
var O=aA.constructor;
if(!O){
return aZ?null:
%_CallFunction(aA,NoSideEffectsObjectToString);
}
var P=O.name;
if(!P){
return aZ?null:
%_CallFunction(aA,NoSideEffectsObjectToString);
}
return P;
}
var ba=function(){
var bb=(void 0);
var bc=this;
while(bc){
var bb=
(bc[l]);
if((bb===(void 0))){
var aW=(bc[w]);
if((aW===(void 0))){
bc=%_GetPrototype(bc);
continue;
}
bb=FormatStackTrace(bc,aW);
(bc[w]=(void 0));
(bc[l]=bb);
}
return bb;
}
return(void 0);
};
var bd=function(be){
if((%HasOwnProperty(this,w))){
(this[w]=(void 0));
(this[l]=be);
}
};
var bf=function(){};
function DefineError(a,bg){
var bh=bg.name;
%AddNamedProperty(a,bh,bg,2);
if(bh=='Error'){
var bi=function(){};
%FunctionSetPrototype(bi,n.prototype);
%FunctionSetInstanceClassName(bi,'Error');
%FunctionSetPrototype(bg,new bi());
}else{
%FunctionSetPrototype(bg,new F());
%InternalSetPrototype(bg,F);
}
%FunctionSetInstanceClassName(bg,'Error');
%AddNamedProperty(bg.prototype,'constructor',bg,2);
%AddNamedProperty(bg.prototype,'name',bh,2);
%SetCode(bg,function(bj){
if(%_IsConstructCall()){
try{bf(this,bg);}catch(e){}
if(!(bj===(void 0))){
%AddNamedProperty(this,'message',(%_ToString(bj)),2);
}
}else{
return new bg(bj);
}
});
%SetNativeFlag(bg);
return bg;
};
F=DefineError(a,function Error(){});
L=DefineError(a,function EvalError(){});
H=DefineError(a,function RangeError(){});
K=DefineError(a,function ReferenceError(){});
J=DefineError(a,function SyntaxError(){});
G=DefineError(a,function TypeError(){});
I=DefineError(a,function URIError(){});
%AddNamedProperty(F.prototype,'message','',2);
b.InstallFunctions(F.prototype,2,
['toString',ErrorToString]);
function ErrorToString(){
if(!(%_IsSpecObject(this))){
throw MakeTypeError(14,"Error.prototype.toString");
}
return %ErrorToStringRT(this);
}
function MakeError(R,S,T,U){
return MakeGenericError(F,R,S,T,U);
}
function MakeRangeError(R,S,T,U){
return MakeGenericError(H,R,S,T,U);
}
function MakeSyntaxError(R,S,T,U){
return MakeGenericError(J,R,S,T,U);
}
function MakeTypeError(R,S,T,U){
return MakeGenericError(G,R,S,T,U);
}
function MakeURIError(){
return MakeGenericError(I,245);
}
var bk=MakeRangeError(155);
%DefineAccessorPropertyUnchecked(bk,'stack',
ba,bd,
2);
bf=function captureStackTrace(M,bl){
t(M,'stack',{get:ba,
set:bd,
configurable:true});
%CollectStackTrace(M,bl?bl:bf);
};
F.captureStackTrace=bf;
%InstallToContext([
"error_function",F,
"eval_error_function",L,
"get_stack_trace_line_fun",GetStackTraceLine,
"make_error_function",MakeGenericError,
"make_range_error",MakeRangeError,
"make_type_error",MakeTypeError,
"message_get_column_number",GetColumnNumber,
"message_get_line_number",GetLineNumber,
"message_get_source_line",GetSourceLine,
"no_side_effect_to_string_fun",NoSideEffectToString,
"range_error_function",H,
"reference_error_function",K,
"stack_overflow_boilerplate",bk,
"syntax_error_function",J,
"to_detail_string_fun",ToDetailString,
"type_error_function",G,
"uri_error_function",I,
]);
b.Export(function(bm){
bm.ErrorToString=ErrorToString;
bm.MakeError=MakeError;
bm.MakeRangeError=MakeRangeError;
bm.MakeSyntaxError=MakeSyntaxError;
bm.MakeTypeError=MakeTypeError;
bm.MakeURIError=MakeURIError;
});
});

json;
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.JSON;
var d=b.InternalArray;
var e;
var f;
var g;
var h;
var i=b.ImportNow("to_string_tag_symbol");
b.Import(function(j){
e=j.MakeTypeError;
f=j.MaxSimple;
g=j.MinSimple;
h=j.ObjectHasOwnProperty;
});
function Revive(k,l,m){
var n=k[l];
if((typeof(n)==='object')){
if((%_IsArray(n))){
var o=n.length;
for(var p=0;p<o;p++){
var q=Revive(n,%_NumberToString(p),m);
n[p]=q;
}
}else{
for(var r in n){
if((%_CallFunction(n,r,h))){
var q=Revive(n,r,m);
if((q===(void 0))){
delete n[r];
}else{
n[r]=q;
}
}
}
}
}
return %_Call(m,k,l,n);
}
function JSONParse(s,m){
var t=%ParseJson(s);
if((typeof(m)==='function')){
return Revive({'':t},'',m);
}else{
return t;
}
}
function SerializeArray(u,v,w,x,y){
if(!%PushIfAbsent(w,u))throw e(19);
var z=x;
x+=y;
var A=new d();
var B=u.length;
for(var p=0;p<B;p++){
var C=JSONSerialize(%_NumberToString(p),u,v,w,
x,y);
if((C===(void 0))){
C="null";
}
A.push(C);
}
var D;
if(y==""){
D="["+A.join(",")+"]";
}else if(A.length>0){
var E=",\n"+x;
D="[\n"+x+A.join(E)+"\n"+
z+"]";
}else{
D="[]";
}
w.pop();
return D;
}
function SerializeObject(u,v,w,x,y){
if(!%PushIfAbsent(w,u))throw e(19);
var z=x;
x+=y;
var A=new d();
if((%_IsArray(v))){
var o=v.length;
for(var p=0;p<o;p++){
if((%_CallFunction(v,p,h))){
var r=v[p];
var C=JSONSerialize(r,u,v,w,x,y);
if(!(C===(void 0))){
var F=%QuoteJSONString(r)+":";
if(y!="")F+=" ";
F+=C;
A.push(F);
}
}
}
}else{
for(var r in u){
if((%_CallFunction(u,r,h))){
var C=JSONSerialize(r,u,v,w,x,y);
if(!(C===(void 0))){
var F=%QuoteJSONString(r)+":";
if(y!="")F+=" ";
F+=C;
A.push(F);
}
}
}
}
var D;
if(y==""){
D="{"+A.join(",")+"}";
}else if(A.length>0){
var E=",\n"+x;
D="{\n"+x+A.join(E)+"\n"+
z+"}";
}else{
D="{}";
}
w.pop();
return D;
}
function JSONSerialize(G,k,v,w,x,y){
var u=k[G];
if((%_IsSpecObject(u))){
var H=u.toJSON;
if((typeof(H)==='function')){
u=%_Call(H,u,G);
}
}
if((typeof(v)==='function')){
u=%_Call(v,k,G,u);
}
if((typeof(u)==='string')){
return %QuoteJSONString(u);
}else if((typeof(u)==='number')){
return((%_IsSmi(%IS_VAR(u))||u-u==0)?%_NumberToString(u):"null");
}else if((typeof(u)==='boolean')){
return u?"true":"false";
}else if((u===null)){
return"null";
}else if((%_IsSpecObject(u))&&!(typeof(u)==='function')){
if((%_IsArray(u))){
return SerializeArray(u,v,w,x,y);
}else if((%_ClassOf(u)==='Number')){
u=(%_ToNumber(u));
return((%_IsSmi(%IS_VAR(u))||u-u==0)?%_NumberToString(u):"null");
}else if((%_ClassOf(u)==='String')){
return %QuoteJSONString((%_ToString(u)));
}else if((%_ClassOf(u)==='Boolean')){
return %_ValueOf(u)?"true":"false";
}else{
return SerializeObject(u,v,w,x,y);
}
}
return(void 0);
}
function JSONStringify(u,v,I){
if(%_ArgumentsLength()==1){
return %BasicJSONStringify(u);
}
if((%_IsArray(v))){
var J=new d();
var K={__proto__:null};
var o=v.length;
for(var p=0;p<o;p++){
var L=v[p];
var M;
if((typeof(L)==='string')){
M=L;
}else if((typeof(L)==='number')){
M=%_NumberToString(L);
}else if((%_ClassOf(L)==='String')||(%_ClassOf(L)==='Number')){
M=(%_ToString(L));
}else{
continue;
}
if(!K[M]){
J.push(M);
K[M]=true;
}
}
v=J;
}
if((typeof(I)==='object')){
if((%_ClassOf(I)==='Number')){
I=(%_ToNumber(I));
}else if((%_ClassOf(I)==='String')){
I=(%_ToString(I));
}
}
var y;
if((typeof(I)==='number')){
I=f(0,g((%_ToInteger(I)),10));
y=%_SubString("          ",0,I);
}else if((typeof(I)==='string')){
if(I.length>10){
y=%_SubString(I,0,10);
}else{
y=I;
}
}else{
y="";
}
return JSONSerialize('',{'':u},v,new d(),"",y);
}
%AddNamedProperty(c,i,"JSON",1|2);
b.InstallFunctions(c,2,[
"parse",JSONParse,
"stringify",JSONStringify
]);
function JsonSerializeAdapter(G,N){
var k={};
k[G]=N;
return JSONSerialize(G,k,(void 0),new d(),"","");
}
%InstallToContext(["json_serialize_adapter",JsonSerializeAdapter]);
})

8array-iterator1>
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=
b.ImportNow("array_iteration_kind_symbol");
var d=
b.ImportNow("array_iterator_next_symbol");
var e=
b.ImportNow("array_iterator_object_symbol");
var f=a.Array;
var g=b.ImportNow("IteratorPrototype");
var h=b.ImportNow("iterator_symbol");
var i;
var j=b.ImportNow("to_string_tag_symbol");
var k=a.Uint8Array;

var l=a.Int8Array;

var m=a.Uint16Array;

var n=a.Int16Array;

var o=a.Uint32Array;

var p=a.Int32Array;

var q=a.Float32Array;

var r=a.Float64Array;

var s=a.Uint8ClampedArray;


b.Import(function(t){
i=t.MakeTypeError;
})
function ArrayIterator(){}
function CreateArrayIterator(u,v){
var w=(%_ToObject(u));
var x=new ArrayIterator;
(x[e]=w);
(x[d]=0);
(x[c]=v);
return x;
}
function ArrayIteratorIterator(){
return this;
}
function ArrayIteratorNext(){
var x=this;
var y=(void 0);
var z=true;
if(!(%_IsSpecObject(x))||
!(!(x[d]===(void 0)))){
throw i(37,
'Array Iterator.prototype.next',this);
}
var u=(x[e]);
if(!(u===(void 0))){
var A=(x[d]);
var B=(x[c]);
var C=((u.length)>>>0);
if(A>=C){
(x[e]=(void 0));
}else{
(x[d]=A+1);
if(B==2){
y=u[A];
}else if(B==3){
y=[A,u[A]];
}else{
y=A;
}
z=false;
}
}
return %_CreateIterResultObject(y,z);
}
function ArrayEntries(){
return CreateArrayIterator(this,3);
}
function ArrayValues(){
return CreateArrayIterator(this,2);
}
function ArrayKeys(){
return CreateArrayIterator(this,1);
}
%FunctionSetPrototype(ArrayIterator,{__proto__:g});
%FunctionSetInstanceClassName(ArrayIterator,'Array Iterator');
b.InstallFunctions(ArrayIterator.prototype,2,[
'next',ArrayIteratorNext
]);
b.SetFunctionName(ArrayIteratorIterator,h);
%AddNamedProperty(ArrayIterator.prototype,h,
ArrayIteratorIterator,2);
%AddNamedProperty(ArrayIterator.prototype,j,
"Array Iterator",1|2);
b.InstallFunctions(f.prototype,2,[
'entries',ArrayEntries,
'keys',ArrayKeys
]);
b.SetFunctionName(ArrayValues,'values');
%AddNamedProperty(f.prototype,h,ArrayValues,
2);
%AddNamedProperty(k.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(k.prototype,'values',ArrayValues,2);
%AddNamedProperty(k.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(k.prototype,h,ArrayValues,
2);

%AddNamedProperty(l.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(l.prototype,'values',ArrayValues,2);
%AddNamedProperty(l.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(l.prototype,h,ArrayValues,
2);

%AddNamedProperty(m.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(m.prototype,'values',ArrayValues,2);
%AddNamedProperty(m.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(m.prototype,h,ArrayValues,
2);

%AddNamedProperty(n.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(n.prototype,'values',ArrayValues,2);
%AddNamedProperty(n.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(n.prototype,h,ArrayValues,
2);

%AddNamedProperty(o.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(o.prototype,'values',ArrayValues,2);
%AddNamedProperty(o.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(o.prototype,h,ArrayValues,
2);

%AddNamedProperty(p.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(p.prototype,'values',ArrayValues,2);
%AddNamedProperty(p.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(p.prototype,h,ArrayValues,
2);

%AddNamedProperty(q.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(q.prototype,'values',ArrayValues,2);
%AddNamedProperty(q.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(q.prototype,h,ArrayValues,
2);

%AddNamedProperty(r.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(r.prototype,'values',ArrayValues,2);
%AddNamedProperty(r.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(r.prototype,h,ArrayValues,
2);

%AddNamedProperty(s.prototype,'entries',ArrayEntries,2);
%AddNamedProperty(s.prototype,'values',ArrayValues,2);
%AddNamedProperty(s.prototype,'keys',ArrayKeys,2);
%AddNamedProperty(s.prototype,h,ArrayValues,
2);


b.Export(function(D){
D.ArrayValues=ArrayValues;
});
%InstallToContext(["array_values_iterator",ArrayValues]);
})

<string-iterator5
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.String;
var d=b.ImportNow("IteratorPrototype");
var e=b.ImportNow("iterator_symbol");
var f;
var g=
b.ImportNow("string_iterator_iterated_string_symbol");
var h=
b.ImportNow("string_iterator_next_index_symbol");
var i=b.ImportNow("to_string_tag_symbol");
b.Import(function(j){
f=j.MakeTypeError;
});
function StringIterator(){}
function CreateStringIterator(k){
var l=(%_ToString(k));
var m=new StringIterator;
(m[g]=l);
(m[h]=0);
return m;
}
function StringIteratorNext(){
var m=this;
var n=(void 0);
var o=true;
if(!(%_IsSpecObject(m))||
!(!(m[h]===(void 0)))){
throw f(37,
'String Iterator.prototype.next');
}
var l=(m[g]);
if(!(l===(void 0))){
var p=(m[h]);
var q=((l.length)>>>0);
if(p>=q){
(m[g]=(void 0));
}else{
var r=%_StringCharCodeAt(l,p);
n=%_StringCharFromCode(r);
o=false;
p++;
if(r>=0xD800&&r<=0xDBFF&&p<q){
var s=%_StringCharCodeAt(l,p);
if(s>=0xDC00&&s<=0xDFFF){
n+=%_StringCharFromCode(s);
p++;
}
}
(m[h]=p);
}
}
return %_CreateIterResultObject(n,o);
}
function StringPrototypeIterator(){
return CreateStringIterator(this);
}
%FunctionSetPrototype(StringIterator,{__proto__:d});
%FunctionSetInstanceClassName(StringIterator,'String Iterator');
b.InstallFunctions(StringIterator.prototype,2,[
'next',StringIteratorNext
]);
%AddNamedProperty(StringIterator.prototype,i,
"String Iterator",1|2);
b.SetFunctionName(StringPrototypeIterator,e);
%AddNamedProperty(c.prototype,e,
StringPrototypeIterator,2);
})

$templatesi
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Map;
var d=b.InternalArray;
var e=new c;
var f=c.prototype.get;
var g=c.prototype.set;
function SameCallSiteElements(h,i){
var j=h.length;
var i=i.raw;
if(j!==i.length)return false;
for(var k=0;k<j;++k){
if(h[k]!==i[k])return false;
}
return true;
}
function GetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
if((n===(void 0)))return;
var j=n.length;
for(var k=0;k<j;++k){
if(SameCallSiteElements(l,n[k]))return n[k];
}
}
function SetCachedCallSite(l,m){
var n=%_CallFunction(e,m,f);
var o;
if((n===(void 0))){
o=new d(1);
o[0]=l;
%_CallFunction(e,m,o,g);
}else{
n.push(l);
}
return l;
}
function GetTemplateCallSite(l,h,m){
var p=GetCachedCallSite(h,m);
if(!(p===(void 0)))return p;
%AddNamedProperty(l,"raw",%ObjectFreeze(h),
1|2|4);
return SetCachedCallSite(%ObjectFreeze(l),m);
}
%InstallToContext(["get_template_call_site",GetTemplateCallSite]);
})

spreadÝ
(function(a,b){
'use strict';
var c=b.InternalArray;
var d;
b.Import(function(e){
d=e.MakeTypeError;
});
function SpreadArguments(){
var f=%_ArgumentsLength();
var g=new c();
for(var h=0;h<f;++h){
var i=%_Arguments(h);
var j=i.length;
for(var k=0;k<j;++k){
g.push(i[k]);
}
}
return g;
}
function SpreadIterable(l){
if((l==null)){
throw d(60,l);
}
var g=new c();
for(var m of l){
g.push(m);
}
return g;
}
%InstallToContext([
"spread_arguments",SpreadArguments,
"spread_iterable",SpreadIterable,
]);
})

4harmony-arrayy;
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g=a.Array;
var h=b.ImportNow("iterator_symbol");
var i;
var j;
var k;
var l;
var m;
b.Import(function(n){
c=n.AddIndexedProperty;
d=n.FLAG_harmony_tolength;
e=n.GetIterator;
f=n.GetMethod;
i=n.MakeTypeError;
j=n.MaxSimple;
k=n.MinSimple;
l=n.ObjectIsFrozen;
m=n.ObjectDefineProperty;
});
function InnerArrayCopyWithin(o,p,q,r,s){
o=(%_ToInteger(o));
var t;
if(o<0){
t=j(s+o,0);
}else{
t=k(o,s);
}
p=(%_ToInteger(p));
var n;
if(p<0){
n=j(s+p,0);
}else{
n=k(p,s);
}
q=(q===(void 0))?s:(%_ToInteger(q));
var u;
if(q<0){
u=j(s+q,0);
}else{
u=k(q,s);
}
var v=k(u-n,s-t);
var w=1;
if(n<t&&t<(n+v)){
w=-1;
n=n+v-1;
t=t+v-1;
}
while(v>0){
if(n in r){
r[t]=r[n];
}else{
delete r[t];
}
n=n+w;
t=t+w;
v--;
}
return r;
}
function ArrayCopyWithin(o,p,q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw i(15,"Array.prototype.copyWithin");
var r=(%_ToObject(this));
var s=(%_ToLength(r.length));
return InnerArrayCopyWithin(o,p,q,r,s);
}
function InnerArrayFind(x,y,r,s){
if(!(typeof(x)==='function')){
throw i(13,x);
}
for(var z=0;z<s;z++){
var A=r[z];
if(%_Call(x,y,A,z,r)){
return A;
}
}
return;
}
function ArrayFind(x,y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw i(15,"Array.prototype.find");
var r=(%_ToObject(this));
var s=(%_ToInteger(r.length));
return InnerArrayFind(x,y,r,s);
}
function InnerArrayFindIndex(x,y,r,s){
if(!(typeof(x)==='function')){
throw i(13,x);
}
for(var z=0;z<s;z++){
var A=r[z];
if(%_Call(x,y,A,z,r)){
return z;
}
}
return-1;
}
function ArrayFindIndex(x,y){
if((%IS_VAR(this)===null)||(this===(void 0)))throw i(15,"Array.prototype.findIndex");
var r=(%_ToObject(this));
var s=(%_ToInteger(r.length));
return InnerArrayFindIndex(x,y,r,s);
}
function InnerArrayFill(B,p,q,r,s){
var z=(p===(void 0))?0:(%_ToInteger(p));
var q=(q===(void 0))?s:(%_ToInteger(q));
if(z<0){
z+=s;
if(z<0)z=0;
}else{
if(z>s)z=s;
}
if(q<0){
q+=s;
if(q<0)q=0;
}else{
if(q>s)q=s;
}
if((q-z)>0&&l(r)){
throw i(10);
}
for(;z<q;z++)
r[z]=B;
return r;
}
function ArrayFill(B,p,q){
if((%IS_VAR(this)===null)||(this===(void 0)))throw i(15,"Array.prototype.fill");
var r=(%_ToObject(this));
var s=(d?(%_ToLength(r.length)):((r.length)>>>0));
return InnerArrayFill(B,p,q,r,s);
}
function AddArrayElement(C,r,z,B){
if(C===g){
c(r,z,B);
}else{
m(r,z,{
value:B,writable:true,configurable:true,enumerable:true
});
}
}
function ArrayFrom(D,E,F){
var G=(%_ToObject(D));
var H=!(E===(void 0));
if(H){
if(!(typeof(E)==='function')){
throw i(13,E);
}
}
var I=f(G,h);
var J;
var K;
var L;
var M;
if(!(I===(void 0))){
K=%IsConstructor(this)?new this():[];
var N=e(G,I);
J=0;
while(true){
var O=N.next();
if(!(typeof(O)==='object')){
throw i(42,O);
}
if(O.done){
K.length=J;
return K;
}
M=O.value;
if(H){
L=%_Call(E,F,M,J);
}else{
L=M;
}
AddArrayElement(this,K,J,L);
J++;
}
}else{
var P=(%_ToLength(G.length));
K=%IsConstructor(this)?new this(P):new g(P);
for(J=0;J<P;++J){
M=G[J];
if(H){
L=%_Call(E,F,M,J);
}else{
L=M;
}
AddArrayElement(this,K,J,L);
}
K.length=J;
return K;
}
}
function ArrayOf(){
var s=%_ArgumentsLength();
var C=this;
var r=%IsConstructor(C)?new C(s):[];
for(var z=0;z<s;z++){
AddArrayElement(C,r,z,%_Arguments(z));
}
r.length=s;
return r;
}
%FunctionSetLength(ArrayCopyWithin,2);
%FunctionSetLength(ArrayFrom,1);
%FunctionSetLength(ArrayFill,1);
%FunctionSetLength(ArrayFind,1);
%FunctionSetLength(ArrayFindIndex,1);
b.InstallFunctions(g,2,[
"from",ArrayFrom,
"of",ArrayOf
]);
b.InstallFunctions(g.prototype,2,[
"copyWithin",ArrayCopyWithin,
"find",ArrayFind,
"findIndex",ArrayFindIndex,
"fill",ArrayFill
]);
b.Export(function(t){
t.ArrayFrom=ArrayFrom;
t.InnerArrayCopyWithin=InnerArrayCopyWithin;
t.InnerArrayFill=InnerArrayFill;
t.InnerArrayFind=InnerArrayFind;
t.InnerArrayFindIndex=InnerArrayFindIndex;
});
})

Hharmony-typedarray-¬
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Uint8Array;

var d=a.Int8Array;

var e=a.Uint16Array;

var f=a.Int16Array;

var g=a.Uint32Array;

var h=a.Int32Array;

var i=a.Float32Array;

var j=a.Float64Array;

var k=a.Uint8ClampedArray;


var l=a.Array;

var m;
var n;
var o;
var p;
var q;
var r;
var s;
var t;
var u;
var v;
var w;
var x;
var y;
var z;
var A;
var B;
var C;
var D;
var E;
var F;
var G;
var H;
var I;
b.Import(function(J){
m=J.ArrayFrom;
n=J.ArrayToString;
o=J.InnerArrayCopyWithin;
p=J.InnerArrayEvery;
q=J.InnerArrayFill;
r=J.InnerArrayFilter;
s=J.InnerArrayFind;
t=J.InnerArrayFindIndex;
u=J.InnerArrayForEach;
v=J.InnerArrayIndexOf;
w=J.InnerArrayJoin;
x=J.InnerArrayLastIndexOf;
y=J.InnerArrayMap;
z=J.InnerArrayReduce;
A=J.InnerArrayReduceRight;
B=J.InnerArraySome;
C=J.InnerArraySort;
D=J.InnerArrayToLocaleString;
E=J.IsNaN;
F=J.MakeTypeError;
G=J.MaxSimple;
H=J.MinSimple;
I=J.PackedArrayReverse;
});
function ConstructTypedArray(K,L){
if(!%IsConstructor(K)||(K.prototype===(void 0))||
!%HasOwnProperty(K.prototype,"BYTES_PER_ELEMENT")){
throw F(61);
}
return new K(L);
}
function ConstructTypedArrayLike(M,L){
return ConstructTypedArray(M.constructor,L);
}
function TypedArrayCopyWithin(N,O,P){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return o(N,O,P,this,Q);
}
%FunctionSetLength(TypedArrayCopyWithin,2);
function TypedArrayEvery(R,S){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return p(R,S,this,Q);
}
%FunctionSetLength(TypedArrayEvery,1);
function TypedArrayForEach(R,S){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
u(R,S,this,Q);
}
%FunctionSetLength(TypedArrayForEach,1);
function TypedArrayFill(T,O,P){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return q(T,O,P,this,Q);
}
%FunctionSetLength(TypedArrayFill,1);
function TypedArrayFilter(U,V){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
var W=r(U,V,this,Q);
return ConstructTypedArrayLike(this,W);
}
%FunctionSetLength(TypedArrayFilter,1);
function TypedArrayFind(U,V){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return s(U,V,this,Q);
}
%FunctionSetLength(TypedArrayFind,1);
function TypedArrayFindIndex(U,V){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return t(U,V,this,Q);
}
%FunctionSetLength(TypedArrayFindIndex,1);
function TypedArrayReverse(){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return I(this,Q);
}
function TypedArrayComparefn(X,Y){
if(E(X)&&E(Y)){
return E(Y)?0:1;
}
if(E(X)){
return 1;
}
if(X===0&&X===Y){
if(%_IsMinusZero(X)){
if(!%_IsMinusZero(Y)){
return-1;
}
}else if(%_IsMinusZero(Y)){
return 1;
}
}
return X-Y;
}
function TypedArraySort(Z){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
if((Z===(void 0))){
Z=TypedArrayComparefn;
}
return C(this,Q,Z);
}
function TypedArrayIndexOf(aa,ab){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return v(this,aa,ab,Q);
}
%FunctionSetLength(TypedArrayIndexOf,1);
function TypedArrayLastIndexOf(aa,ab){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return x(this,aa,ab,Q,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayLastIndexOf,1);
function TypedArrayMap(U,V){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
var W=y(U,V,this,Q);
return ConstructTypedArrayLike(this,W);
}
%FunctionSetLength(TypedArrayMap,1);
function TypedArraySome(R,S){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return B(R,S,this,Q);
}
%FunctionSetLength(TypedArraySome,1);
function TypedArrayToLocaleString(){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return D(this,Q);
}
function TypedArrayToString(){
return %_Call(n,this);
}
function TypedArrayJoin(ac){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return w(ac,this,Q);
}
function TypedArrayReduce(ad,ae){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return z(ad,ae,this,Q,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduce,1);
function TypedArrayReduceRight(ad,ae){
if(!%_IsTypedArray(this))throw F(61);
var Q=%_TypedArrayGetLength(this);
return A(ad,ae,this,Q,
%_ArgumentsLength());
}
%FunctionSetLength(TypedArrayReduceRight,1);
function TypedArraySlice(O,P){
if(!%_IsTypedArray(this))throw F(61);
var af=%_TypedArrayGetLength(this);
var ag=(%_ToInteger(O));
var ah;
if(ag<0){
ah=G(af+ag,0);
}else{
ah=H(ag,af);
}
var ai;
if((P===(void 0))){
ai=af;
}else{
ai=(%_ToInteger(P));
}
var aj;
if(ai<0){
aj=G(af+ai,0);
}else{
aj=H(ai,af);
}
var ak=G(aj-ah,0);
var W=ConstructTypedArrayLike(this,ak);
var al=0;
while(ah<aj){
var am=this[ah];
W[al]=am;
ah++;
al++;
}
return W;
}
function TypedArrayOf(){
var Q=%_ArgumentsLength();
var W=new this(Q);
for(var an=0;an<Q;an++){
W[an]=%_Arguments(an);
}
return W;
}
function TypedArrayFrom(ao,ap,V){
var W=%_Call(m,l,ao,ap,V);
return ConstructTypedArray(this,W);
}
%FunctionSetLength(TypedArrayFrom,1);
b.InstallFunctions(c,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(c.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(d,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(d.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(e,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(e.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(f,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(f.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(g,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(g.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(h,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(h.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(i,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(i.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(j,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(j.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);

b.InstallFunctions(k,2|4|1,[
"from",TypedArrayFrom,
"of",TypedArrayOf
]);
b.InstallFunctions(k.prototype,2,[
"copyWithin",TypedArrayCopyWithin,
"every",TypedArrayEvery,
"fill",TypedArrayFill,
"filter",TypedArrayFilter,
"find",TypedArrayFind,
"findIndex",TypedArrayFindIndex,
"indexOf",TypedArrayIndexOf,
"join",TypedArrayJoin,
"lastIndexOf",TypedArrayLastIndexOf,
"forEach",TypedArrayForEach,
"map",TypedArrayMap,
"reduce",TypedArrayReduce,
"reduceRight",TypedArrayReduceRight,
"reverse",TypedArrayReverse,
"slice",TypedArraySlice,
"some",TypedArraySome,
"sort",TypedArraySort,
"toString",TypedArrayToString,
"toLocaleString",TypedArrayToLocaleString
]);


})

i18nÖÝ
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c;
var d;
var e;
var f;
var g;
var h=a.Boolean;
var i=a.Date;
var j=a.Number;
var k=a.RegExp;
var l=a.String;
var m;
var n;
var o;
var p;
var q=b.ImportNow("ObjectDefineProperties");
var r=b.ImportNow("ObjectDefineProperty");
var s;
var t;
var u;
var v;
var w;
var x;
var y;
var z;
b.Import(function(A){
c=A.ArrayIndexOf;
d=A.ArrayJoin;
e=A.ArrayPush;
f=A.IsFinite;
g=A.IsNaN;
m=A.MakeError;
n=A.MakeRangeError;
o=A.MakeTypeError;
p=A.MathFloor;
s=A.RegExpTest;
t=A.StringIndexOf;
u=A.StringLastIndexOf;
v=A.StringMatch;
w=A.StringReplace;
x=A.StringSplit;
y=A.StringSubstr;
z=A.StringSubstring;
});
var B={};
%AddNamedProperty(a,"Intl",B,2);
var C={
'collator':(void 0),
'numberformat':(void 0),
'dateformat':(void 0),
'breakiterator':(void 0)
};
var D=(void 0);
var E=(void 0);
function GetUnicodeExtensionRE(){
if(((void 0)===(void 0))){
E=new k('-u(-[a-z0-9]{2,8})+','g');
}
return E;
}
var F=(void 0);
function GetAnyExtensionRE(){
if((F===(void 0))){
F=new k('-[a-z0-9]{1}-.*','g');
}
return F;
}
var G=(void 0);
function GetQuotedStringRE(){
if((G===(void 0))){
G=new k("'[^']+'",'g');
}
return G;
}
var H=(void 0);
function GetServiceRE(){
if((H===(void 0))){
H=
new k('^(collator|numberformat|dateformat|breakiterator)$');
}
return H;
}
var I=(void 0);
function GetLanguageTagRE(){
if((I===(void 0))){
BuildLanguageTagREs();
}
return I;
}
var J=(void 0);
function GetLanguageVariantRE(){
if((J===(void 0))){
BuildLanguageTagREs();
}
return J;
}
var K=(void 0);
function GetLanguageSingletonRE(){
if((K===(void 0))){
BuildLanguageTagREs();
}
return K;
}
var L=(void 0);
function GetTimezoneNameCheckRE(){
if((L===(void 0))){
L=
new k('^([A-Za-z]+)/([A-Za-z]+)(?:_([A-Za-z]+))*$');
}
return L;
}
function addBoundMethod(M,N,O,P){
%CheckIsBootstrapping();
function getter(){
if(!%IsInitializedIntlObject(this)){
throw o(45,N);
}
var Q='__bound'+N+'__';
if((this[Q]===(void 0))){
var R=this;
var S;
if((P===(void 0))||P===2){
S=function(T,U){
if(%_IsConstructCall()){
throw o(80);
}
return O(R,T,U);
}
}else if(P===1){
S=function(T){
if(%_IsConstructCall()){
throw o(80);
}
return O(R,T);
}
}else{
S=function(){
if(%_IsConstructCall()){
throw o(80);
}
if(%_ArgumentsLength()>0){
return O(R,%_Arguments(0));
}else{
return O(R);
}
}
}
%FunctionSetName(S,Q);
%FunctionRemovePrototype(S);
%SetNativeFlag(S);
this[Q]=S;
}
return this[Q];
}
%FunctionSetName(getter,N);
%FunctionRemovePrototype(getter);
%SetNativeFlag(getter);
r(M.prototype,N,{
get:getter,
enumerable:false,
configurable:true
});
}
function supportedLocalesOf(V,W,X){
if((%_CallFunction(V,GetServiceRE(),v)===null)){
throw m(7,V);
}
if((X===(void 0))){
X={};
}else{
X=(%_ToObject(X));
}
var Y=X.localeMatcher;
if(!(Y===(void 0))){
Y=l(Y);
if(Y!=='lookup'&&Y!=='best fit'){
throw n(151,Y);
}
}else{
Y='best fit';
}
var Z=initializeLocaleList(W);
if((C[V]===(void 0))){
C[V]=getAvailableLocalesOf(V);
}
if(Y==='best fit'){
return initializeLocaleList(bestFitSupportedLocalesOf(
Z,C[V]));
}
return initializeLocaleList(lookupSupportedLocalesOf(
Z,C[V]));
}
function lookupSupportedLocalesOf(Z,aa){
var ab=[];
for(var ac=0;ac<Z.length;++ac){
var ad=%_CallFunction(Z[ac],GetUnicodeExtensionRE(),
'',w);
do{
if(!(aa[ad]===(void 0))){
%_CallFunction(ab,Z[ac],e);
break;
}
var ae=%_CallFunction(ad,'-',u);
if(ae===-1){
break;
}
ad=%_CallFunction(ad,0,ae,z);
}while(true);
}
return ab;
}
function bestFitSupportedLocalesOf(Z,aa){
return lookupSupportedLocalesOf(Z,aa);
}
function getGetOption(X,af){
if((X===(void 0)))throw m(4,af);
var ag=function getOption(ah,ai,aj,ak){
if(!(X[ah]===(void 0))){
var al=X[ah];
switch(ai){
case'boolean':
al=h(al);
break;
case'string':
al=l(al);
break;
case'number':
al=j(al);
break;
default:
throw m(8);
}
if(!(aj===(void 0))&&
%_CallFunction(aj,al,c)===-1){
throw n(161,al,af,ah);
}
return al;
}
return ak;
}
return ag;
}
function resolveLocale(V,Z,X){
Z=initializeLocaleList(Z);
var ag=getGetOption(X,V);
var Y=ag('localeMatcher','string',
['lookup','best fit'],'best fit');
var am;
if(Y==='lookup'){
am=lookupMatcher(V,Z);
}else{
am=bestFitMatcher(V,Z);
}
return am;
}
function lookupMatcher(V,Z){
if((%_CallFunction(V,GetServiceRE(),v)===null)){
throw m(7,V);
}
if((C[V]===(void 0))){
C[V]=getAvailableLocalesOf(V);
}
for(var ac=0;ac<Z.length;++ac){
var ad=%_CallFunction(Z[ac],GetAnyExtensionRE(),'',
w);
do{
if(!(C[V][ad]===(void 0))){
var an=
%_CallFunction(Z[ac],GetUnicodeExtensionRE(),
v);
var ao=(an===null)?'':an[0];
return{'locale':ad,'extension':ao,'position':ac};
}
var ae=%_CallFunction(ad,'-',u);
if(ae===-1){
break;
}
ad=%_CallFunction(ad,0,ae,z);
}while(true);
}
if((D===(void 0))){
D=%GetDefaultICULocale();
}
return{'locale':D,'extension':'','position':-1};
}
function bestFitMatcher(V,Z){
return lookupMatcher(V,Z);
}
function parseExtension(ao){
var ap=%_CallFunction(ao,'-',x);
if(ap.length<=2||
(ap[0]!==''&&ap[1]!=='u')){
return{};
}
var aq={};
var ar=(void 0);
for(var ac=2;ac<ap.length;++ac){
var P=ap[ac].length;
var as=ap[ac];
if(P===2){
aq[as]=(void 0);
ar=as;
}else if(P>=3&&P<=8&&!(ar===(void 0))){
aq[ar]=as;
ar=(void 0);
}else{
return{};
}
}
return aq;
}
function setOptions(at,aq,au,ag,av){
var ao='';
var aw=function updateExtension(ax,al){
return'-'+ax+'-'+l(al);
}
var ay=function updateProperty(ah,ai,al){
if(ai==='boolean'&&(typeof al==='string')){
al=(al==='true')?true:false;
}
if(!(ah===(void 0))){
defineWEProperty(av,ah,al);
}
}
for(var ax in au){
if(%HasOwnProperty(au,ax)){
var al=(void 0);
var az=au[ax];
if(!(az.property===(void 0))){
al=ag(az.property,az.type,az.values);
}
if(!(al===(void 0))){
ay(az.property,az.type,al);
ao+=aw(ax,al);
continue;
}
if(%HasOwnProperty(aq,ax)){
al=aq[ax];
if(!(al===(void 0))){
ay(az.property,az.type,al);
ao+=aw(ax,al);
}else if(az.type==='boolean'){
ay(az.property,az.type,true);
ao+=aw(ax,true);
}
}
}
}
return ao===''?'':'-u'+ao;
}
function freezeArray(aA){
var aB=aA.length;
for(var ac=0;ac<aB;ac++){
if(ac in aA){
r(aA,ac,{value:aA[ac],
configurable:false,
writable:false,
enumerable:true});
}
}
r(aA,'length',{value:aB,writable:false});
return aA;
}
function getOptimalLanguageTag(aC,am){
if(aC===am){
return aC;
}
var W=%GetLanguageTagVariants([aC,am]);
if(W[0].maximized!==W[1].maximized){
return am;
}
var aD=new k('^'+W[1].base);
return %_CallFunction(am,aD,W[0].base,w);
}
function getAvailableLocalesOf(V){
var aE=%AvailableLocalesOf(V);
for(var ac in aE){
if(%HasOwnProperty(aE,ac)){
var aF=%_CallFunction(ac,/^([a-z]{2,3})-([A-Z][a-z]{3})-([A-Z]{2})$/,
v);
if(aF!==null){
aE[aF[1]+'-'+aF[3]]=null;
}
}
}
return aE;
}
function defineWEProperty(aG,ah,al){
r(aG,ah,
{value:al,writable:true,enumerable:true});
}
function addWEPropertyIfDefined(aG,ah,al){
if(!(al===(void 0))){
defineWEProperty(aG,ah,al);
}
}
function defineWECProperty(aG,ah,al){
r(aG,ah,{value:al,
writable:true,
enumerable:true,
configurable:true});
}
function addWECPropertyIfDefined(aG,ah,al){
if(!(al===(void 0))){
defineWECProperty(aG,ah,al);
}
}
function toTitleCaseWord(aH){
return %StringToUpperCase(%_CallFunction(aH,0,1,y))+
%StringToLowerCase(%_CallFunction(aH,1,y));
}
function canonicalizeLanguageTag(aI){
if(typeof aI!=='string'&&typeof aI!=='object'||
(aI===null)){
throw o(44);
}
var aJ=l(aI);
if(isValidLanguageTag(aJ)===false){
throw n(142,aJ);
}
var aK=%CanonicalizeLanguageTag(aJ);
if(aK==='invalid-tag'){
throw n(142,aJ);
}
return aK;
}
function initializeLocaleList(W){
var aL=[];
if((W===(void 0))){
aL=[];
}else{
if(typeof W==='string'){
%_CallFunction(aL,canonicalizeLanguageTag(W),e);
return freezeArray(aL);
}
var aM=(%_ToObject(W));
var aN=((aM.length)>>>0);
for(var aO=0;aO<aN;aO++){
if(aO in aM){
var al=aM[aO];
var aK=canonicalizeLanguageTag(al);
if(%_CallFunction(aL,aK,c)===-1){
%_CallFunction(aL,aK,e);
}
}
}
}
return freezeArray(aL);
}
function isValidLanguageTag(ad){
if(!%_CallFunction(GetLanguageTagRE(),ad,s)){
return false;
}
if(%_CallFunction(ad,'x-',t)===0){
return true;
}
ad=%_CallFunction(ad,/-x-/,x)[0];
var aP=[];
var aQ=[];
var aF=%_CallFunction(ad,/-/,x);
for(var ac=1;ac<aF.length;ac++){
var al=aF[ac];
if(%_CallFunction(GetLanguageVariantRE(),al,s)&&
aQ.length===0){
if(%_CallFunction(aP,al,c)===-1){
%_CallFunction(aP,al,e);
}else{
return false;
}
}
if(%_CallFunction(GetLanguageSingletonRE(),al,s)){
if(%_CallFunction(aQ,al,c)===-1){
%_CallFunction(aQ,al,e);
}else{
return false;
}
}
}
return true;
}
function BuildLanguageTagREs(){
var aR='[a-zA-Z]';
var aS='[0-9]';
var aT='('+aR+'|'+aS+')';
var aU='(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|'+
'zh-min|zh-min-nan|zh-xiang)';
var aV='(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|'+
'i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|'+
'i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)';
var aW='('+aV+'|'+aU+')';
var aX='(x(-'+aT+'{1,8})+)';
var aY='('+aS+'|[A-WY-Za-wy-z])';
K=new k('^'+aY+'$','i');
var ao='('+aY+'(-'+aT+'{2,8})+)';
var aZ='('+aT+'{5,8}|('+aS+aT+'{3}))';
J=new k('^'+aZ+'$','i');
var ba='('+aR+'{2}|'+aS+'{3})';
var bb='('+aR+'{4})';
var bc='('+aR+'{3}(-'+aR+'{3}){0,2})';
var bd='('+aR+'{2,3}(-'+bc+')?|'+aR+'{4}|'+
aR+'{5,8})';
var be=bd+'(-'+bb+')?(-'+ba+')?(-'+
aZ+')*(-'+ao+')*(-'+aX+')?';
var bf=
'^('+be+'|'+aX+'|'+aW+')$';
I=new k(bf,'i');
}
function initializeCollator(bg,W,X){
if(%IsInitializedIntlObject(bg)){
throw o(100,"Collator");
}
if((X===(void 0))){
X={};
}
var ag=getGetOption(X,'collator');
var bh={};
defineWEProperty(bh,'usage',ag(
'usage','string',['sort','search'],'sort'));
var bi=ag('sensitivity','string',
['base','accent','case','variant']);
if((bi===(void 0))&&bh.usage==='sort'){
bi='variant';
}
defineWEProperty(bh,'sensitivity',bi);
defineWEProperty(bh,'ignorePunctuation',ag(
'ignorePunctuation','boolean',(void 0),false));
var ad=resolveLocale('collator',W,X);
var aq=parseExtension(ad.extension);
var bj={
'kn':{'property':'numeric','type':'boolean'},
'kf':{'property':'caseFirst','type':'string',
'values':['false','lower','upper']}
};
setOptions(
X,aq,bj,ag,bh);
var bk='default';
var ao='';
if(%HasOwnProperty(aq,'co')&&bh.usage==='sort'){
var bl=[
'big5han','dict','direct','ducet','gb2312','phonebk','phonetic',
'pinyin','reformed','searchjl','stroke','trad','unihan','zhuyin'
];
if(%_CallFunction(bl,aq.co,c)!==
-1){
ao='-u-co-'+aq.co;
bk=aq.co;
}
}else if(bh.usage==='search'){
ao='-u-co-search';
}
defineWEProperty(bh,'collation',bk);
var bm=ad.locale+ao;
var am=q({},{
caseFirst:{writable:true},
collation:{value:bh.collation,writable:true},
ignorePunctuation:{writable:true},
locale:{writable:true},
numeric:{writable:true},
requestedLocale:{value:bm,writable:true},
sensitivity:{writable:true},
strength:{writable:true},
usage:{value:bh.usage,writable:true}
});
var bn=%CreateCollator(bm,
bh,
am);
%MarkAsInitializedIntlObjectOfType(bg,'collator',bn);
r(bg,'resolved',{value:am});
return bg;
}
%AddNamedProperty(B,'Collator',function(){
var W=%_Arguments(0);
var X=%_Arguments(1);
if(!this||this===B){
return new B.Collator(W,X);
}
return initializeCollator((%_ToObject(this)),W,X);
},
2
);
%AddNamedProperty(B.Collator.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw o(80);
}
if(!%IsInitializedIntlObjectOfType(this,'collator')){
throw o(101,"Collator");
}
var bo=this;
var ad=getOptimalLanguageTag(bo.resolved.requestedLocale,
bo.resolved.locale);
return{
locale:ad,
usage:bo.resolved.usage,
sensitivity:bo.resolved.sensitivity,
ignorePunctuation:bo.resolved.ignorePunctuation,
numeric:bo.resolved.numeric,
caseFirst:bo.resolved.caseFirst,
collation:bo.resolved.collation
};
},
2
);
%FunctionSetName(B.Collator.prototype.resolvedOptions,'resolvedOptions');
%FunctionRemovePrototype(B.Collator.prototype.resolvedOptions);
%SetNativeFlag(B.Collator.prototype.resolvedOptions);
%AddNamedProperty(B.Collator,'supportedLocalesOf',function(W){
if(%_IsConstructCall()){
throw o(80);
}
return supportedLocalesOf('collator',W,%_Arguments(1));
},
2
);
%FunctionSetName(B.Collator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(B.Collator.supportedLocalesOf);
%SetNativeFlag(B.Collator.supportedLocalesOf);
function compare(bg,T,U){
return %InternalCompare(%GetImplFromInitializedIntlObject(bg),
l(T),l(U));
};
addBoundMethod(B.Collator,'compare',compare,2);
function isWellFormedCurrencyCode(bp){
return typeof bp=="string"&&
bp.length==3&&
%_CallFunction(bp,/[^A-Za-z]/,v)==null;
}
function getNumberOption(X,ah,bq,br,bs){
var al=X[ah];
if(!(al===(void 0))){
al=j(al);
if(g(al)||al<bq||al>br){
throw n(154,ah);
}
return p(al);
}
return bs;
}
function initializeNumberFormat(bt,W,X){
if(%IsInitializedIntlObject(bt)){
throw o(100,"NumberFormat");
}
if((X===(void 0))){
X={};
}
var ag=getGetOption(X,'numberformat');
var ad=resolveLocale('numberformat',W,X);
var bh={};
defineWEProperty(bh,'style',ag(
'style','string',['decimal','percent','currency'],'decimal'));
var bp=ag('currency','string');
if(!(bp===(void 0))&&!isWellFormedCurrencyCode(bp)){
throw n(137,bp);
}
if(bh.style==='currency'&&(bp===(void 0))){
throw o(23);
}
var bu=ag(
'currencyDisplay','string',['code','symbol','name'],'symbol');
if(bh.style==='currency'){
defineWEProperty(bh,'currency',%StringToUpperCase(bp));
defineWEProperty(bh,'currencyDisplay',bu);
}
var bv=getNumberOption(X,'minimumIntegerDigits',1,21,1);
defineWEProperty(bh,'minimumIntegerDigits',bv);
var bw=X['minimumFractionDigits'];
var bx=X['maximumFractionDigits'];
if(!(bw===(void 0))||bh.style!=='currency'){
bw=getNumberOption(X,'minimumFractionDigits',0,20,0);
defineWEProperty(bh,'minimumFractionDigits',bw);
}
if(!(bx===(void 0))||bh.style!=='currency'){
var by=bh.style==='percent'?0:3;
bw=(bw===(void 0))?0:bw;
var bz=(bw>by)?bw:by;
bx=getNumberOption(X,'maximumFractionDigits',bw,20,bz);
defineWEProperty(bh,'maximumFractionDigits',bx);
}
var bA=X['minimumSignificantDigits'];
var bB=X['maximumSignificantDigits'];
if(!(bA===(void 0))||!(bB===(void 0))){
bA=getNumberOption(X,'minimumSignificantDigits',1,21,0);
defineWEProperty(bh,'minimumSignificantDigits',bA);
bB=getNumberOption(X,'maximumSignificantDigits',bA,21,21);
defineWEProperty(bh,'maximumSignificantDigits',bB);
}
defineWEProperty(bh,'useGrouping',ag(
'useGrouping','boolean',(void 0),true));
var aq=parseExtension(ad.extension);
var bC={
'nu':{'property':(void 0),'type':'string'}
};
var ao=setOptions(X,aq,bC,
ag,bh);
var bm=ad.locale+ao;
var am=q({},{
currency:{writable:true},
currencyDisplay:{writable:true},
locale:{writable:true},
maximumFractionDigits:{writable:true},
minimumFractionDigits:{writable:true},
minimumIntegerDigits:{writable:true},
numberingSystem:{writable:true},
requestedLocale:{value:bm,writable:true},
style:{value:bh.style,writable:true},
useGrouping:{writable:true}
});
if(%HasOwnProperty(bh,'minimumSignificantDigits')){
defineWEProperty(am,'minimumSignificantDigits',(void 0));
}
if(%HasOwnProperty(bh,'maximumSignificantDigits')){
defineWEProperty(am,'maximumSignificantDigits',(void 0));
}
var bD=%CreateNumberFormat(bm,
bh,
am);
if(bh.style==='currency'){
r(am,'currencyDisplay',{value:bu,
writable:true});
}
%MarkAsInitializedIntlObjectOfType(bt,'numberformat',bD);
r(bt,'resolved',{value:am});
return bt;
}
%AddNamedProperty(B,'NumberFormat',function(){
var W=%_Arguments(0);
var X=%_Arguments(1);
if(!this||this===B){
return new B.NumberFormat(W,X);
}
return initializeNumberFormat((%_ToObject(this)),W,X);
},
2
);
%AddNamedProperty(B.NumberFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw o(80);
}
if(!%IsInitializedIntlObjectOfType(this,'numberformat')){
throw o(101,"NumberFormat");
}
var bE=this;
var ad=getOptimalLanguageTag(bE.resolved.requestedLocale,
bE.resolved.locale);
var bF={
locale:ad,
numberingSystem:bE.resolved.numberingSystem,
style:bE.resolved.style,
useGrouping:bE.resolved.useGrouping,
minimumIntegerDigits:bE.resolved.minimumIntegerDigits,
minimumFractionDigits:bE.resolved.minimumFractionDigits,
maximumFractionDigits:bE.resolved.maximumFractionDigits,
};
if(bF.style==='currency'){
defineWECProperty(bF,'currency',bE.resolved.currency);
defineWECProperty(bF,'currencyDisplay',
bE.resolved.currencyDisplay);
}
if(%HasOwnProperty(bE.resolved,'minimumSignificantDigits')){
defineWECProperty(bF,'minimumSignificantDigits',
bE.resolved.minimumSignificantDigits);
}
if(%HasOwnProperty(bE.resolved,'maximumSignificantDigits')){
defineWECProperty(bF,'maximumSignificantDigits',
bE.resolved.maximumSignificantDigits);
}
return bF;
},
2
);
%FunctionSetName(B.NumberFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(B.NumberFormat.prototype.resolvedOptions);
%SetNativeFlag(B.NumberFormat.prototype.resolvedOptions);
%AddNamedProperty(B.NumberFormat,'supportedLocalesOf',function(W){
if(%_IsConstructCall()){
throw o(80);
}
return supportedLocalesOf('numberformat',W,%_Arguments(1));
},
2
);
%FunctionSetName(B.NumberFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(B.NumberFormat.supportedLocalesOf);
%SetNativeFlag(B.NumberFormat.supportedLocalesOf);
function formatNumber(bD,al){
var bG=(%_ToNumber(al))+0;
return %InternalNumberFormat(%GetImplFromInitializedIntlObject(bD),
bG);
}
function parseNumber(bD,al){
return %InternalNumberParse(%GetImplFromInitializedIntlObject(bD),
l(al));
}
addBoundMethod(B.NumberFormat,'format',formatNumber,1);
addBoundMethod(B.NumberFormat,'v8Parse',parseNumber,1);
function toLDMLString(X){
var ag=getGetOption(X,'dateformat');
var bH='';
var bI=ag('weekday','string',['narrow','short','long']);
bH+=appendToLDMLString(
bI,{narrow:'EEEEE',short:'EEE',long:'EEEE'});
bI=ag('era','string',['narrow','short','long']);
bH+=appendToLDMLString(
bI,{narrow:'GGGGG',short:'GGG',long:'GGGG'});
bI=ag('year','string',['2-digit','numeric']);
bH+=appendToLDMLString(bI,{'2-digit':'yy','numeric':'y'});
bI=ag('month','string',
['2-digit','numeric','narrow','short','long']);
bH+=appendToLDMLString(bI,{'2-digit':'MM','numeric':'M',
'narrow':'MMMMM','short':'MMM','long':'MMMM'});
bI=ag('day','string',['2-digit','numeric']);
bH+=appendToLDMLString(
bI,{'2-digit':'dd','numeric':'d'});
var bJ=ag('hour12','boolean');
bI=ag('hour','string',['2-digit','numeric']);
if((bJ===(void 0))){
bH+=appendToLDMLString(bI,{'2-digit':'jj','numeric':'j'});
}else if(bJ===true){
bH+=appendToLDMLString(bI,{'2-digit':'hh','numeric':'h'});
}else{
bH+=appendToLDMLString(bI,{'2-digit':'HH','numeric':'H'});
}
bI=ag('minute','string',['2-digit','numeric']);
bH+=appendToLDMLString(bI,{'2-digit':'mm','numeric':'m'});
bI=ag('second','string',['2-digit','numeric']);
bH+=appendToLDMLString(bI,{'2-digit':'ss','numeric':'s'});
bI=ag('timeZoneName','string',['short','long']);
bH+=appendToLDMLString(bI,{short:'z',long:'zzzz'});
return bH;
}
function appendToLDMLString(bI,bK){
if(!(bI===(void 0))){
return bK[bI];
}else{
return'';
}
}
function fromLDMLString(bH){
bH=%_CallFunction(bH,GetQuotedStringRE(),'',
w);
var X={};
var bL=%_CallFunction(bH,/E{3,5}/g,v);
X=appendToDateTimeObject(
X,'weekday',bL,{EEEEE:'narrow',EEE:'short',EEEE:'long'});
bL=%_CallFunction(bH,/G{3,5}/g,v);
X=appendToDateTimeObject(
X,'era',bL,{GGGGG:'narrow',GGG:'short',GGGG:'long'});
bL=%_CallFunction(bH,/y{1,2}/g,v);
X=appendToDateTimeObject(
X,'year',bL,{y:'numeric',yy:'2-digit'});
bL=%_CallFunction(bH,/M{1,5}/g,v);
X=appendToDateTimeObject(X,'month',bL,{MM:'2-digit',
M:'numeric',MMMMM:'narrow',MMM:'short',MMMM:'long'});
bL=%_CallFunction(bH,/L{1,5}/g,v);
X=appendToDateTimeObject(X,'month',bL,{LL:'2-digit',
L:'numeric',LLLLL:'narrow',LLL:'short',LLLL:'long'});
bL=%_CallFunction(bH,/d{1,2}/g,v);
X=appendToDateTimeObject(
X,'day',bL,{d:'numeric',dd:'2-digit'});
bL=%_CallFunction(bH,/h{1,2}/g,v);
if(bL!==null){
X['hour12']=true;
}
X=appendToDateTimeObject(
X,'hour',bL,{h:'numeric',hh:'2-digit'});
bL=%_CallFunction(bH,/H{1,2}/g,v);
if(bL!==null){
X['hour12']=false;
}
X=appendToDateTimeObject(
X,'hour',bL,{H:'numeric',HH:'2-digit'});
bL=%_CallFunction(bH,/m{1,2}/g,v);
X=appendToDateTimeObject(
X,'minute',bL,{m:'numeric',mm:'2-digit'});
bL=%_CallFunction(bH,/s{1,2}/g,v);
X=appendToDateTimeObject(
X,'second',bL,{s:'numeric',ss:'2-digit'});
bL=%_CallFunction(bH,/z|zzzz/g,v);
X=appendToDateTimeObject(
X,'timeZoneName',bL,{z:'short',zzzz:'long'});
return X;
}
function appendToDateTimeObject(X,bI,bL,bK){
if((bL===null)){
if(!%HasOwnProperty(X,bI)){
defineWEProperty(X,bI,(void 0));
}
return X;
}
var ah=bL[0];
defineWEProperty(X,bI,bK[ah]);
return X;
}
function toDateTimeOptions(X,bM,bN){
if((X===(void 0))){
X={};
}else{
X=(%_ToObject(X));
}
var bO=true;
if((bM==='date'||bM==='any')&&
(!(X.weekday===(void 0))||!(X.year===(void 0))||
!(X.month===(void 0))||!(X.day===(void 0)))){
bO=false;
}
if((bM==='time'||bM==='any')&&
(!(X.hour===(void 0))||!(X.minute===(void 0))||
!(X.second===(void 0)))){
bO=false;
}
if(bO&&(bN==='date'||bN==='all')){
r(X,'year',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
r(X,'month',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
r(X,'day',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
if(bO&&(bN==='time'||bN==='all')){
r(X,'hour',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
r(X,'minute',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
r(X,'second',{value:'numeric',
writable:true,
enumerable:true,
configurable:true});
}
return X;
}
function initializeDateTimeFormat(bP,W,X){
if(%IsInitializedIntlObject(bP)){
throw o(100,"DateTimeFormat");
}
if((X===(void 0))){
X={};
}
var ad=resolveLocale('dateformat',W,X);
X=toDateTimeOptions(X,'any','date');
var ag=getGetOption(X,'dateformat');
var Y=ag('formatMatcher','string',
['basic','best fit'],'best fit');
var bH=toLDMLString(X);
var bQ=canonicalizeTimeZoneID(X.timeZone);
var bh={};
var aq=parseExtension(ad.extension);
var bR={
'ca':{'property':(void 0),'type':'string'},
'nu':{'property':(void 0),'type':'string'}
};
var ao=setOptions(X,aq,bR,
ag,bh);
var bm=ad.locale+ao;
var am=q({},{
calendar:{writable:true},
day:{writable:true},
era:{writable:true},
hour12:{writable:true},
hour:{writable:true},
locale:{writable:true},
minute:{writable:true},
month:{writable:true},
numberingSystem:{writable:true},
pattern:{writable:true},
requestedLocale:{value:bm,writable:true},
second:{writable:true},
timeZone:{writable:true},
timeZoneName:{writable:true},
tz:{value:bQ,writable:true},
weekday:{writable:true},
year:{writable:true}
});
var bD=%CreateDateTimeFormat(
bm,{skeleton:bH,timeZone:bQ},am);
if(!(bQ===(void 0))&&bQ!==am.timeZone){
throw n(160,bQ);
}
%MarkAsInitializedIntlObjectOfType(bP,'dateformat',bD);
r(bP,'resolved',{value:am});
return bP;
}
%AddNamedProperty(B,'DateTimeFormat',function(){
var W=%_Arguments(0);
var X=%_Arguments(1);
if(!this||this===B){
return new B.DateTimeFormat(W,X);
}
return initializeDateTimeFormat((%_ToObject(this)),W,X);
},
2
);
%AddNamedProperty(B.DateTimeFormat.prototype,'resolvedOptions',function(){
if(%_IsConstructCall()){
throw o(80);
}
if(!%IsInitializedIntlObjectOfType(this,'dateformat')){
throw o(101,"DateTimeFormat");
}
var bS={
'gregorian':'gregory',
'japanese':'japanese',
'buddhist':'buddhist',
'roc':'roc',
'persian':'persian',
'islamic-civil':'islamicc',
'islamic':'islamic',
'hebrew':'hebrew',
'chinese':'chinese',
'indian':'indian',
'coptic':'coptic',
'ethiopic':'ethiopic',
'ethiopic-amete-alem':'ethioaa'
};
var bE=this;
var bT=fromLDMLString(bE.resolved.pattern);
var bU=bS[bE.resolved.calendar];
if((bU===(void 0))){
bU=bE.resolved.calendar;
}
var ad=getOptimalLanguageTag(bE.resolved.requestedLocale,
bE.resolved.locale);
var bF={
locale:ad,
numberingSystem:bE.resolved.numberingSystem,
calendar:bU,
timeZone:bE.resolved.timeZone
};
addWECPropertyIfDefined(bF,'timeZoneName',bT.timeZoneName);
addWECPropertyIfDefined(bF,'era',bT.era);
addWECPropertyIfDefined(bF,'year',bT.year);
addWECPropertyIfDefined(bF,'month',bT.month);
addWECPropertyIfDefined(bF,'day',bT.day);
addWECPropertyIfDefined(bF,'weekday',bT.weekday);
addWECPropertyIfDefined(bF,'hour12',bT.hour12);
addWECPropertyIfDefined(bF,'hour',bT.hour);
addWECPropertyIfDefined(bF,'minute',bT.minute);
addWECPropertyIfDefined(bF,'second',bT.second);
return bF;
},
2
);
%FunctionSetName(B.DateTimeFormat.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(B.DateTimeFormat.prototype.resolvedOptions);
%SetNativeFlag(B.DateTimeFormat.prototype.resolvedOptions);
%AddNamedProperty(B.DateTimeFormat,'supportedLocalesOf',function(W){
if(%_IsConstructCall()){
throw o(80);
}
return supportedLocalesOf('dateformat',W,%_Arguments(1));
},
2
);
%FunctionSetName(B.DateTimeFormat.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(B.DateTimeFormat.supportedLocalesOf);
%SetNativeFlag(B.DateTimeFormat.supportedLocalesOf);
function formatDate(bD,bV){
var bW;
if((bV===(void 0))){
bW=%DateCurrentTime();
}else{
bW=(%_ToNumber(bV));
}
if(!f(bW))throw n(130);
return %InternalDateFormat(%GetImplFromInitializedIntlObject(bD),
new i(bW));
}
function parseDate(bD,al){
return %InternalDateParse(%GetImplFromInitializedIntlObject(bD),
l(al));
}
addBoundMethod(B.DateTimeFormat,'format',formatDate,0);
addBoundMethod(B.DateTimeFormat,'v8Parse',parseDate,1);
function canonicalizeTimeZoneID(bX){
if((bX===(void 0))){
return bX;
}
var bY=%StringToUpperCase(bX);
if(bY==='UTC'||bY==='GMT'||
bY==='ETC/UTC'||bY==='ETC/GMT'){
return'UTC';
}
var bL=%_CallFunction(bX,GetTimezoneNameCheckRE(),v);
if((bL===null))throw n(131,bX);
var bF=toTitleCaseWord(bL[1])+'/'+toTitleCaseWord(bL[2]);
var ac=3;
while(!(bL[ac]===(void 0))&&ac<bL.length){
bF=bF+'_'+toTitleCaseWord(bL[ac]);
ac++;
}
return bF;
}
function initializeBreakIterator(bZ,W,X){
if(%IsInitializedIntlObject(bZ)){
throw o(100,"v8BreakIterator");
}
if((X===(void 0))){
X={};
}
var ag=getGetOption(X,'breakiterator');
var bh={};
defineWEProperty(bh,'type',ag(
'type','string',['character','word','sentence','line'],'word'));
var ad=resolveLocale('breakiterator',W,X);
var am=q({},{
requestedLocale:{value:ad.locale,writable:true},
type:{value:bh.type,writable:true},
locale:{writable:true}
});
var ca=%CreateBreakIterator(ad.locale,
bh,
am);
%MarkAsInitializedIntlObjectOfType(bZ,'breakiterator',
ca);
r(bZ,'resolved',{value:am});
return bZ;
}
%AddNamedProperty(B,'v8BreakIterator',function(){
var W=%_Arguments(0);
var X=%_Arguments(1);
if(!this||this===B){
return new B.v8BreakIterator(W,X);
}
return initializeBreakIterator((%_ToObject(this)),W,X);
},
2
);
%AddNamedProperty(B.v8BreakIterator.prototype,'resolvedOptions',
function(){
if(%_IsConstructCall()){
throw o(80);
}
if(!%IsInitializedIntlObjectOfType(this,'breakiterator')){
throw o(101,"v8BreakIterator");
}
var cb=this;
var ad=getOptimalLanguageTag(cb.resolved.requestedLocale,
cb.resolved.locale);
return{
locale:ad,
type:cb.resolved.type
};
},
2
);
%FunctionSetName(B.v8BreakIterator.prototype.resolvedOptions,
'resolvedOptions');
%FunctionRemovePrototype(B.v8BreakIterator.prototype.resolvedOptions);
%SetNativeFlag(B.v8BreakIterator.prototype.resolvedOptions);
%AddNamedProperty(B.v8BreakIterator,'supportedLocalesOf',
function(W){
if(%_IsConstructCall()){
throw o(80);
}
return supportedLocalesOf('breakiterator',W,%_Arguments(1));
},
2
);
%FunctionSetName(B.v8BreakIterator.supportedLocalesOf,'supportedLocalesOf');
%FunctionRemovePrototype(B.v8BreakIterator.supportedLocalesOf);
%SetNativeFlag(B.v8BreakIterator.supportedLocalesOf);
function adoptText(bZ,cc){
%BreakIteratorAdoptText(%GetImplFromInitializedIntlObject(bZ),
l(cc));
}
function first(bZ){
return %BreakIteratorFirst(%GetImplFromInitializedIntlObject(bZ));
}
function next(bZ){
return %BreakIteratorNext(%GetImplFromInitializedIntlObject(bZ));
}
function current(bZ){
return %BreakIteratorCurrent(%GetImplFromInitializedIntlObject(bZ));
}
function breakType(bZ){
return %BreakIteratorBreakType(%GetImplFromInitializedIntlObject(bZ));
}
addBoundMethod(B.v8BreakIterator,'adoptText',adoptText,1);
addBoundMethod(B.v8BreakIterator,'first',first,0);
addBoundMethod(B.v8BreakIterator,'next',next,0);
addBoundMethod(B.v8BreakIterator,'current',current,0);
addBoundMethod(B.v8BreakIterator,'breakType',breakType,0);
var cd={
'collator':B.Collator,
'numberformat':B.NumberFormat,
'dateformatall':B.DateTimeFormat,
'dateformatdate':B.DateTimeFormat,
'dateformattime':B.DateTimeFormat
};
var ce={
'collator':(void 0),
'numberformat':(void 0),
'dateformatall':(void 0),
'dateformatdate':(void 0),
'dateformattime':(void 0),
};
function cachedOrNewService(V,W,X,bN){
var cf=((bN===(void 0)))?X:bN;
if((W===(void 0))&&(X===(void 0))){
if((ce[V]===(void 0))){
ce[V]=new cd[V](W,cf);
}
return ce[V];
}
return new cd[V](W,cf);
}
function OverrideFunction(aG,cg,ch){
%CheckIsBootstrapping();
r(aG,cg,{value:ch,
writeable:true,
configurable:true,
enumerable:false});
%FunctionSetName(ch,cg);
%FunctionRemovePrototype(ch);
%SetNativeFlag(ch);
}
OverrideFunction(l.prototype,'localeCompare',function(R){
if(%_IsConstructCall()){
throw o(80);
}
if((this==null)){
throw o(46);
}
var W=%_Arguments(1);
var X=%_Arguments(2);
var bg=cachedOrNewService('collator',W,X);
return compare(bg,this,R);
}
);
OverrideFunction(l.prototype,'normalize',function(){
if(%_IsConstructCall()){
throw o(80);
}
if((%IS_VAR(this)===null)||(this===(void 0)))throw o(15,"String.prototype.normalize");
var ci=(%_ToString(this));
var cj=%_Arguments(0);
var ck=(cj===(void 0))?'NFC':(%_ToString(cj));
var cl=['NFC','NFD','NFKC','NFKD'];
var cm=
%_CallFunction(cl,ck,c);
if(cm===-1){
throw n(152,
%_CallFunction(cl,', ',d));
}
return %StringNormalize(ci,cm);
}
);
OverrideFunction(j.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw o(80);
}
if(!(this instanceof j)&&typeof(this)!=='number'){
throw o(47,"Number");
}
var W=%_Arguments(0);
var X=%_Arguments(1);
var bt=cachedOrNewService('numberformat',W,X);
return formatNumber(bt,this);
}
);
function toLocaleDateTime(cn,W,X,bM,bN,V){
if(!(cn instanceof i)){
throw o(47,"Date");
}
if(g(cn))return'Invalid Date';
var bh=toDateTimeOptions(X,bM,bN);
var bP=
cachedOrNewService(V,W,X,bh);
return formatDate(bP,cn);
}
OverrideFunction(i.prototype,'toLocaleString',function(){
if(%_IsConstructCall()){
throw o(80);
}
var W=%_Arguments(0);
var X=%_Arguments(1);
return toLocaleDateTime(
this,W,X,'any','all','dateformatall');
}
);
OverrideFunction(i.prototype,'toLocaleDateString',function(){
if(%_IsConstructCall()){
throw o(80);
}
var W=%_Arguments(0);
var X=%_Arguments(1);
return toLocaleDateTime(
this,W,X,'date','date','dateformatdate');
}
);
OverrideFunction(i.prototype,'toLocaleTimeString',function(){
if(%_IsConstructCall()){
throw o(80);
}
var W=%_Arguments(0);
var X=%_Arguments(1);
return toLocaleDateTime(
this,W,X,'time','time','dateformattime');
}
);
})

 (code-stubsi
(function(a,b){
"use strict";
b.StringLengthTFStub=function StringLengthTFStub(c,d){
var e=function(f,g,h,i){
return %_StringGetLength(%_JSValueGetValue(f));
}
return e;
}
b.StringAddTFStub=function StringAddTFStub(c,d){
var e=function(j,k){
return %StringAdd(j,k);
}
return e;
}
const kTurboFanICCallModeMask=1;
const kTurboFanICCallForUnptimizedCode=0;
const kTurboFanICCallForOptimizedCode=1;
b.MathFloorStub=function MathFloorStub(c,d){
var l=function(m,h,n,f,i){
"use strict";
if(m!==%_FixedArrayGet(n,h|0)){
return %_CallFunction(f,i,m);
}
var o=%_MathFloor(+i);
if(%_IsMinusZero(o)){
%_FixedArraySet(n,((h|0)+1)|0,1);
return-0;
}
var p=o|0;
if(p===o){
return p;
}
return o;
}
var q=(d&kTurboFanICCallModeMask);
if(q==kTurboFanICCallForOptimizedCode){
return l;
}else{
%SetForceInlineFlag(l);
var r=function(m,h,f,i){
var n=%_GetTypeFeedbackVector(%_GetCallerJSFunction());
return l(m,h,n,f,i);
}
return r;
}
}
})

 $proxyÍ2
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Function;
var d=a.Object;
var e;
var f;
b.Import(function(g){
e=g.MakeTypeError;
f=g.ToNameArray;
});
function ProxyCreate(h,i){
if(!(%_IsSpecObject(h)))
throw e(87,"create")
if((i===(void 0)))
i=null
else if(!((%_IsSpecObject(i))||(i===null)))
throw e(92)
return %CreateJSProxy(h,i)
}
function ProxyCreateFunction(h,j,k){
if(!(%_IsSpecObject(h)))
throw e(87,"createFunction")
if(!(typeof(j)==='function'))
throw e(95,"call")
if((k===(void 0))){
k=DerivedConstructTrap(j)
}else if((typeof(k)==='function')){
var l=k
k=function(){
return %Apply(l,(void 0),arguments,0,%_ArgumentsLength());
}
}else{
throw e(95,"construct")
}
return %CreateJSFunctionProxy(
h,j,k,c.prototype)
}
function DerivedConstructTrap(j){
return function(){
var i=this.prototype
if(!(%_IsSpecObject(i)))i=d.prototype
var m={__proto__:i};
var n=%Apply(j,m,arguments,0,%_ArgumentsLength());
return(%_IsSpecObject(n))?n:m
}
}
function DelegateCallAndConstruct(j,k){
return function(){
return %Apply(%_IsConstructCall()?k:j,
this,arguments,0,%_ArgumentsLength())
}
}
function DerivedGetTrap(o,p){
var q=this.getPropertyDescriptor(p)
if((q===(void 0))){return q}
if('value'in q){
return q.value
}else{
if((q.get===(void 0))){return q.get}
return %_CallFunction(o,q.get)
}
}
function DerivedSetTrap(o,p,r){
var q=this.getOwnPropertyDescriptor(p)
if(q){
if('writable'in q){
if(q.writable){
q.value=r
this.defineProperty(p,q)
return true
}else{
return false
}
}else{
if(q.set){
%_CallFunction(o,r,q.set)
return true
}else{
return false
}
}
}
q=this.getPropertyDescriptor(p)
if(q){
if('writable'in q){
if(q.writable){
}else{
return false
}
}else{
if(q.set){
%_CallFunction(o,r,q.set)
return true
}else{
return false
}
}
}
this.defineProperty(p,{
value:r,
writable:true,
enumerable:true,
configurable:true});
return true;
}
function DerivedHasTrap(p){
return!!this.getPropertyDescriptor(p)
}
function DerivedHasOwnTrap(p){
return!!this.getOwnPropertyDescriptor(p)
}
function DerivedKeysTrap(){
var s=this.getOwnPropertyNames()
var t=[]
for(var u=0,count=0;u<s.length;++u){
var p=s[u]
if((typeof(p)==='symbol'))continue
var q=this.getOwnPropertyDescriptor((%_ToString(p)))
if(!(q===(void 0))&&q.enumerable){
t[count++]=s[u]
}
}
return t
}
function DerivedEnumerateTrap(){
var s=this.getPropertyNames()
var t=[]
for(var u=0,count=0;u<s.length;++u){
var p=s[u]
if((typeof(p)==='symbol'))continue
var q=this.getPropertyDescriptor((%_ToString(p)))
if(!(q===(void 0))){
if(!q.configurable){
throw e(93,
this,p,"getPropertyDescriptor")
}
if(q.enumerable)t[count++]=s[u]
}
}
return t
}
function ProxyEnumerate(v){
var h=%GetHandler(v)
if((h.enumerate===(void 0))){
return %Apply(DerivedEnumerateTrap,h,[],0,0)
}else{
return f(h.enumerate(),"enumerate",false)
}
}
var w=new d();
%AddNamedProperty(a,"Proxy",w,2);
b.InstallFunctions(w,2,[
"create",ProxyCreate,
"createFunction",ProxyCreateFunction
])
b.Export(function(x){
x.ProxyDelegateCallAndConstruct=DelegateCallAndConstruct;
x.ProxyDerivedHasOwnTrap=DerivedHasOwnTrap;
x.ProxyDerivedKeysTrap=DerivedKeysTrap;
});
%InstallToContext([
"derived_get_trap",DerivedGetTrap,
"derived_has_trap",DerivedHasTrap,
"derived_set_trap",DerivedSetTrap,
"proxy_enumerate",ProxyEnumerate,
]);
})

$generator]
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=b.ImportNow("GeneratorFunctionPrototype");
var d=b.ImportNow("GeneratorFunction");
var e=a.Function;
var f;
var g;
var h=b.ImportNow("to_string_tag_symbol");
b.Import(function(i){
f=i.MakeTypeError;
g=i.NewFunctionString;
});
function GeneratorObjectNext(j){
if(!(%_ClassOf(this)==='Generator')){
throw f(37,
'[Generator].prototype.next',this);
}
var k=%GeneratorGetContinuation(this);
if(k>0){
if(%_DebugIsActive()!=0)%DebugPrepareStepInIfStepping(this);
try{
return %_GeneratorNext(this,j);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(k==0){
return{value:void 0,done:true};
}else{
throw f(35);
}
}
function GeneratorObjectThrow(l){
if(!(%_ClassOf(this)==='Generator')){
throw f(37,
'[Generator].prototype.throw',this);
}
var k=%GeneratorGetContinuation(this);
if(k>0){
try{
return %_GeneratorThrow(this,l);
}catch(e){
%GeneratorClose(this);
throw e;
}
}else if(k==0){
throw l;
}else{
throw f(35);
}
}
function GeneratorFunctionConstructor(m){
var n=g(arguments,'function*');
var o=%GlobalProxy(GeneratorFunctionConstructor);
var p=%_CallFunction(o,%CompileString(n,true));
return %CompleteFunctionConstruction(p,d,new.target);
}
%NeverOptimizeFunction(GeneratorObjectNext);
%NeverOptimizeFunction(GeneratorObjectThrow);
var q=c.prototype;
b.InstallFunctions(q,
2,
["next",GeneratorObjectNext,
"throw",GeneratorObjectThrow]);
%AddNamedProperty(q,"constructor",
c,2|1);
%AddNamedProperty(q,
h,"Generator",2|1);
%InternalSetPrototype(c,e.prototype);
%AddNamedProperty(c,
h,"GeneratorFunction",2|1);
%AddNamedProperty(c,"constructor",
d,2|1);
%InternalSetPrototype(d,e);
%SetCode(d,GeneratorFunctionConstructor);
})

<harmony-atomics9:
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.Object;
var d;
var e;
var f=b.ImportNow("to_string_tag_symbol");
b.Import(function(g){
d=g.MakeTypeError;
e=g.MaxSimple;
});
function CheckSharedIntegerTypedArray(h){
if(!%IsSharedIntegerTypedArray(h)){
throw d(63,h);
}
}
function CheckSharedInteger32TypedArray(h){
CheckSharedIntegerTypedArray(h);
if(%_ClassOf(h)!=='Int32Array'){
throw d(64,h);
}
}
function AtomicsCompareExchangeJS(i,j,k,l){
CheckSharedIntegerTypedArray(i);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(i)){
return(void 0);
}
k=(%_ToNumber(k));
l=(%_ToNumber(l));
return %_AtomicsCompareExchange(i,j,k,l);
}
function AtomicsLoadJS(i,j){
CheckSharedIntegerTypedArray(i);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(i)){
return(void 0);
}
return %_AtomicsLoad(i,j);
}
function AtomicsStoreJS(i,j,m){
CheckSharedIntegerTypedArray(i);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(i)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsStore(i,j,m);
}
function AtomicsAddJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsAdd(h,j,m);
}
function AtomicsSubJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsSub(h,j,m);
}
function AtomicsAndJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsAnd(h,j,m);
}
function AtomicsOrJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsOr(h,j,m);
}
function AtomicsXorJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsXor(h,j,m);
}
function AtomicsExchangeJS(h,j,m){
CheckSharedIntegerTypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
m=(%_ToNumber(m));
return %_AtomicsExchange(h,j,m);
}
function AtomicsIsLockFreeJS(n){
return %_AtomicsIsLockFree(n);
}
function AtomicsFutexWaitJS(h,j,m,o){
CheckSharedInteger32TypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
if((o===(void 0))){
o=(1/0);
}else{
o=(%_ToNumber(o));
if((!%_IsSmi(%IS_VAR(o))&&!(o==o))){
o=(1/0);
}else{
o=e(0,o);
}
}
return %AtomicsFutexWait(h,j,m,o);
}
function AtomicsFutexWakeJS(h,j,p){
CheckSharedInteger32TypedArray(h);
j=(%_ToInteger(j));
if(j<0||j>=%_TypedArrayGetLength(h)){
return(void 0);
}
p=e(0,(%_ToInteger(p)));
return %AtomicsFutexWake(h,j,p);
}
function AtomicsFutexWakeOrRequeueJS(h,q,p,m,r){
CheckSharedInteger32TypedArray(h);
q=(%_ToInteger(q));
p=e(0,(%_ToInteger(p)));
m=((m)|0);
r=(%_ToInteger(r));
if(q<0||q>=%_TypedArrayGetLength(h)||
r<0||r>=%_TypedArrayGetLength(h)){
return(void 0);
}
return %AtomicsFutexWakeOrRequeue(h,q,p,m,r);
}
function AtomicsConstructor(){}
var s=new AtomicsConstructor();
%InternalSetPrototype(s,c.prototype);
%AddNamedProperty(a,"Atomics",s,2);
%FunctionSetInstanceClassName(AtomicsConstructor,'Atomics');
%AddNamedProperty(s,f,"Atomics",1|2);
b.InstallConstants(s,[
"OK",0,
"NOTEQUAL",-1,
"TIMEDOUT",-2,
]);
b.InstallFunctions(s,2,[
"compareExchange",AtomicsCompareExchangeJS,
"load",AtomicsLoadJS,
"store",AtomicsStoreJS,
"add",AtomicsAddJS,
"sub",AtomicsSubJS,
"and",AtomicsAndJS,
"or",AtomicsOrJS,
"xor",AtomicsXorJS,
"exchange",AtomicsExchangeJS,
"isLockFree",AtomicsIsLockFreeJS,
"futexWait",AtomicsFutexWaitJS,
"futexWake",AtomicsFutexWakeJS,
"futexWakeOrRequeue",AtomicsFutexWakeOrRequeueJS,
]);
})

Xharmony-array-includes™
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Array;
var d;
var e;
b.Import(function(f){
d=f.MakeTypeError;
e=f.SameValueZero;
});
function InnerArrayIncludes(g,h,i,j){
if(j===0){
return false;
}
var k=(%_ToInteger(h));
var l;
if(k>=0){
l=k;
}else{
l=j+k;
if(l<0){
l=0;
}
}
while(l<j){
var m=i[l];
if(e(g,m)){
return true;
}
++l;
}
return false;
}
function ArrayIncludes(g,h){
if((%IS_VAR(this)===null)||(this===(void 0)))throw d(15,"Array.prototype.includes");
var i=(%_ToObject(this));
var j=(%_ToLength(i.length));
return InnerArrayIncludes(g,h,i,j);
}
function TypedArrayIncludes(g,h){
if(!%_IsTypedArray(this))throw d(61);
var j=%_TypedArrayGetLength(this);
return InnerArrayIncludes(g,h,this,j);
}
%FunctionSetLength(ArrayIncludes,1);
%FunctionSetLength(TypedArrayIncludes,1);
b.InstallFunctions(c.prototype,2,[
"includes",ArrayIncludes
]);
var n=a.Uint8Array;

var o=a.Int8Array;

var p=a.Uint16Array;

var q=a.Int16Array;

var r=a.Uint32Array;

var s=a.Int32Array;

var t=a.Float32Array;

var u=a.Float64Array;

var v=a.Uint8ClampedArray;


b.InstallFunctions(n.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(o.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(p.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(q.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(r.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(s.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(t.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(u.prototype,2,[
"includes",TypedArrayIncludes
]);

b.InstallFunctions(v.prototype,2,[
"includes",TypedArrayIncludes
]);


})

8harmony-regexpe
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.RegExp;
var d;
b.Import(function(e){
d=e.MakeTypeError;
});
function RegExpGetFlags(){
if(!(%_IsSpecObject(this))){
throw d(33,(%_ToString(this)));
}
var f='';
if(this.global)f+='g';
if(this.ignoreCase)f+='i';
if(this.multiline)f+='m';
if(this.unicode)f+='u';
if(this.sticky)f+='y';
return f;
}
%DefineAccessorPropertyUnchecked(c.prototype,'flags',
RegExpGetFlags,null,2);
%SetNativeFlag(RegExpGetFlags);
})

<harmony-reflect¥
(function(a,b){
'use strict';
%CheckIsBootstrapping();
var c=a.Reflect;
var d;
var e=b.ImportNow("reflect_apply");
var f=b.ImportNow("reflect_construct");
b.Import(function(g){
d=g.MakeTypeError;
});
function ReflectEnumerate(h){
if(!(%_IsSpecObject(h)))
throw d(14,"Reflect.enumerate")
return(function*(){for(var i in h)yield i})();
}
b.InstallFunctions(c,2,[
"apply",e,
"construct",f,
"enumerate",ReflectEnumerate
]);
})

Xharmony-object-observeU
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=b.ImportNow("ObserveArrayMethods");
var d=b.ImportNow("ObserveObjectMethods");;
b.InstallFunctions(a.Object,2,d);
b.InstallFunctions(a.Array,2,c);
})

dharmony-sharedarraybuffer=
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SharedArrayBuffer;
var d=a.Object;
var e;
var f;
var g=b.ImportNow("to_string_tag_symbol");
b.Import(function(h){
e=h.MakeTypeError;
f=h.ToPositiveInteger;
})
function SharedArrayBufferConstructor(i){
if(%_IsConstructCall()){
var j=f(i,132);
%ArrayBufferInitialize(this,j,true);
}else{
throw e(22,"SharedArrayBuffer");
}
}
function SharedArrayBufferGetByteLen(){
if(!(%_ClassOf(this)==='SharedArrayBuffer')){
throw e(37,
'SharedArrayBuffer.prototype.byteLength',this);
}
return %_ArrayBufferGetByteLength(this);
}
function SharedArrayBufferIsViewJS(k){
return %ArrayBufferIsView(k);
}
%SetCode(c,SharedArrayBufferConstructor);
%FunctionSetPrototype(c,new d());
%AddNamedProperty(c.prototype,"constructor",
c,2);
%AddNamedProperty(c.prototype,
g,"SharedArrayBuffer",2|1);
b.InstallGetter(c.prototype,"byteLength",
SharedArrayBufferGetByteLen);
b.InstallFunctions(c,2,[
"isView",SharedArrayBufferIsViewJS
]);
})

0harmony-simd&¿
(function(a,b){
"use strict";
%CheckIsBootstrapping();
var c=a.SIMD;
var d;
var e=b.ImportNow("to_string_tag_symbol");
b.Import(function(f){
d=f.MakeTypeError;
});
var g=c.Float32x4;


var h=c.Int32x4;

var i=c.Int16x8;

var j=c.Int8x16;


var k=c.Uint32x4;

var l=c.Uint16x8;

var m=c.Uint8x16;


var n=c.Bool32x4;

var o=c.Bool16x8;

var p=c.Bool8x16;



function Float32x4CheckJS(q){
return %Float32x4Check(q);
}
function Float32x4ToString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw d(37,
"Float32x4.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Float32x4(";
s+=%Float32x4ExtractLane(r,0);
for(var t=1;t<4;t++){
s+=", "+%Float32x4ExtractLane(r,t);
}
return s+")";
}
function Float32x4ToLocaleString(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw d(37,
"Float32x4.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Float32x4(";
s+=%Float32x4ExtractLane(r,0).toLocaleString();
for(var t=1;t<4;t++){
s+=", "+%Float32x4ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Float32x4ValueOf(){
if(typeof(this)!=='float32x4'&&%_ClassOf(this)!=='Float32x4'){
throw d(37,
"Float32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Float32x4ExtractLaneJS(u,v){
return %Float32x4ExtractLane(u,v);
}


function Int32x4CheckJS(q){
return %Int32x4Check(q);
}
function Int32x4ToString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw d(37,
"Int32x4.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int32x4(";
s+=%Int32x4ExtractLane(r,0);
for(var t=1;t<4;t++){
s+=", "+%Int32x4ExtractLane(r,t);
}
return s+")";
}
function Int32x4ToLocaleString(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw d(37,
"Int32x4.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int32x4(";
s+=%Int32x4ExtractLane(r,0).toLocaleString();
for(var t=1;t<4;t++){
s+=", "+%Int32x4ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Int32x4ValueOf(){
if(typeof(this)!=='int32x4'&&%_ClassOf(this)!=='Int32x4'){
throw d(37,
"Int32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int32x4ExtractLaneJS(u,v){
return %Int32x4ExtractLane(u,v);
}

function Int16x8CheckJS(q){
return %Int16x8Check(q);
}
function Int16x8ToString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw d(37,
"Int16x8.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int16x8(";
s+=%Int16x8ExtractLane(r,0);
for(var t=1;t<8;t++){
s+=", "+%Int16x8ExtractLane(r,t);
}
return s+")";
}
function Int16x8ToLocaleString(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw d(37,
"Int16x8.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int16x8(";
s+=%Int16x8ExtractLane(r,0).toLocaleString();
for(var t=1;t<8;t++){
s+=", "+%Int16x8ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Int16x8ValueOf(){
if(typeof(this)!=='int16x8'&&%_ClassOf(this)!=='Int16x8'){
throw d(37,
"Int16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int16x8ExtractLaneJS(u,v){
return %Int16x8ExtractLane(u,v);
}

function Int8x16CheckJS(q){
return %Int8x16Check(q);
}
function Int8x16ToString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw d(37,
"Int8x16.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int8x16(";
s+=%Int8x16ExtractLane(r,0);
for(var t=1;t<16;t++){
s+=", "+%Int8x16ExtractLane(r,t);
}
return s+")";
}
function Int8x16ToLocaleString(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw d(37,
"Int8x16.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Int8x16(";
s+=%Int8x16ExtractLane(r,0).toLocaleString();
for(var t=1;t<16;t++){
s+=", "+%Int8x16ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Int8x16ValueOf(){
if(typeof(this)!=='int8x16'&&%_ClassOf(this)!=='Int8x16'){
throw d(37,
"Int8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Int8x16ExtractLaneJS(u,v){
return %Int8x16ExtractLane(u,v);
}


function Uint32x4CheckJS(q){
return %Uint32x4Check(q);
}
function Uint32x4ToString(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw d(37,
"Uint32x4.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint32x4(";
s+=%Uint32x4ExtractLane(r,0);
for(var t=1;t<4;t++){
s+=", "+%Uint32x4ExtractLane(r,t);
}
return s+")";
}
function Uint32x4ToLocaleString(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw d(37,
"Uint32x4.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint32x4(";
s+=%Uint32x4ExtractLane(r,0).toLocaleString();
for(var t=1;t<4;t++){
s+=", "+%Uint32x4ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Uint32x4ValueOf(){
if(typeof(this)!=='uint32x4'&&%_ClassOf(this)!=='Uint32x4'){
throw d(37,
"Uint32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint32x4ExtractLaneJS(u,v){
return %Uint32x4ExtractLane(u,v);
}

function Uint16x8CheckJS(q){
return %Uint16x8Check(q);
}
function Uint16x8ToString(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw d(37,
"Uint16x8.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint16x8(";
s+=%Uint16x8ExtractLane(r,0);
for(var t=1;t<8;t++){
s+=", "+%Uint16x8ExtractLane(r,t);
}
return s+")";
}
function Uint16x8ToLocaleString(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw d(37,
"Uint16x8.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint16x8(";
s+=%Uint16x8ExtractLane(r,0).toLocaleString();
for(var t=1;t<8;t++){
s+=", "+%Uint16x8ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Uint16x8ValueOf(){
if(typeof(this)!=='uint16x8'&&%_ClassOf(this)!=='Uint16x8'){
throw d(37,
"Uint16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint16x8ExtractLaneJS(u,v){
return %Uint16x8ExtractLane(u,v);
}

function Uint8x16CheckJS(q){
return %Uint8x16Check(q);
}
function Uint8x16ToString(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw d(37,
"Uint8x16.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint8x16(";
s+=%Uint8x16ExtractLane(r,0);
for(var t=1;t<16;t++){
s+=", "+%Uint8x16ExtractLane(r,t);
}
return s+")";
}
function Uint8x16ToLocaleString(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw d(37,
"Uint8x16.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Uint8x16(";
s+=%Uint8x16ExtractLane(r,0).toLocaleString();
for(var t=1;t<16;t++){
s+=", "+%Uint8x16ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Uint8x16ValueOf(){
if(typeof(this)!=='uint8x16'&&%_ClassOf(this)!=='Uint8x16'){
throw d(37,
"Uint8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Uint8x16ExtractLaneJS(u,v){
return %Uint8x16ExtractLane(u,v);
}


function Bool32x4CheckJS(q){
return %Bool32x4Check(q);
}
function Bool32x4ToString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw d(37,
"Bool32x4.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool32x4(";
s+=%Bool32x4ExtractLane(r,0);
for(var t=1;t<4;t++){
s+=", "+%Bool32x4ExtractLane(r,t);
}
return s+")";
}
function Bool32x4ToLocaleString(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw d(37,
"Bool32x4.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool32x4(";
s+=%Bool32x4ExtractLane(r,0).toLocaleString();
for(var t=1;t<4;t++){
s+=", "+%Bool32x4ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Bool32x4ValueOf(){
if(typeof(this)!=='bool32x4'&&%_ClassOf(this)!=='Bool32x4'){
throw d(37,
"Bool32x4.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool32x4ExtractLaneJS(u,v){
return %Bool32x4ExtractLane(u,v);
}

function Bool16x8CheckJS(q){
return %Bool16x8Check(q);
}
function Bool16x8ToString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw d(37,
"Bool16x8.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool16x8(";
s+=%Bool16x8ExtractLane(r,0);
for(var t=1;t<8;t++){
s+=", "+%Bool16x8ExtractLane(r,t);
}
return s+")";
}
function Bool16x8ToLocaleString(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw d(37,
"Bool16x8.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool16x8(";
s+=%Bool16x8ExtractLane(r,0).toLocaleString();
for(var t=1;t<8;t++){
s+=", "+%Bool16x8ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Bool16x8ValueOf(){
if(typeof(this)!=='bool16x8'&&%_ClassOf(this)!=='Bool16x8'){
throw d(37,
"Bool16x8.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool16x8ExtractLaneJS(u,v){
return %Bool16x8ExtractLane(u,v);
}

function Bool8x16CheckJS(q){
return %Bool8x16Check(q);
}
function Bool8x16ToString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw d(37,
"Bool8x16.prototype.toString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool8x16(";
s+=%Bool8x16ExtractLane(r,0);
for(var t=1;t<16;t++){
s+=", "+%Bool8x16ExtractLane(r,t);
}
return s+")";
}
function Bool8x16ToLocaleString(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw d(37,
"Bool8x16.prototype.toLocaleString",this);
}
var r=%_ValueOf(this);
var s="SIMD.Bool8x16(";
s+=%Bool8x16ExtractLane(r,0).toLocaleString();
for(var t=1;t<16;t++){
s+=", "+%Bool8x16ExtractLane(r,t).toLocaleString();
}
return s+")";
}
function Bool8x16ValueOf(){
if(typeof(this)!=='bool8x16'&&%_ClassOf(this)!=='Bool8x16'){
throw d(37,
"Bool8x16.prototype.valueOf",this);
}
return %_ValueOf(this);
}
function Bool8x16ExtractLaneJS(u,v){
return %Bool8x16ExtractLane(u,v);
}



function Int32x4ShiftLeftByScalarJS(u,w){
return %Int32x4ShiftLeftByScalar(u,w);
}
function Int32x4ShiftRightByScalarJS(u,w){
return %Int32x4ShiftRightByScalar(u,w);
}

function Int16x8ShiftLeftByScalarJS(u,w){
return %Int16x8ShiftLeftByScalar(u,w);
}
function Int16x8ShiftRightByScalarJS(u,w){
return %Int16x8ShiftRightByScalar(u,w);
}

function Int8x16ShiftLeftByScalarJS(u,w){
return %Int8x16ShiftLeftByScalar(u,w);
}
function Int8x16ShiftRightByScalarJS(u,w){
return %Int8x16ShiftRightByScalar(u,w);
}


function Uint32x4ShiftLeftByScalarJS(u,w){
return %Uint32x4ShiftLeftByScalar(u,w);
}
function Uint32x4ShiftRightByScalarJS(u,w){
return %Uint32x4ShiftRightByScalar(u,w);
}

function Uint16x8ShiftLeftByScalarJS(u,w){
return %Uint16x8ShiftLeftByScalar(u,w);
}
function Uint16x8ShiftRightByScalarJS(u,w){
return %Uint16x8ShiftRightByScalar(u,w);
}

function Uint8x16ShiftLeftByScalarJS(u,w){
return %Uint8x16ShiftLeftByScalar(u,w);
}
function Uint8x16ShiftRightByScalarJS(u,w){
return %Uint8x16ShiftRightByScalar(u,w);
}


function Int16x8AddSaturateJS(q,x){
return %Int16x8AddSaturate(q,x);
}
function Int16x8SubSaturateJS(q,x){
return %Int16x8SubSaturate(q,x);
}

function Int8x16AddSaturateJS(q,x){
return %Int8x16AddSaturate(q,x);
}
function Int8x16SubSaturateJS(q,x){
return %Int8x16SubSaturate(q,x);
}

function Uint8x16AddSaturateJS(q,x){
return %Uint8x16AddSaturate(q,x);
}
function Uint8x16SubSaturateJS(q,x){
return %Uint8x16SubSaturate(q,x);
}

function Uint16x8AddSaturateJS(q,x){
return %Uint16x8AddSaturate(q,x);
}
function Uint16x8SubSaturateJS(q,x){
return %Uint16x8SubSaturate(q,x);
}


function Float32x4NegJS(q){
return %Float32x4Neg(q);
}


function Int32x4NegJS(q){
return %Int32x4Neg(q);
}

function Int16x8NegJS(q){
return %Int16x8Neg(q);
}

function Int8x16NegJS(q){
return %Int8x16Neg(q);
}


function Bool32x4ReplaceLaneJS(u,v,r){
return %Bool32x4ReplaceLane(u,v,r);
}
function Bool32x4AnyTrueJS(y){
return %Bool32x4AnyTrue(y);
}
function Bool32x4AllTrueJS(y){
return %Bool32x4AllTrue(y);
}

function Bool16x8ReplaceLaneJS(u,v,r){
return %Bool16x8ReplaceLane(u,v,r);
}
function Bool16x8AnyTrueJS(y){
return %Bool16x8AnyTrue(y);
}
function Bool16x8AllTrueJS(y){
return %Bool16x8AllTrue(y);
}

function Bool8x16ReplaceLaneJS(u,v,r){
return %Bool8x16ReplaceLane(u,v,r);
}
function Bool8x16AnyTrueJS(y){
return %Bool8x16AnyTrue(y);
}
function Bool8x16AllTrueJS(y){
return %Bool8x16AllTrue(y);
}


function Float32x4ReplaceLaneJS(u,v,r){
return %Float32x4ReplaceLane(u,v,(%_ToNumber(r)));
}
function Float32x4SelectJS(z,q,x){
return %Float32x4Select(z,q,x);
}
function Float32x4AddJS(q,x){
return %Float32x4Add(q,x);
}
function Float32x4SubJS(q,x){
return %Float32x4Sub(q,x);
}
function Float32x4MulJS(q,x){
return %Float32x4Mul(q,x);
}
function Float32x4MinJS(q,x){
return %Float32x4Min(q,x);
}
function Float32x4MaxJS(q,x){
return %Float32x4Max(q,x);
}
function Float32x4EqualJS(q,x){
return %Float32x4Equal(q,x);
}
function Float32x4NotEqualJS(q,x){
return %Float32x4NotEqual(q,x);
}
function Float32x4LessThanJS(q,x){
return %Float32x4LessThan(q,x);
}
function Float32x4LessThanOrEqualJS(q,x){
return %Float32x4LessThanOrEqual(q,x);
}
function Float32x4GreaterThanJS(q,x){
return %Float32x4GreaterThan(q,x);
}
function Float32x4GreaterThanOrEqualJS(q,x){
return %Float32x4GreaterThanOrEqual(q,x);
}
function Float32x4LoadJS(A,B){
return %Float32x4Load(A,B);
}
function Float32x4StoreJS(A,B,q){
return %Float32x4Store(A,B,q);
}


function Int32x4ReplaceLaneJS(u,v,r){
return %Int32x4ReplaceLane(u,v,(%_ToNumber(r)));
}
function Int32x4SelectJS(z,q,x){
return %Int32x4Select(z,q,x);
}
function Int32x4AddJS(q,x){
return %Int32x4Add(q,x);
}
function Int32x4SubJS(q,x){
return %Int32x4Sub(q,x);
}
function Int32x4MulJS(q,x){
return %Int32x4Mul(q,x);
}
function Int32x4MinJS(q,x){
return %Int32x4Min(q,x);
}
function Int32x4MaxJS(q,x){
return %Int32x4Max(q,x);
}
function Int32x4EqualJS(q,x){
return %Int32x4Equal(q,x);
}
function Int32x4NotEqualJS(q,x){
return %Int32x4NotEqual(q,x);
}
function Int32x4LessThanJS(q,x){
return %Int32x4LessThan(q,x);
}
function Int32x4LessThanOrEqualJS(q,x){
return %Int32x4LessThanOrEqual(q,x);
}
function Int32x4GreaterThanJS(q,x){
return %Int32x4GreaterThan(q,x);
}
function Int32x4GreaterThanOrEqualJS(q,x){
return %Int32x4GreaterThanOrEqual(q,x);
}
function Int32x4LoadJS(A,B){
return %Int32x4Load(A,B);
}
function Int32x4StoreJS(A,B,q){
return %Int32x4Store(A,B,q);
}

function Int16x8ReplaceLaneJS(u,v,r){
return %Int16x8ReplaceLane(u,v,(%_ToNumber(r)));
}
function Int16x8SelectJS(z,q,x){
return %Int16x8Select(z,q,x);
}
function Int16x8AddJS(q,x){
return %Int16x8Add(q,x);
}
function Int16x8SubJS(q,x){
return %Int16x8Sub(q,x);
}
function Int16x8MulJS(q,x){
return %Int16x8Mul(q,x);
}
function Int16x8MinJS(q,x){
return %Int16x8Min(q,x);
}
function Int16x8MaxJS(q,x){
return %Int16x8Max(q,x);
}
function Int16x8EqualJS(q,x){
return %Int16x8Equal(q,x);
}
function Int16x8NotEqualJS(q,x){
return %Int16x8NotEqual(q,x);
}
function Int16x8LessThanJS(q,x){
return %Int16x8LessThan(q,x);
}
function Int16x8LessThanOrEqualJS(q,x){
return %Int16x8LessThanOrEqual(q,x);
}
function Int16x8GreaterThanJS(q,x){
return %Int16x8GreaterThan(q,x);
}
function Int16x8GreaterThanOrEqualJS(q,x){
return %Int16x8GreaterThanOrEqual(q,x);
}
function Int16x8LoadJS(A,B){
return %Int16x8Load(A,B);
}
function Int16x8StoreJS(A,B,q){
return %Int16x8Store(A,B,q);
}

function Int8x16ReplaceLaneJS(u,v,r){
return %Int8x16ReplaceLane(u,v,(%_ToNumber(r)));
}
function Int8x16SelectJS(z,q,x){
return %Int8x16Select(z,q,x);
}
function Int8x16AddJS(q,x){
return %Int8x16Add(q,x);
}
function Int8x16SubJS(q,x){
return %Int8x16Sub(q,x);
}
function Int8x16MulJS(q,x){
return %Int8x16Mul(q,x);
}
function Int8x16MinJS(q,x){
return %Int8x16Min(q,x);
}
function Int8x16MaxJS(q,x){
return %Int8x16Max(q,x);
}
function Int8x16EqualJS(q,x){
return %Int8x16Equal(q,x);
}
function Int8x16NotEqualJS(q,x){
return %Int8x16NotEqual(q,x);
}
function Int8x16LessThanJS(q,x){
return %Int8x16LessThan(q,x);
}
function Int8x16LessThanOrEqualJS(q,x){
return %Int8x16LessThanOrEqual(q,x);
}
function Int8x16GreaterThanJS(q,x){
return %Int8x16GreaterThan(q,x);
}
function Int8x16GreaterThanOrEqualJS(q,x){
return %Int8x16GreaterThanOrEqual(q,x);
}
function Int8x16LoadJS(A,B){
return %Int8x16Load(A,B);
}
function Int8x16StoreJS(A,B,q){
return %Int8x16Store(A,B,q);
}


function Uint32x4ReplaceLaneJS(u,v,r){
return %Uint32x4ReplaceLane(u,v,(%_ToNumber(r)));
}
function Uint32x4SelectJS(z,q,x){
return %Uint32x4Select(z,q,x);
}
function Uint32x4AddJS(q,x){
return %Uint32x4Add(q,x);
}
function Uint32x4SubJS(q,x){
return %Uint32x4Sub(q,x);
}
function Uint32x4MulJS(q,x){
return %Uint32x4Mul(q,x);
}
function Uint32x4MinJS(q,x){
return %Uint32x4Min(q,x);
}
function Uint32x4MaxJS(q,x){
return %Uint32x4Max(q,x);
}
function Uint32x4EqualJS(q,x){
return %Uint32x4Equal(q,x);
}
function Uint32x4NotEqualJS(q,x){
return %Uint32x4NotEqual(q,x);
}
function Uint32x4LessThanJS(q,x){
return %Uint32x4LessThan(q,x);
}
function Uint32x4LessThanOrEqualJS(q,x){
return %Uint32x4LessThanOrEqual(q,x);
}
function Uint32x4GreaterThanJS(q,x){
return %Uint32x4GreaterThan(q,x);
}
function Uint32x4GreaterThanOrEqualJS(q,x){
return %Uint32x4GreaterThanOrEqual(q,x);
}
function Uint32x4LoadJS(A,B){
return %Uint32x4Load(A,B);
}
function Uint32x4StoreJS(A,B,q){
return %Uint32x4Store(A,B,q);
}

function Uint16x8ReplaceLaneJS(u,v,r){
return %Uint16x8ReplaceLane(u,v,(%_ToNumber(r)));
}
function Uint16x8SelectJS(z,q,x){
return %Uint16x8Select(z,q,x);
}
function Uint16x8AddJS(q,x){
return %Uint16x8Add(q,x);
}
function Uint16x8SubJS(q,x){
return %Uint16x8Sub(q,x);
}
function Uint16x8MulJS(q,x){
return %Uint16x8Mul(q,x);
}
function Uint16x8MinJS(q,x){
return %Uint16x8Min(q,x);
}
function Uint16x8MaxJS(q,x){
return %Uint16x8Max(q,x);
}
function Uint16x8EqualJS(q,x){
return %Uint16x8Equal(q,x);
}
function Uint16x8NotEqualJS(q,x){
return %Uint16x8NotEqual(q,x);
}
function Uint16x8LessThanJS(q,x){
return %Uint16x8LessThan(q,x);
}
function Uint16x8LessThanOrEqualJS(q,x){
return %Uint16x8LessThanOrEqual(q,x);
}
function Uint16x8GreaterThanJS(q,x){
return %Uint16x8GreaterThan(q,x);
}
function Uint16x8GreaterThanOrEqualJS(q,x){
return %Uint16x8GreaterThanOrEqual(q,x);
}
function Uint16x8LoadJS(A,B){
return %Uint16x8Load(A,B);
}
function Uint16x8StoreJS(A,B,q){
return %Uint16x8Store(A,B,q);
}

function Uint8x16ReplaceLaneJS(u,v,r){
return %Uint8x16ReplaceLane(u,v,(%_ToNumber(r)));
}
function Uint8x16SelectJS(z,q,x){
return %Uint8x16Select(z,q,x);
}
function Uint8x16AddJS(q,x){
return %Uint8x16Add(q,x);
}
function Uint8x16SubJS(q,x){
return %Uint8x16Sub(q,x);
}
function Uint8x16MulJS(q,x){
return %Uint8x16Mul(q,x);
}
function Uint8x16MinJS(q,x){
return %Uint8x16Min(q,x);
}
function Uint8x16MaxJS(q,x){
return %Uint8x16Max(q,x);
}
function Uint8x16EqualJS(q,x){
return %Uint8x16Equal(q,x);
}
function Uint8x16NotEqualJS(q,x){
return %Uint8x16NotEqual(q,x);
}
function Uint8x16LessThanJS(q,x){
return %Uint8x16LessThan(q,x);
}
function Uint8x16LessThanOrEqualJS(q,x){
return %Uint8x16LessThanOrEqual(q,x);
}
function Uint8x16GreaterThanJS(q,x){
return %Uint8x16GreaterThan(q,x);
}
function Uint8x16GreaterThanOrEqualJS(q,x){
return %Uint8x16GreaterThanOrEqual(q,x);
}
function Uint8x16LoadJS(A,B){
return %Uint8x16Load(A,B);
}
function Uint8x16StoreJS(A,B,q){
return %Uint8x16Store(A,B,q);
}



function Int32x4AndJS(q,x){
return %Int32x4And(q,x);
}
function Int32x4OrJS(q,x){
return %Int32x4Or(q,x);
}
function Int32x4XorJS(q,x){
return %Int32x4Xor(q,x);
}
function Int32x4NotJS(q){
return %Int32x4Not(q);
}

function Int16x8AndJS(q,x){
return %Int16x8And(q,x);
}
function Int16x8OrJS(q,x){
return %Int16x8Or(q,x);
}
function Int16x8XorJS(q,x){
return %Int16x8Xor(q,x);
}
function Int16x8NotJS(q){
return %Int16x8Not(q);
}

function Int8x16AndJS(q,x){
return %Int8x16And(q,x);
}
function Int8x16OrJS(q,x){
return %Int8x16Or(q,x);
}
function Int8x16XorJS(q,x){
return %Int8x16Xor(q,x);
}
function Int8x16NotJS(q){
return %Int8x16Not(q);
}


function Uint32x4AndJS(q,x){
return %Uint32x4And(q,x);
}
function Uint32x4OrJS(q,x){
return %Uint32x4Or(q,x);
}
function Uint32x4XorJS(q,x){
return %Uint32x4Xor(q,x);
}
function Uint32x4NotJS(q){
return %Uint32x4Not(q);
}

function Uint16x8AndJS(q,x){
return %Uint16x8And(q,x);
}
function Uint16x8OrJS(q,x){
return %Uint16x8Or(q,x);
}
function Uint16x8XorJS(q,x){
return %Uint16x8Xor(q,x);
}
function Uint16x8NotJS(q){
return %Uint16x8Not(q);
}

function Uint8x16AndJS(q,x){
return %Uint8x16And(q,x);
}
function Uint8x16OrJS(q,x){
return %Uint8x16Or(q,x);
}
function Uint8x16XorJS(q,x){
return %Uint8x16Xor(q,x);
}
function Uint8x16NotJS(q){
return %Uint8x16Not(q);
}


function Bool32x4AndJS(q,x){
return %Bool32x4And(q,x);
}
function Bool32x4OrJS(q,x){
return %Bool32x4Or(q,x);
}
function Bool32x4XorJS(q,x){
return %Bool32x4Xor(q,x);
}
function Bool32x4NotJS(q){
return %Bool32x4Not(q);
}

function Bool16x8AndJS(q,x){
return %Bool16x8And(q,x);
}
function Bool16x8OrJS(q,x){
return %Bool16x8Or(q,x);
}
function Bool16x8XorJS(q,x){
return %Bool16x8Xor(q,x);
}
function Bool16x8NotJS(q){
return %Bool16x8Not(q);
}

function Bool8x16AndJS(q,x){
return %Bool8x16And(q,x);
}
function Bool8x16OrJS(q,x){
return %Bool8x16Or(q,x);
}
function Bool8x16XorJS(q,x){
return %Bool8x16Xor(q,x);
}
function Bool8x16NotJS(q){
return %Bool8x16Not(q);
}



function Float32x4FromInt32x4JS(q){
return %Float32x4FromInt32x4(q);
}

function Float32x4FromUint32x4JS(q){
return %Float32x4FromUint32x4(q);
}

function Int32x4FromFloat32x4JS(q){
return %Int32x4FromFloat32x4(q);
}

function Int32x4FromUint32x4JS(q){
return %Int32x4FromUint32x4(q);
}

function Uint32x4FromFloat32x4JS(q){
return %Uint32x4FromFloat32x4(q);
}

function Uint32x4FromInt32x4JS(q){
return %Uint32x4FromInt32x4(q);
}

function Int16x8FromUint16x8JS(q){
return %Int16x8FromUint16x8(q);
}

function Uint16x8FromInt16x8JS(q){
return %Uint16x8FromInt16x8(q);
}

function Int8x16FromUint8x16JS(q){
return %Int8x16FromUint8x16(q);
}

function Uint8x16FromInt8x16JS(q){
return %Uint8x16FromInt8x16(q);
}


function Float32x4FromInt32x4BitsJS(q){
return %Float32x4FromInt32x4Bits(q);
}

function Float32x4FromUint32x4BitsJS(q){
return %Float32x4FromUint32x4Bits(q);
}

function Float32x4FromInt16x8BitsJS(q){
return %Float32x4FromInt16x8Bits(q);
}

function Float32x4FromUint16x8BitsJS(q){
return %Float32x4FromUint16x8Bits(q);
}

function Float32x4FromInt8x16BitsJS(q){
return %Float32x4FromInt8x16Bits(q);
}

function Float32x4FromUint8x16BitsJS(q){
return %Float32x4FromUint8x16Bits(q);
}

function Int32x4FromFloat32x4BitsJS(q){
return %Int32x4FromFloat32x4Bits(q);
}

function Int32x4FromUint32x4BitsJS(q){
return %Int32x4FromUint32x4Bits(q);
}

function Int32x4FromInt16x8BitsJS(q){
return %Int32x4FromInt16x8Bits(q);
}

function Int32x4FromUint16x8BitsJS(q){
return %Int32x4FromUint16x8Bits(q);
}

function Int32x4FromInt8x16BitsJS(q){
return %Int32x4FromInt8x16Bits(q);
}

function Int32x4FromUint8x16BitsJS(q){
return %Int32x4FromUint8x16Bits(q);
}

function Uint32x4FromFloat32x4BitsJS(q){
return %Uint32x4FromFloat32x4Bits(q);
}

function Uint32x4FromInt32x4BitsJS(q){
return %Uint32x4FromInt32x4Bits(q);
}

function Uint32x4FromInt16x8BitsJS(q){
return %Uint32x4FromInt16x8Bits(q);
}

function Uint32x4FromUint16x8BitsJS(q){
return %Uint32x4FromUint16x8Bits(q);
}

function Uint32x4FromInt8x16BitsJS(q){
return %Uint32x4FromInt8x16Bits(q);
}

function Uint32x4FromUint8x16BitsJS(q){
return %Uint32x4FromUint8x16Bits(q);
}

function Int16x8FromFloat32x4BitsJS(q){
return %Int16x8FromFloat32x4Bits(q);
}

function Int16x8FromInt32x4BitsJS(q){
return %Int16x8FromInt32x4Bits(q);
}

function Int16x8FromUint32x4BitsJS(q){
return %Int16x8FromUint32x4Bits(q);
}

function Int16x8FromUint16x8BitsJS(q){
return %Int16x8FromUint16x8Bits(q);
}

function Int16x8FromInt8x16BitsJS(q){
return %Int16x8FromInt8x16Bits(q);
}

function Int16x8FromUint8x16BitsJS(q){
return %Int16x8FromUint8x16Bits(q);
}

function Uint16x8FromFloat32x4BitsJS(q){
return %Uint16x8FromFloat32x4Bits(q);
}

function Uint16x8FromInt32x4BitsJS(q){
return %Uint16x8FromInt32x4Bits(q);
}

function Uint16x8FromUint32x4BitsJS(q){
return %Uint16x8FromUint32x4Bits(q);
}

function Uint16x8FromInt16x8BitsJS(q){
return %Uint16x8FromInt16x8Bits(q);
}

function Uint16x8FromInt8x16BitsJS(q){
return %Uint16x8FromInt8x16Bits(q);
}

function Uint16x8FromUint8x16BitsJS(q){
return %Uint16x8FromUint8x16Bits(q);
}

function Int8x16FromFloat32x4BitsJS(q){
return %Int8x16FromFloat32x4Bits(q);
}

function Int8x16FromInt32x4BitsJS(q){
return %Int8x16FromInt32x4Bits(q);
}

function Int8x16FromUint32x4BitsJS(q){
return %Int8x16FromUint32x4Bits(q);
}

function Int8x16FromInt16x8BitsJS(q){
return %Int8x16FromInt16x8Bits(q);
}

function Int8x16FromUint16x8BitsJS(q){
return %Int8x16FromUint16x8Bits(q);
}

function Int8x16FromUint8x16BitsJS(q){
return %Int8x16FromUint8x16Bits(q);
}

function Uint8x16FromFloat32x4BitsJS(q){
return %Uint8x16FromFloat32x4Bits(q);
}

function Uint8x16FromInt32x4BitsJS(q){
return %Uint8x16FromInt32x4Bits(q);
}

function Uint8x16FromUint32x4BitsJS(q){
return %Uint8x16FromUint32x4Bits(q);
}

function Uint8x16FromInt16x8BitsJS(q){
return %Uint8x16FromInt16x8Bits(q);
}

function Uint8x16FromUint16x8BitsJS(q){
return %Uint8x16FromUint16x8Bits(q);
}

function Uint8x16FromInt8x16BitsJS(q){
return %Uint8x16FromInt8x16Bits(q);
}


function Float32x4Load1JS(A,B){
return %Float32x4Load1(A,B);
}
function Float32x4Store1JS(A,B,q){
return %Float32x4Store1(A,B,q);
}

function Float32x4Load2JS(A,B){
return %Float32x4Load2(A,B);
}
function Float32x4Store2JS(A,B,q){
return %Float32x4Store2(A,B,q);
}

function Float32x4Load3JS(A,B){
return %Float32x4Load3(A,B);
}
function Float32x4Store3JS(A,B,q){
return %Float32x4Store3(A,B,q);
}

function Int32x4Load1JS(A,B){
return %Int32x4Load1(A,B);
}
function Int32x4Store1JS(A,B,q){
return %Int32x4Store1(A,B,q);
}

function Int32x4Load2JS(A,B){
return %Int32x4Load2(A,B);
}
function Int32x4Store2JS(A,B,q){
return %Int32x4Store2(A,B,q);
}

function Int32x4Load3JS(A,B){
return %Int32x4Load3(A,B);
}
function Int32x4Store3JS(A,B,q){
return %Int32x4Store3(A,B,q);
}

function Uint32x4Load1JS(A,B){
return %Uint32x4Load1(A,B);
}
function Uint32x4Store1JS(A,B,q){
return %Uint32x4Store1(A,B,q);
}

function Uint32x4Load2JS(A,B){
return %Uint32x4Load2(A,B);
}
function Uint32x4Store2JS(A,B,q){
return %Uint32x4Store2(A,B,q);
}

function Uint32x4Load3JS(A,B){
return %Uint32x4Load3(A,B);
}
function Uint32x4Store3JS(A,B,q){
return %Uint32x4Store3(A,B,q);
}


function Float32x4Splat(y){
return %CreateFloat32x4(y,y,y,y);
}
function Float32x4SwizzleJS(q,C,D,E,F){
return %Float32x4Swizzle(q,C,D,E,F);
}
function Float32x4ShuffleJS(q,x,C,D,E,F){
return %Float32x4Shuffle(q,x,C,D,E,F);
}

function Int32x4Splat(y){
return %CreateInt32x4(y,y,y,y);
}
function Int32x4SwizzleJS(q,C,D,E,F){
return %Int32x4Swizzle(q,C,D,E,F);
}
function Int32x4ShuffleJS(q,x,C,D,E,F){
return %Int32x4Shuffle(q,x,C,D,E,F);
}

function Uint32x4Splat(y){
return %CreateUint32x4(y,y,y,y);
}
function Uint32x4SwizzleJS(q,C,D,E,F){
return %Uint32x4Swizzle(q,C,D,E,F);
}
function Uint32x4ShuffleJS(q,x,C,D,E,F){
return %Uint32x4Shuffle(q,x,C,D,E,F);
}

function Bool32x4Splat(y){
return %CreateBool32x4(y,y,y,y);
}
function Bool32x4SwizzleJS(q,C,D,E,F){
return %Bool32x4Swizzle(q,C,D,E,F);
}
function Bool32x4ShuffleJS(q,x,C,D,E,F){
return %Bool32x4Shuffle(q,x,C,D,E,F);
}


function Int16x8Splat(y){
return %CreateInt16x8(y,y,y,y,y,y,y,y);
}
function Int16x8SwizzleJS(q,C,D,E,F,G,H,I,J){
return %Int16x8Swizzle(q,C,D,E,F,G,H,I,J);
}
function Int16x8ShuffleJS(q,x,C,D,E,F,G,H,I,J){
return %Int16x8Shuffle(q,x,C,D,E,F,G,H,I,J);
}

function Uint16x8Splat(y){
return %CreateUint16x8(y,y,y,y,y,y,y,y);
}
function Uint16x8SwizzleJS(q,C,D,E,F,G,H,I,J){
return %Uint16x8Swizzle(q,C,D,E,F,G,H,I,J);
}
function Uint16x8ShuffleJS(q,x,C,D,E,F,G,H,I,J){
return %Uint16x8Shuffle(q,x,C,D,E,F,G,H,I,J);
}

function Bool16x8Splat(y){
return %CreateBool16x8(y,y,y,y,y,y,y,y);
}
function Bool16x8SwizzleJS(q,C,D,E,F,G,H,I,J){
return %Bool16x8Swizzle(q,C,D,E,F,G,H,I,J);
}
function Bool16x8ShuffleJS(q,x,C,D,E,F,G,H,I,J){
return %Bool16x8Shuffle(q,x,C,D,E,F,G,H,I,J);
}


function Int8x16Splat(y){
return %CreateInt8x16(y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y);
}
function Int8x16SwizzleJS(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Int8x16Swizzle(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Int8x16ShuffleJS(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Int8x16Shuffle(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15);
}

function Uint8x16Splat(y){
return %CreateUint8x16(y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y);
}
function Uint8x16SwizzleJS(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Uint8x16Swizzle(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Uint8x16ShuffleJS(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Uint8x16Shuffle(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15);
}

function Bool8x16Splat(y){
return %CreateBool8x16(y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y);
}
function Bool8x16SwizzleJS(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
return %Bool8x16Swizzle(q,C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15);
}
function Bool8x16ShuffleJS(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15){
return %Bool8x16Shuffle(q,x,C,D,E,F,G,H,I,J,c8,c9,c10,
c11,c12,c13,c14,c15);
}


function Float32x4Constructor(C,D,E,F){
if(%_IsConstructCall())throw d(56,"Float32x4");
return %CreateFloat32x4((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)));
}
function Int32x4Constructor(C,D,E,F){
if(%_IsConstructCall())throw d(56,"Int32x4");
return %CreateInt32x4((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)));
}
function Uint32x4Constructor(C,D,E,F){
if(%_IsConstructCall())throw d(56,"Uint32x4");
return %CreateUint32x4((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)));
}
function Bool32x4Constructor(C,D,E,F){
if(%_IsConstructCall())throw d(56,"Bool32x4");
return %CreateBool32x4(C,D,E,F);
}
function Int16x8Constructor(C,D,E,F,G,H,I,J){
if(%_IsConstructCall())throw d(56,"Int16x8");
return %CreateInt16x8((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(I)),(%_ToNumber(J)));
}
function Uint16x8Constructor(C,D,E,F,G,H,I,J){
if(%_IsConstructCall())throw d(56,"Uint16x8");
return %CreateUint16x8((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(I)),(%_ToNumber(J)));
}
function Bool16x8Constructor(C,D,E,F,G,H,I,J){
if(%_IsConstructCall())throw d(56,"Bool16x8");
return %CreateBool16x8(C,D,E,F,G,H,I,J);
}
function Int8x16Constructor(C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw d(56,"Int8x16");
return %CreateInt8x16((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(I)),(%_ToNumber(J)),
(%_ToNumber(c8)),(%_ToNumber(c9)),
(%_ToNumber(c10)),(%_ToNumber(c11)),
(%_ToNumber(c12)),(%_ToNumber(c13)),
(%_ToNumber(c14)),(%_ToNumber(c15)));
}
function Uint8x16Constructor(C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw d(56,"Uint8x16");
return %CreateUint8x16((%_ToNumber(C)),(%_ToNumber(D)),
(%_ToNumber(E)),(%_ToNumber(F)),
(%_ToNumber(G)),(%_ToNumber(H)),
(%_ToNumber(I)),(%_ToNumber(J)),
(%_ToNumber(c8)),(%_ToNumber(c9)),
(%_ToNumber(c10)),(%_ToNumber(c11)),
(%_ToNumber(c12)),(%_ToNumber(c13)),
(%_ToNumber(c14)),(%_ToNumber(c15)));
}
function Bool8x16Constructor(C,D,E,F,G,H,I,J,c8,c9,c10,c11,
c12,c13,c14,c15){
if(%_IsConstructCall())throw d(56,"Bool8x16");
return %CreateBool8x16(C,D,E,F,G,H,I,J,c8,c9,c10,c11,c12,
c13,c14,c15);
}
function Float32x4AbsJS(q){
return %Float32x4Abs(q);
}
function Float32x4SqrtJS(q){
return %Float32x4Sqrt(q);
}
function Float32x4RecipApproxJS(q){
return %Float32x4RecipApprox(q);
}
function Float32x4RecipSqrtApproxJS(q){
return %Float32x4RecipSqrtApprox(q);
}
function Float32x4DivJS(q,x){
return %Float32x4Div(q,x);
}
function Float32x4MinNumJS(q,x){
return %Float32x4MinNum(q,x);
}
function Float32x4MaxNumJS(q,x){
return %Float32x4MaxNum(q,x);
}
%AddNamedProperty(c,e,'SIMD',1|2);
%SetCode(g,Float32x4Constructor);
%FunctionSetPrototype(g,{});
%AddNamedProperty(g.prototype,'constructor',g,
2);
%AddNamedProperty(g.prototype,e,'Float32x4',
2|1);
b.InstallFunctions(g.prototype,2,[
'toLocaleString',Float32x4ToLocaleString,
'toString',Float32x4ToString,
'valueOf',Float32x4ValueOf,
]);


%SetCode(h,Int32x4Constructor);
%FunctionSetPrototype(h,{});
%AddNamedProperty(h.prototype,'constructor',h,
2);
%AddNamedProperty(h.prototype,e,'Int32x4',
2|1);
b.InstallFunctions(h.prototype,2,[
'toLocaleString',Int32x4ToLocaleString,
'toString',Int32x4ToString,
'valueOf',Int32x4ValueOf,
]);

%SetCode(i,Int16x8Constructor);
%FunctionSetPrototype(i,{});
%AddNamedProperty(i.prototype,'constructor',i,
2);
%AddNamedProperty(i.prototype,e,'Int16x8',
2|1);
b.InstallFunctions(i.prototype,2,[
'toLocaleString',Int16x8ToLocaleString,
'toString',Int16x8ToString,
'valueOf',Int16x8ValueOf,
]);

%SetCode(j,Int8x16Constructor);
%FunctionSetPrototype(j,{});
%AddNamedProperty(j.prototype,'constructor',j,
2);
%AddNamedProperty(j.prototype,e,'Int8x16',
2|1);
b.InstallFunctions(j.prototype,2,[
'toLocaleString',Int8x16ToLocaleString,
'toString',Int8x16ToString,
'valueOf',Int8x16ValueOf,
]);


%SetCode(k,Uint32x4Constructor);
%FunctionSetPrototype(k,{});
%AddNamedProperty(k.prototype,'constructor',k,
2);
%AddNamedProperty(k.prototype,e,'Uint32x4',
2|1);
b.InstallFunctions(k.prototype,2,[
'toLocaleString',Uint32x4ToLocaleString,
'toString',Uint32x4ToString,
'valueOf',Uint32x4ValueOf,
]);

%SetCode(l,Uint16x8Constructor);
%FunctionSetPrototype(l,{});
%AddNamedProperty(l.prototype,'constructor',l,
2);
%AddNamedProperty(l.prototype,e,'Uint16x8',
2|1);
b.InstallFunctions(l.prototype,2,[
'toLocaleString',Uint16x8ToLocaleString,
'toString',Uint16x8ToString,
'valueOf',Uint16x8ValueOf,
]);

%SetCode(m,Uint8x16Constructor);
%FunctionSetPrototype(m,{});
%AddNamedProperty(m.prototype,'constructor',m,
2);
%AddNamedProperty(m.prototype,e,'Uint8x16',
2|1);
b.InstallFunctions(m.prototype,2,[
'toLocaleString',Uint8x16ToLocaleString,
'toString',Uint8x16ToString,
'valueOf',Uint8x16ValueOf,
]);


%SetCode(n,Bool32x4Constructor);
%FunctionSetPrototype(n,{});
%AddNamedProperty(n.prototype,'constructor',n,
2);
%AddNamedProperty(n.prototype,e,'Bool32x4',
2|1);
b.InstallFunctions(n.prototype,2,[
'toLocaleString',Bool32x4ToLocaleString,
'toString',Bool32x4ToString,
'valueOf',Bool32x4ValueOf,
]);

%SetCode(o,Bool16x8Constructor);
%FunctionSetPrototype(o,{});
%AddNamedProperty(o.prototype,'constructor',o,
2);
%AddNamedProperty(o.prototype,e,'Bool16x8',
2|1);
b.InstallFunctions(o.prototype,2,[
'toLocaleString',Bool16x8ToLocaleString,
'toString',Bool16x8ToString,
'valueOf',Bool16x8ValueOf,
]);

%SetCode(p,Bool8x16Constructor);
%FunctionSetPrototype(p,{});
%AddNamedProperty(p.prototype,'constructor',p,
2);
%AddNamedProperty(p.prototype,e,'Bool8x16',
2|1);
b.InstallFunctions(p.prototype,2,[
'toLocaleString',Bool8x16ToLocaleString,
'toString',Bool8x16ToString,
'valueOf',Bool8x16ValueOf,
]);



b.InstallFunctions(g,2,[
'splat',Float32x4Splat,
'check',Float32x4CheckJS,
'extractLane',Float32x4ExtractLaneJS,
'replaceLane',Float32x4ReplaceLaneJS,
'neg',Float32x4NegJS,
'abs',Float32x4AbsJS,
'sqrt',Float32x4SqrtJS,
'reciprocalApproximation',Float32x4RecipApproxJS,
'reciprocalSqrtApproximation',Float32x4RecipSqrtApproxJS,
'add',Float32x4AddJS,
'sub',Float32x4SubJS,
'mul',Float32x4MulJS,
'div',Float32x4DivJS,
'min',Float32x4MinJS,
'max',Float32x4MaxJS,
'minNum',Float32x4MinNumJS,
'maxNum',Float32x4MaxNumJS,
'lessThan',Float32x4LessThanJS,
'lessThanOrEqual',Float32x4LessThanOrEqualJS,
'greaterThan',Float32x4GreaterThanJS,
'greaterThanOrEqual',Float32x4GreaterThanOrEqualJS,
'equal',Float32x4EqualJS,
'notEqual',Float32x4NotEqualJS,
'select',Float32x4SelectJS,
'swizzle',Float32x4SwizzleJS,
'shuffle',Float32x4ShuffleJS,
'fromInt32x4',Float32x4FromInt32x4JS,
'fromUint32x4',Float32x4FromUint32x4JS,
'fromInt32x4Bits',Float32x4FromInt32x4BitsJS,
'fromUint32x4Bits',Float32x4FromUint32x4BitsJS,
'fromInt16x8Bits',Float32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Float32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Float32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Float32x4FromUint8x16BitsJS,
'load',Float32x4LoadJS,
'load1',Float32x4Load1JS,
'load2',Float32x4Load2JS,
'load3',Float32x4Load3JS,
'store',Float32x4StoreJS,
'store1',Float32x4Store1JS,
'store2',Float32x4Store2JS,
'store3',Float32x4Store3JS,
]);
b.InstallFunctions(h,2,[
'splat',Int32x4Splat,
'check',Int32x4CheckJS,
'extractLane',Int32x4ExtractLaneJS,
'replaceLane',Int32x4ReplaceLaneJS,
'neg',Int32x4NegJS,
'add',Int32x4AddJS,
'sub',Int32x4SubJS,
'mul',Int32x4MulJS,
'min',Int32x4MinJS,
'max',Int32x4MaxJS,
'and',Int32x4AndJS,
'or',Int32x4OrJS,
'xor',Int32x4XorJS,
'not',Int32x4NotJS,
'shiftLeftByScalar',Int32x4ShiftLeftByScalarJS,
'shiftRightByScalar',Int32x4ShiftRightByScalarJS,
'lessThan',Int32x4LessThanJS,
'lessThanOrEqual',Int32x4LessThanOrEqualJS,
'greaterThan',Int32x4GreaterThanJS,
'greaterThanOrEqual',Int32x4GreaterThanOrEqualJS,
'equal',Int32x4EqualJS,
'notEqual',Int32x4NotEqualJS,
'select',Int32x4SelectJS,
'swizzle',Int32x4SwizzleJS,
'shuffle',Int32x4ShuffleJS,
'fromFloat32x4',Int32x4FromFloat32x4JS,
'fromUint32x4',Int32x4FromUint32x4JS,
'fromFloat32x4Bits',Int32x4FromFloat32x4BitsJS,
'fromUint32x4Bits',Int32x4FromUint32x4BitsJS,
'fromInt16x8Bits',Int32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Int32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Int32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Int32x4FromUint8x16BitsJS,
'load',Int32x4LoadJS,
'load1',Int32x4Load1JS,
'load2',Int32x4Load2JS,
'load3',Int32x4Load3JS,
'store',Int32x4StoreJS,
'store1',Int32x4Store1JS,
'store2',Int32x4Store2JS,
'store3',Int32x4Store3JS,
]);
b.InstallFunctions(k,2,[
'splat',Uint32x4Splat,
'check',Uint32x4CheckJS,
'extractLane',Uint32x4ExtractLaneJS,
'replaceLane',Uint32x4ReplaceLaneJS,
'add',Uint32x4AddJS,
'sub',Uint32x4SubJS,
'mul',Uint32x4MulJS,
'min',Uint32x4MinJS,
'max',Uint32x4MaxJS,
'and',Uint32x4AndJS,
'or',Uint32x4OrJS,
'xor',Uint32x4XorJS,
'not',Uint32x4NotJS,
'shiftLeftByScalar',Uint32x4ShiftLeftByScalarJS,
'shiftRightByScalar',Uint32x4ShiftRightByScalarJS,
'lessThan',Uint32x4LessThanJS,
'lessThanOrEqual',Uint32x4LessThanOrEqualJS,
'greaterThan',Uint32x4GreaterThanJS,
'greaterThanOrEqual',Uint32x4GreaterThanOrEqualJS,
'equal',Uint32x4EqualJS,
'notEqual',Uint32x4NotEqualJS,
'select',Uint32x4SelectJS,
'swizzle',Uint32x4SwizzleJS,
'shuffle',Uint32x4ShuffleJS,
'fromFloat32x4',Uint32x4FromFloat32x4JS,
'fromInt32x4',Uint32x4FromInt32x4JS,
'fromFloat32x4Bits',Uint32x4FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint32x4FromInt32x4BitsJS,
'fromInt16x8Bits',Uint32x4FromInt16x8BitsJS,
'fromUint16x8Bits',Uint32x4FromUint16x8BitsJS,
'fromInt8x16Bits',Uint32x4FromInt8x16BitsJS,
'fromUint8x16Bits',Uint32x4FromUint8x16BitsJS,
'load',Uint32x4LoadJS,
'load1',Uint32x4Load1JS,
'load2',Uint32x4Load2JS,
'load3',Uint32x4Load3JS,
'store',Uint32x4StoreJS,
'store1',Uint32x4Store1JS,
'store2',Uint32x4Store2JS,
'store3',Uint32x4Store3JS,
]);
b.InstallFunctions(n,2,[
'splat',Bool32x4Splat,
'check',Bool32x4CheckJS,
'extractLane',Bool32x4ExtractLaneJS,
'replaceLane',Bool32x4ReplaceLaneJS,
'and',Bool32x4AndJS,
'or',Bool32x4OrJS,
'xor',Bool32x4XorJS,
'not',Bool32x4NotJS,
'anyTrue',Bool32x4AnyTrueJS,
'allTrue',Bool32x4AllTrueJS,
'swizzle',Bool32x4SwizzleJS,
'shuffle',Bool32x4ShuffleJS,
]);
b.InstallFunctions(i,2,[
'splat',Int16x8Splat,
'check',Int16x8CheckJS,
'extractLane',Int16x8ExtractLaneJS,
'replaceLane',Int16x8ReplaceLaneJS,
'neg',Int16x8NegJS,
'add',Int16x8AddJS,
'sub',Int16x8SubJS,
'addSaturate',Int16x8AddSaturateJS,
'subSaturate',Int16x8SubSaturateJS,
'mul',Int16x8MulJS,
'min',Int16x8MinJS,
'max',Int16x8MaxJS,
'and',Int16x8AndJS,
'or',Int16x8OrJS,
'xor',Int16x8XorJS,
'not',Int16x8NotJS,
'shiftLeftByScalar',Int16x8ShiftLeftByScalarJS,
'shiftRightByScalar',Int16x8ShiftRightByScalarJS,
'lessThan',Int16x8LessThanJS,
'lessThanOrEqual',Int16x8LessThanOrEqualJS,
'greaterThan',Int16x8GreaterThanJS,
'greaterThanOrEqual',Int16x8GreaterThanOrEqualJS,
'equal',Int16x8EqualJS,
'notEqual',Int16x8NotEqualJS,
'select',Int16x8SelectJS,
'swizzle',Int16x8SwizzleJS,
'shuffle',Int16x8ShuffleJS,
'fromUint16x8',Int16x8FromUint16x8JS,
'fromFloat32x4Bits',Int16x8FromFloat32x4BitsJS,
'fromInt32x4Bits',Int16x8FromInt32x4BitsJS,
'fromUint32x4Bits',Int16x8FromUint32x4BitsJS,
'fromUint16x8Bits',Int16x8FromUint16x8BitsJS,
'fromInt8x16Bits',Int16x8FromInt8x16BitsJS,
'fromUint8x16Bits',Int16x8FromUint8x16BitsJS,
'load',Int16x8LoadJS,
'store',Int16x8StoreJS,
]);
b.InstallFunctions(l,2,[
'splat',Uint16x8Splat,
'check',Uint16x8CheckJS,
'extractLane',Uint16x8ExtractLaneJS,
'replaceLane',Uint16x8ReplaceLaneJS,
'add',Uint16x8AddJS,
'sub',Uint16x8SubJS,
'addSaturate',Uint16x8AddSaturateJS,
'subSaturate',Uint16x8SubSaturateJS,
'mul',Uint16x8MulJS,
'min',Uint16x8MinJS,
'max',Uint16x8MaxJS,
'and',Uint16x8AndJS,
'or',Uint16x8OrJS,
'xor',Uint16x8XorJS,
'not',Uint16x8NotJS,
'shiftLeftByScalar',Uint16x8ShiftLeftByScalarJS,
'shiftRightByScalar',Uint16x8ShiftRightByScalarJS,
'lessThan',Uint16x8LessThanJS,
'lessThanOrEqual',Uint16x8LessThanOrEqualJS,
'greaterThan',Uint16x8GreaterThanJS,
'greaterThanOrEqual',Uint16x8GreaterThanOrEqualJS,
'equal',Uint16x8EqualJS,
'notEqual',Uint16x8NotEqualJS,
'select',Uint16x8SelectJS,
'swizzle',Uint16x8SwizzleJS,
'shuffle',Uint16x8ShuffleJS,
'fromInt16x8',Uint16x8FromInt16x8JS,
'fromFloat32x4Bits',Uint16x8FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint16x8FromInt32x4BitsJS,
'fromUint32x4Bits',Uint16x8FromUint32x4BitsJS,
'fromInt16x8Bits',Uint16x8FromInt16x8BitsJS,
'fromInt8x16Bits',Uint16x8FromInt8x16BitsJS,
'fromUint8x16Bits',Uint16x8FromUint8x16BitsJS,
'load',Uint16x8LoadJS,
'store',Uint16x8StoreJS,
]);
b.InstallFunctions(o,2,[
'splat',Bool16x8Splat,
'check',Bool16x8CheckJS,
'extractLane',Bool16x8ExtractLaneJS,
'replaceLane',Bool16x8ReplaceLaneJS,
'and',Bool16x8AndJS,
'or',Bool16x8OrJS,
'xor',Bool16x8XorJS,
'not',Bool16x8NotJS,
'anyTrue',Bool16x8AnyTrueJS,
'allTrue',Bool16x8AllTrueJS,
'swizzle',Bool16x8SwizzleJS,
'shuffle',Bool16x8ShuffleJS,
]);
b.InstallFunctions(j,2,[
'splat',Int8x16Splat,
'check',Int8x16CheckJS,
'extractLane',Int8x16ExtractLaneJS,
'replaceLane',Int8x16ReplaceLaneJS,
'neg',Int8x16NegJS,
'add',Int8x16AddJS,
'sub',Int8x16SubJS,
'addSaturate',Int8x16AddSaturateJS,
'subSaturate',Int8x16SubSaturateJS,
'mul',Int8x16MulJS,
'min',Int8x16MinJS,
'max',Int8x16MaxJS,
'and',Int8x16AndJS,
'or',Int8x16OrJS,
'xor',Int8x16XorJS,
'not',Int8x16NotJS,
'shiftLeftByScalar',Int8x16ShiftLeftByScalarJS,
'shiftRightByScalar',Int8x16ShiftRightByScalarJS,
'lessThan',Int8x16LessThanJS,
'lessThanOrEqual',Int8x16LessThanOrEqualJS,
'greaterThan',Int8x16GreaterThanJS,
'greaterThanOrEqual',Int8x16GreaterThanOrEqualJS,
'equal',Int8x16EqualJS,
'notEqual',Int8x16NotEqualJS,
'select',Int8x16SelectJS,
'swizzle',Int8x16SwizzleJS,
'shuffle',Int8x16ShuffleJS,
'fromUint8x16',Int8x16FromUint8x16JS,
'fromFloat32x4Bits',Int8x16FromFloat32x4BitsJS,
'fromInt32x4Bits',Int8x16FromInt32x4BitsJS,
'fromUint32x4Bits',Int8x16FromUint32x4BitsJS,
'fromInt16x8Bits',Int8x16FromInt16x8BitsJS,
'fromUint16x8Bits',Int8x16FromUint16x8BitsJS,
'fromUint8x16Bits',Int8x16FromUint8x16BitsJS,
'load',Int8x16LoadJS,
'store',Int8x16StoreJS,
]);
b.InstallFunctions(m,2,[
'splat',Uint8x16Splat,
'check',Uint8x16CheckJS,
'extractLane',Uint8x16ExtractLaneJS,
'replaceLane',Uint8x16ReplaceLaneJS,
'add',Uint8x16AddJS,
'sub',Uint8x16SubJS,
'addSaturate',Uint8x16AddSaturateJS,
'subSaturate',Uint8x16SubSaturateJS,
'mul',Uint8x16MulJS,
'min',Uint8x16MinJS,
'max',Uint8x16MaxJS,
'and',Uint8x16AndJS,
'or',Uint8x16OrJS,
'xor',Uint8x16XorJS,
'not',Uint8x16NotJS,
'shiftLeftByScalar',Uint8x16ShiftLeftByScalarJS,
'shiftRightByScalar',Uint8x16ShiftRightByScalarJS,
'lessThan',Uint8x16LessThanJS,
'lessThanOrEqual',Uint8x16LessThanOrEqualJS,
'greaterThan',Uint8x16GreaterThanJS,
'greaterThanOrEqual',Uint8x16GreaterThanOrEqualJS,
'equal',Uint8x16EqualJS,
'notEqual',Uint8x16NotEqualJS,
'select',Uint8x16SelectJS,
'swizzle',Uint8x16SwizzleJS,
'shuffle',Uint8x16ShuffleJS,
'fromInt8x16',Uint8x16FromInt8x16JS,
'fromFloat32x4Bits',Uint8x16FromFloat32x4BitsJS,
'fromInt32x4Bits',Uint8x16FromInt32x4BitsJS,
'fromUint32x4Bits',Uint8x16FromUint32x4BitsJS,
'fromInt16x8Bits',Uint8x16FromInt16x8BitsJS,
'fromUint16x8Bits',Uint8x16FromUint16x8BitsJS,
'fromInt8x16Bits',Uint8x16FromInt8x16BitsJS,
'load',Uint8x16LoadJS,
'store',Uint8x16StoreJS,
]);
b.InstallFunctions(p,2,[
'splat',Bool8x16Splat,
'check',Bool8x16CheckJS,
'extractLane',Bool8x16ExtractLaneJS,
'replaceLane',Bool8x16ReplaceLaneJS,
'and',Bool8x16AndJS,
'or',Bool8x16OrJS,
'xor',Bool8x16XorJS,
'not',Bool8x16NotJS,
'anyTrue',Bool8x16AnyTrueJS,
'allTrue',Bool8x16AllTrueJS,
'swizzle',Bool8x16SwizzleJS,
'shuffle',Bool8x16ShuffleJS,
]);
b.Export(function(K){
K.Float32x4ToString=Float32x4ToString;
K.Int32x4ToString=Int32x4ToString;
K.Uint32x4ToString=Uint32x4ToString;
K.Bool32x4ToString=Bool32x4ToString;
K.Int16x8ToString=Int16x8ToString;
K.Uint16x8ToString=Uint16x8ToString;
K.Bool16x8ToString=Bool16x8ToString;
K.Int8x16ToString=Int8x16ToString;
K.Uint8x16ToString=Uint8x16ToString;
K.Bool8x16ToString=Bool8x16ToString;
});
})

 dummy<(function() {}) dByteLengthQueuingStrategyÍ(function(global, binding, v8) {
  'use strict';
  const defineProperty = global.Object.defineProperty;
  class ByteLengthQueuingStrategy {
    constructor(options) {
      defineProperty(this, 'highWaterMark', {
        value: options.highWaterMark,
        enumerable: true,
        configurable: true,
        writable: true
      });
    }
    size(chunk) { return chunk.byteLength; }
  }
  defineProperty(global, 'ByteLengthQueuingStrategy', {
    value: ByteLengthQueuingStrategy,
    enumerable: false,
    configurable: true,
    writable: true
  });
});
